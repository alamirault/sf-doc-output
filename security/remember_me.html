        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="how-to-add-remember-me-login-functionality">
    How to Add &quot;Remember Me&quot; Login Functionality
    <a class="headerlink" href="#how-to-add-remember-me-login-functionality" title="Permalink to this headline">Â¶</a>
</h1>
<p>Once a user is authenticated, their credentials are typically stored in the
session. This means that when the session ends they will be logged out and
have to provide their login details again next time they wish to access the
application. You can allow users to choose to stay logged in for longer than
the session lasts using a cookie with the <code translate="no" class="notranslate">remember_me</code> firewall option:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-dbd06531db8f97c582cf15a097f708407aec7ea0" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-34ccd1d22103b55467b4e23339fa0dbf20e59340" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-7fb4c8bc77268d26c19480d149fe64f27f578956" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-dbd06531db8f97c582cf15a097f708407aec7ea0" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-attr">remember_me:</span>
                <span class="hljs-attr">secret:</span>   <span class="hljs-string">'%kernel.secret%'</span> <span class="hljs-comment"># required</span>
                <span class="hljs-attr">lifetime:</span> <span class="hljs-number">604800</span> <span class="hljs-comment"># 1 week in seconds</span>
                <span class="hljs-comment"># by default, the feature is enabled by checking a</span>
                <span class="hljs-comment"># checkbox in the login form (see below), uncomment the</span>
                <span class="hljs-comment"># following line to always enable it.</span>
                <span class="hljs-comment">#always_remember_me: true</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-34ccd1d22103b55467b4e23339fa0dbf20e59340" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ... --&gt;</span>

            <span class="hljs-comment">&lt;!-- secret: required
                 lifetime: 604800 is 1 week in seconds --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">remember-me</span>
                <span class="hljs-attr">secret</span>=<span class="hljs-string">"%kernel.secret%"</span>
                <span class="hljs-attr">lifetime</span>=<span class="hljs-string">"604800"</span>
            /&gt;</span>
            <span class="hljs-comment">&lt;!-- by default, the feature is enabled by checking a checkbox
                 in the login form (see below), add always-remember-me="true"
                 to always enable it. --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-7fb4c8bc77268d26c19480d149fe64f27f578956" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-comment">// ...</span>
        <span class="hljs-operator">-&gt;</span>rememberMe()
            <span class="hljs-operator">-&gt;</span>secret(<span class="hljs-string">'%kernel.secret%'</span>) <span class="hljs-comment">// required</span>
            <span class="hljs-operator">-&gt;</span>lifetime(<span class="hljs-number">604800</span>) <span class="hljs-comment">// 1 week in seconds</span>

            <span class="hljs-comment">// by default, the feature is enabled by checking a</span>
            <span class="hljs-comment">// checkbox in the login form (see below), uncomment</span>
            <span class="hljs-comment">// the following line to always enable it.</span>
            <span class="hljs-comment">// -&gt;alwaysRememberMe(true)</span>
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>The <code translate="no" class="notranslate">secret</code> option is the only required option and it is used to sign
the remember me cookie. It's common to use the <code translate="no" class="notranslate">kernel.secret</code> parameter,
which is defined using the <code translate="no" class="notranslate">APP_SECRET</code> environment variable.</p>
<p>After enabling the <code translate="no" class="notranslate">remember_me</code> system in the configuration, there are a
couple more things to do before remember me works correctly:</p>
<ol class="arabic">
    <li><a href="remember_me.html#security-remember-me-activate" class="reference internal">Add an opt-in checkbox to activate remember me</a>;</li>
<li><a href="remember_me.html#security-remember-me-authenticator" class="reference internal">Use an authenticator that supports remember me</a>;</li>
<li>Optionally, <a href="remember_me.html#security-remember-me-storage" class="reference internal">configure how remember me cookies are stored and validated</a>.</li>
</ol>
<p>After this, the remember me cookie will be created upon successful
authentication. For some pages/actions, you can
<a href="remember_me.html#security-remember-me-authorization" class="reference internal">force a user to fully authenticate</a>
(i.e. not through a remember me cookie) for better security.</p>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The <code translate="no" class="notranslate">remember_me</code> setting contains many settings to configure the
cookie created by this feature. See <a href="remember_me.html#customizing-the-remember-me-cookie" class="reference internal">Customizing the Remember Me Cookie</a>
for a full description of these settings.</p>
</div>
<span id="security-remember-me-activate"></span>
<div class="section">
<h2 id="activating-the-remember-me-system">
    Activating the Remember Me System
    <a class="headerlink" href="#activating-the-remember-me-system" title="Permalink to this headline">Â¶</a>
</h2>
<p>Using the remember me cookie is not always appropriate (e.g. you should not
use it on a shared PC). This is why by default, Symfony requires your users
to opt-in to the remember me system via a request parameter.</p>
<p>This request parameter is often set via a checkbox in the login form. This
checkbox must have a name of <code translate="no" class="notranslate">_remember_me</code>:</p>
<div translate="no" class="highlight-html+twig highlight-twig notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs html+twig twig"><span class="hljs-comment">{# templates/security/login.html.twig #}</span><span class="xml">
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span>
    </span><span class="hljs-comment">{# ... your form fields #}</span><span class="xml">

    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"_remember_me"</span> <span class="hljs-attr">checked</span>/&gt;</span>
        Keep me logged in
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>

    </span><span class="hljs-comment">{# ... #}</span><span class="xml">
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>Optionally, you can configure a custom name for this checkbox using the
<code translate="no" class="notranslate">name</code> setting under the <code translate="no" class="notranslate">remember_me</code> section.</p>
</div>
<div class="section">
<h3 id="always-activating-remember-me">
    Always activating Remember Me
    <a class="headerlink" href="#always-activating-remember-me" title="Permalink to this headline">Â¶</a>
</h3>
<p>Sometimes, you may wish to always activate the remember me system and not
allow users to opt-out. In these cases, you can use the
<code translate="no" class="notranslate">always_remember_me</code> setting:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-438a019794945da1de1b2a03d91269da54eeba97" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-72fcbb537bea49023856f6c4745ba4a237f78db9" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-4614ea8d4bcf28bd4383dc1d954efed5e9925ca7" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-438a019794945da1de1b2a03d91269da54eeba97" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-attr">remember_me:</span>
                <span class="hljs-attr">secret:</span> <span class="hljs-string">'%kernel.secret%'</span>
                <span class="hljs-comment"># ...</span>
                <span class="hljs-attr">always_remember_me:</span> <span class="hljs-literal">true</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-72fcbb537bea49023856f6c4745ba4a237f78db9" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ... --&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">remember-me</span>
                <span class="hljs-attr">secret</span>=<span class="hljs-string">"%kernel.secret%"</span>
                <span class="hljs-attr">always-remember-me</span>=<span class="hljs-string">"true"</span>
            /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4614ea8d4bcf28bd4383dc1d954efed5e9925ca7" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-comment">// ...</span>
        <span class="hljs-operator">-&gt;</span>rememberMe()
            <span class="hljs-operator">-&gt;</span>secret(<span class="hljs-string">'%kernel.secret%'</span>)
            <span class="hljs-comment">// ...</span>
            <span class="hljs-operator">-&gt;</span>alwaysRememberMe(<span class="hljs-keyword">true</span>)
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>Now, no request parameter is checked and each successful authentication
will produce a remember me cookie.</p>
<span id="security-remember-me-authenticator"></span>
</div>
</div>
<div class="section">
<h2 id="add-remember-me-support-to-the-authenticator">
    Add Remember Me Support to the Authenticator
    <a class="headerlink" href="#add-remember-me-support-to-the-authenticator" title="Permalink to this headline">Â¶</a>
</h2>
<p>Not all authentication methods support remember me (e.g. HTTP Basic
authentication doesn't have support). An authenticator indicates support
using a <code translate="no" class="notranslate">RememberMeBadge</code> on the <a href="custom_authenticator.html#security-passport" class="reference internal">security passport</a>.</p>
<p>After logging in, you can use the security profiler to see if this badge is
present:</p>
<img src="_images/profiler-badges.png" />
<p>Without this badge, remember me will be not be activated (regardless of all
other settings).</p>
<div class="section">
<h3 id="add-remember-me-support-to-custom-authenticators">
    Add Remember Me Support to Custom Authenticators
    <a class="headerlink" href="#add-remember-me-support-to-custom-authenticators" title="Permalink to this headline">Â¶</a>
</h3>
<p>When you use a custom authenticator, you must add a <code translate="no" class="notranslate">RememberMeBadge</code>
manually:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Service/LoginAuthenticator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Authenticator</span>\<span class="hljs-title">Passport</span>\<span class="hljs-title">Badge</span>\<span class="hljs-title">RememberMeBadge</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Authenticator</span>\<span class="hljs-title">Passport</span>\<span class="hljs-title">Badge</span>\<span class="hljs-title">UserBadge</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Authenticator</span>\<span class="hljs-title">Passport</span>\<span class="hljs-title">Passport</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractAuthenticator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">authenticate</span><span class="hljs-params">(Request <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span>)</span>: <span class="hljs-title">Passport</span>
    </span>{
        <span class="hljs-comment">// ...</span>

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Passport(
            <span class="hljs-keyword">new</span> UserBadge(...),
            <span class="hljs-keyword">new</span> PasswordCredentials(...),
            [
                <span class="hljs-keyword">new</span> RememberMeBadge(),
            ]
        );
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="security-remember-me-storage"></span>
</div>
</div>
<div class="section">
<h2 id="customize-how-remember-me-tokens-are-stored">
    Customize how Remember Me Tokens are Stored
    <a class="headerlink" href="#customize-how-remember-me-tokens-are-stored" title="Permalink to this headline">Â¶</a>
</h2>
<p>Remember me cookies contain a token that is used to verify the user's
identity. As these tokens are long-lived, it is important to take
precautions to allow invalidating any generated tokens.</p>
<p>Symfony provides two ways to validate remember me tokens:</p>
<dl>
                        <dt>Signature based tokens</dt>
        
        <dd>
                            By default, the remember me cookie contains a signature based on
properties of the user. If the properties change, the signature changes
and already generated tokens are no longer considered valid. See
<a href="remember_me.html#security-remember-me-signature" class="reference internal">How to Add &quot;Remember Me&quot; Login Functionality</a> for more information.
                    </dd>
                        <dt>Persistent tokens</dt>
        
        <dd>
                            Persistent tokens store any generated token (e.g. in a database). This
allows you to invalidate tokens by changing the rows in the database.
See <a href="remember_me.html#security-remember-me-persistent" class="reference internal">How to Add &quot;Remember Me&quot; Login Functionality</a> for more information.
                    </dd>
    </dl>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>You can also write your own custom remember me handler by creating a
class that extends
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Security/Http/RememberMe/AbstractRememberMeHandler.php" class="reference external" title="Symfony\Component\Security\Http\RememberMe\AbstractRememberMeHandler" rel="external noopener noreferrer" target="_blank">AbstractRememberMeHandler</a>
(or implements <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Security/Http/RememberMe/RememberMeHandlerInterface.php" class="reference external" title="Symfony\Component\Security\Http\RememberMe\RememberMeHandlerInterface" rel="external noopener noreferrer" target="_blank">RememberMeHandlerInterface</a>).
You can then configure this custom handler by configuring the service
ID in the <code translate="no" class="notranslate">service</code> option under <code translate="no" class="notranslate">remember_me</code>.</p>
</div>
<span id="security-remember-me-signature"></span>
<div class="section">
<h3 id="using-signed-remember-me-tokens">
    Using Signed Remember Me Tokens
    <a class="headerlink" href="#using-signed-remember-me-tokens" title="Permalink to this headline">Â¶</a>
</h3>
<p>By default, remember me cookies contain a <em>hash</em> that is used to validate
the cookie. This hash is computed based on configured
signature properties.</p>
<p>These properties are always included in the hash:</p>
<ul>
    <li>The user identifier (returned by
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Security/Core/User/UserInterface.php#method_getUserIdentifier" class="reference external" title="Symfony\Component\Security\Core\User\UserInterface::getUserIdentifier()" rel="external noopener noreferrer" target="_blank">getUserIdentifier()</a>);</li>
<li>The expiration timestamp.</li>
</ul>
<p>On top of these, you can configure custom properties using the
<code translate="no" class="notranslate">signature_properties</code> setting (defaults to <code translate="no" class="notranslate">password</code>). The properties
are fetched from the user object using the
<a href="../components/property_access.html" class="reference internal">PropertyAccess component</a> (e.g. using
<code translate="no" class="notranslate">getUpdatedAt()</code> or a public <code translate="no" class="notranslate">$updatedAt</code> property when using
<code translate="no" class="notranslate">updatedAt</code>).</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-9b74a1d6784afd228821e338a5051fb44f60de6e" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-5e9bbf3addd19e818664f38e117f1e2bb14e50dd" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-d7fac184816a5af6718465d923a6ca6fdf7b040e" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-9b74a1d6784afd228821e338a5051fb44f60de6e" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-attr">remember_me:</span>
                <span class="hljs-attr">secret:</span> <span class="hljs-string">'%kernel.secret%'</span>
                <span class="hljs-comment"># ...</span>
                <span class="hljs-attr">signature_properties:</span> <span class="hljs-string">['password',</span> <span class="hljs-string">'updatedAt'</span><span class="hljs-string">]</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-5e9bbf3addd19e818664f38e117f1e2bb14e50dd" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ... --&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">remember-me</span> <span class="hljs-attr">secret</span>=<span class="hljs-string">"%kernel.secret%"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">signature-property</span>&gt;</span>password<span class="hljs-tag">&lt;/<span class="hljs-name">signature-property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">signature-property</span>&gt;</span>updatedAt<span class="hljs-tag">&lt;/<span class="hljs-name">signature-property</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">remember-me</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-d7fac184816a5af6718465d923a6ca6fdf7b040e" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-comment">// ...</span>
        <span class="hljs-operator">-&gt;</span>rememberMe()
            <span class="hljs-operator">-&gt;</span>secret(<span class="hljs-string">'%kernel.secret%'</span>)
            <span class="hljs-comment">// ...</span>
            <span class="hljs-operator">-&gt;</span>signatureProperties([<span class="hljs-string">'password'</span>, <span class="hljs-string">'updatedAt'</span>])
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>In this example, the remember me cookie will no longer be considered valid
if the <code translate="no" class="notranslate">updatedAt</code>, password or user identifier for this user changes.</p>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>Signature properties allow for some advanced usages without having to
set-up storage for all remember me tokens. For instance, you can add a
<code translate="no" class="notranslate">forceReloginAt</code> field to your user and to the signature properties.
This way, you can invalidate all remember me tokens from a user by
changing this timestamp.</p>
</div>
<span id="security-remember-me-persistent"></span>
</div>
<div class="section">
<h3 id="storing-remember-me-tokens-in-the-database">
    Storing Remember Me Tokens in the Database
    <a class="headerlink" href="#storing-remember-me-tokens-in-the-database" title="Permalink to this headline">Â¶</a>
</h3>
<p>As remember me tokens are often long-lived, you might prefer to save them in
a database to have full control over them. Symfony comes with support for
persistent remember me tokens.</p>
<p>This implementation uses a <em>remember me token provider</em> for storing and
retrieving the tokens from the database. The DoctrineBridge provides a
token provider using Doctrine.</p>
<p>You can enable the doctrine token provider using the <code translate="no" class="notranslate">doctrine</code> setting:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-0e702a06c92683819af57da96c2f1f746f826e52" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-08e96aea39caadb5be8be03d33706cc1c5082d8e" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-b8ea1f9f9b0de41740f0a3dbebf8b6ca1a91205d" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-0e702a06c92683819af57da96c2f1f746f826e52" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-attr">remember_me:</span>
                <span class="hljs-attr">secret:</span> <span class="hljs-string">'%kernel.secret%'</span>
                <span class="hljs-comment"># ...</span>
                <span class="hljs-attr">token_provider:</span>
                    <span class="hljs-attr">doctrine:</span> <span class="hljs-literal">true</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-08e96aea39caadb5be8be03d33706cc1c5082d8e" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ... --&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">remember-me</span> <span class="hljs-attr">secret</span>=<span class="hljs-string">"%kernel.secret%"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">token-provider</span> <span class="hljs-attr">doctrine</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">remember-me</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-b8ea1f9f9b0de41740f0a3dbebf8b6ca1a91205d" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-comment">// ...</span>
        <span class="hljs-operator">-&gt;</span>rememberMe()
            <span class="hljs-operator">-&gt;</span>secret(<span class="hljs-string">'%kernel.secret%'</span>)
            <span class="hljs-comment">// ...</span>
            <span class="hljs-operator">-&gt;</span>tokenProvider([
                <span class="hljs-string">'doctrine'</span> =&gt; <span class="hljs-keyword">true</span>,
            ])
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>This also instructs Doctrine to create a table for the remember me tokens.
If you use the DoctrineMigrationsBundle, you can create a new migration for
this:</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>php bin/console doctrine:migrations:diff

<span class="hljs-comment"># and optionally run the migrations locally</span>
<span class="hljs-prompt">$ </span>php bin/console doctrine:migrations:migrate</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Otherwise, you can use the <code translate="no" class="notranslate">doctrine:schema:update</code> command:</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-comment"># get the required SQL code</span>
<span class="hljs-prompt">$ </span>php bin/console doctrine:schema:update --dump-sql

<span class="hljs-comment"># run the SQL in your DB client, or let the command run it for you</span>
<span class="hljs-prompt">$ </span>php bin/console doctrine:schema:update --force</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h4 id="implementing-a-custom-token-provider">
    Implementing a Custom Token Provider
    <a class="headerlink" href="#implementing-a-custom-token-provider" title="Permalink to this headline">Â¶</a>
</h4>
<p>You can also create a custom token provider by creating a class that
implements <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Security/Core/Authentication/RememberMe/TokenProviderInterface.php" class="reference external" title="Symfony\Component\Security\Core\Authentication\RememberMe\TokenProviderInterface" rel="external noopener noreferrer" target="_blank">TokenProviderInterface</a>.</p>
<p>Then, configure the service ID of your custom token provider as <code translate="no" class="notranslate">service</code>:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-c08a674d1fa533f94cb86f6cc7004ab76a6b0913" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-6184d93eeb54a65f33a78963819cfd81f7f2fc34" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-415a210b587f33452230978e32559d13c3739499" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-c08a674d1fa533f94cb86f6cc7004ab76a6b0913" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-attr">remember_me:</span>
                <span class="hljs-comment"># ...</span>
                <span class="hljs-attr">token_provider:</span>
                    <span class="hljs-attr">service:</span> <span class="hljs-string">App\Security\RememberMe\CustomTokenProvider</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-6184d93eeb54a65f33a78963819cfd81f7f2fc34" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ... --&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">remember-me</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">token-provider</span> <span class="hljs-attr">service</span>=<span class="hljs-string">"App\Security\RememberMe\CustomTokenProvider"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">remember-me</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-415a210b587f33452230978e32559d13c3739499" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">RememberMe</span>\<span class="hljs-title">CustomTokenProvider</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-comment">// ...</span>
        <span class="hljs-operator">-&gt;</span>rememberMe()
            <span class="hljs-comment">// ...</span>
            <span class="hljs-operator">-&gt;</span>tokenProvider([
                <span class="hljs-string">'service'</span> =&gt; CustomTokenProvider<span class="hljs-operator">::</span>class,
            ])
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<span id="security-remember-me-authorization"></span>
</div>
</div>
</div>
<div class="section">
<h2 id="forcing-the-user-to-re-authenticate-before-accessing-certain-resources">
    Forcing the User to Re-Authenticate before Accessing certain Resources
    <a class="headerlink" href="#forcing-the-user-to-re-authenticate-before-accessing-certain-resources" title="Permalink to this headline">Â¶</a>
</h2>
<p>When the user returns to your site, they are authenticated automatically based
on the information stored in the remember me cookie. This allows the user
to access protected resources as if the user had actually authenticated upon
visiting the site.</p>
<p>In some cases, however, you may want to force the user to actually re-authenticate
before accessing certain resources. For example, you might not allow &quot;remember me&quot;
users to change their password. You can do this by leveraging a few special
&quot;attributes&quot;:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Controller/AccountController.php</span>
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">accountInfo</span><span class="hljs-params">()</span>: <span class="hljs-title">Response</span>
</span>{
    <span class="hljs-comment">// allow any authenticated user - we don't care if they just</span>
    <span class="hljs-comment">// logged in, or are logged in via a remember me cookie</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>denyAccessUnlessGranted(<span class="hljs-string">'IS_AUTHENTICATED_REMEMBERED'</span>);

    <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetPassword</span><span class="hljs-params">()</span>: <span class="hljs-title">Response</span>
</span>{
    <span class="hljs-comment">// require the user to log in during *this* session</span>
    <span class="hljs-comment">// if they were only logged in via a remember me cookie, they</span>
    <span class="hljs-comment">// will be redirected to the login page</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>denyAccessUnlessGranted(<span class="hljs-string">'IS_AUTHENTICATED_FULLY'</span>);

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>There is also a <code translate="no" class="notranslate">IS_REMEMBERED</code> attribute that grants access <em>only</em>
when the user is authenticated via the remember me mechanism.</p>
</div>
</div>
<div class="section">
<h2 id="customizing-the-remember-me-cookie">
    Customizing the Remember Me Cookie
    <a class="headerlink" href="#customizing-the-remember-me-cookie" title="Permalink to this headline">Â¶</a>
</h2>
<p>The <code translate="no" class="notranslate">remember_me</code> configuration contains many options to customize the
cookie created by the system:</p>
<dl>
                        <dt><code translate="no" class="notranslate">name</code> (default value: <code translate="no" class="notranslate">REMEMBERME</code>)</dt>
        
        <dd>
                            The name of the cookie used to keep the user logged in. If you enable the
<code translate="no" class="notranslate">remember_me</code> feature in several firewalls of the same application, make sure
to choose a different name for the cookie of each firewall. Otherwise, you'll
face lots of security related problems.
                    </dd>
                        <dt><code translate="no" class="notranslate">lifetime</code> (default value: <code translate="no" class="notranslate">31536000</code> i.e. 1 year in seconds)</dt>
        
        <dd>
                            The number of seconds after which the cookie will be expired. This
defines the maximum time between two visits for the user to remain
authenticated.
                    </dd>
                        <dt><code translate="no" class="notranslate">path</code> (default value: <code translate="no" class="notranslate">/</code>)</dt>
        
        <dd>
                            The path where the cookie associated with this feature is used. By default
the cookie will be applied to the entire website but you can restrict to a
specific section (e.g. <code translate="no" class="notranslate">/forum</code>, <code translate="no" class="notranslate">/admin</code>).
                    </dd>
                        <dt><code translate="no" class="notranslate">domain</code> (default value: <code translate="no" class="notranslate">null</code>)</dt>
        
        <dd>
                            The domain where the cookie associated with this feature is used. By default
cookies use the current domain obtained from <code translate="no" class="notranslate">$_SERVER</code>.
                    </dd>
                        <dt><code translate="no" class="notranslate">secure</code> (default value: <code translate="no" class="notranslate">false</code>)</dt>
        
        <dd>
                            If <code translate="no" class="notranslate">true</code>, the cookie associated with this feature is sent to the user
through an HTTPS secure connection.
                    </dd>
                        <dt><code translate="no" class="notranslate">httponly</code> (default value: <code translate="no" class="notranslate">true</code>)</dt>
        
        <dd>
                            If <code translate="no" class="notranslate">true</code>, the cookie associated with this feature is accessible only
through the HTTP protocol. This means that the cookie won't be accessible
by scripting languages, such as JavaScript.
                    </dd>
                        <dt><code translate="no" class="notranslate">samesite</code> (default value: <code translate="no" class="notranslate">null</code>)</dt>
        
        <dd>
                            If set to <code translate="no" class="notranslate">strict</code>, the cookie associated with this feature will not
be sent along with cross-site requests, even when following a regular link.
                    </dd>
    </dl>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>