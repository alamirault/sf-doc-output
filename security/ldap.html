        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="authenticating-against-an-ldap-server">
    Authenticating against an LDAP server
    <a class="headerlink" href="#authenticating-against-an-ldap-server" title="Permalink to this headline">¶</a>
</h1>
<p>Symfony provides different means to work with an LDAP server.</p>
<p>The Security component offers:</p>
<ul>
    <li>The <code translate="no" class="notranslate">ldap</code> <a href="user_providers.html" class="reference internal">user provider</a>, using the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Ldap/Security/LdapUserProvider.php" class="reference external" title="Symfony\Component\Ldap\Security\LdapUserProvider" rel="external noopener noreferrer" target="_blank">LdapUserProvider</a>
class. Like all other user providers, it can be used with any
authentication provider.</li>
<li>The <code translate="no" class="notranslate">form_login_ldap</code> authentication provider, for authenticating
against an LDAP server using a login form. Like all other
authentication providers, it can be used with any user provider.</li>
<li>The <code translate="no" class="notranslate">http_basic_ldap</code> authentication provider, for authenticating
against an LDAP server using HTTP Basic. Like all other
authentication providers, it can be used with any user provider.</li>
</ul>
<p>This means that the following scenarios will work:</p>
<ul>
    <li>Checking a user's password and fetching user information against an
LDAP server. This can be done using both the LDAP user provider and
either the LDAP form login or LDAP HTTP Basic authentication providers.</li>
<li>Checking a user's password against an LDAP server while fetching user
information from another source (database using FOSUserBundle, for
example).</li>
<li>Loading user information from an LDAP server, while using another
authentication strategy (token-based pre-authentication, for example).</li>
</ul>
<div class="section">
<h2 id="installation">
    Installation
    <a class="headerlink" href="#installation" title="Permalink to this headline">¶</a>
</h2>
<p>In applications using <a href="../setup.html#symfony-flex" class="reference internal">Symfony Flex</a>, run this command to
install the Ldap component before using it:</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>composer require symfony/ldap</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="ldap-configuration-reference">
    Ldap Configuration Reference
    <a class="headerlink" href="#ldap-configuration-reference" title="Permalink to this headline">¶</a>
</h2>
<p>See <a href="../reference/configuration/security.html" class="reference internal">Security Configuration Reference (SecurityBundle)</a> for the full LDAP
configuration reference (<code translate="no" class="notranslate">form_login_ldap</code>, <code translate="no" class="notranslate">http_basic_ldap</code>, <code translate="no" class="notranslate">ldap</code>).
Some of the more interesting options are explained below.</p>
</div>
<div class="section">
<h2 id="configuring-the-ldap-client">
    Configuring the LDAP client
    <a class="headerlink" href="#configuring-the-ldap-client" title="Permalink to this headline">¶</a>
</h2>
<p>All mechanisms actually need an LDAP client previously configured.
The providers are configured to use a default service named <code translate="no" class="notranslate">ldap</code>,
but you can override this setting in the security component's
configuration.</p>
<p>An LDAP client can be configured using the built-in
<a href="https://www.php.net/manual/en/intro.ldap.php" class="reference external" rel="external noopener noreferrer" target="_blank">LDAP PHP extension</a> with the following service definition:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-24b733595bf38b348c92f46f9a0ff7e87b23dbd4" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-eaa288b6277dac937a9bb2c1ad7e0b5c99ad6952" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-b1fa4afea9b737422ef23cb6b08c84a34db9497c" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-24b733595bf38b348c92f46f9a0ff7e87b23dbd4" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-string">Symfony\Component\Ldap\Ldap:</span>
        <span class="hljs-attr">arguments:</span> <span class="hljs-string">['@Symfony\Component\Ldap\Adapter\ExtLdap\Adapter']</span>
        <span class="hljs-attr">tags:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">ldap</span>
    <span class="hljs-string">Symfony\Component\Ldap\Adapter\ExtLdap\Adapter:</span>
        <span class="hljs-attr">arguments:</span>
            <span class="hljs-bullet">-</span>   <span class="hljs-attr">host:</span> <span class="hljs-string">my-server</span>
                <span class="hljs-attr">port:</span> <span class="hljs-number">389</span>
                <span class="hljs-attr">encryption:</span> <span class="hljs-string">tls</span>
                <span class="hljs-attr">options:</span>
                    <span class="hljs-attr">protocol_version:</span> <span class="hljs-number">3</span>
                    <span class="hljs-attr">referrals:</span> <span class="hljs-literal">false</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-eaa288b6277dac937a9bb2c1ad7e0b5c99ad6952" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Symfony\Component\Ldap\Ldap"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Symfony\Component\Ldap\Adapter\ExtLdap\Adapter"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tag</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ldap"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Symfony\Component\Ldap\Adapter\ExtLdap\Adapter"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"collection"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"host"</span>&gt;</span>my-server<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"port"</span>&gt;</span>389<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"encryption"</span>&gt;</span>tls<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"options"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"collection"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"protocol_version"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"referrals"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-b1fa4afea9b737422ef23cb6b08c84a34db9497c" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Ldap</span>\<span class="hljs-title">Adapter</span>\<span class="hljs-title">ExtLdap</span>\<span class="hljs-title">Adapter</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Ldap</span>\<span class="hljs-title">Ldap</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>container</span><span class="hljs-operator">-&gt;</span>register(Ldap<span class="hljs-operator">::</span>class)
    <span class="hljs-operator">-&gt;</span>addArgument(<span class="hljs-keyword">new</span> Reference(Adapter<span class="hljs-operator">::</span>class))
    <span class="hljs-operator">-&gt;</span>tag(<span class="hljs-string">'ldap'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>container</span>
    <span class="hljs-operator">-&gt;</span>register(Adapter<span class="hljs-operator">::</span>class)
    <span class="hljs-operator">-&gt;</span>setArguments([
        <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">'my-server'</span>,
        <span class="hljs-string">'port'</span> =&gt; <span class="hljs-number">389</span>,
        <span class="hljs-string">'encryption'</span> =&gt; <span class="hljs-string">'tls'</span>,
        <span class="hljs-string">'options'</span> =&gt; [
            <span class="hljs-string">'protocol_version'</span> =&gt; <span class="hljs-number">3</span>,
            <span class="hljs-string">'referrals'</span> =&gt; <span class="hljs-keyword">false</span>
        ],
    ]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<span id="security-ldap-user-provider"></span>
</div>
<div class="section">
<h2 id="fetching-users-using-the-ldap-user-provider">
    Fetching Users Using the LDAP User Provider
    <a class="headerlink" href="#fetching-users-using-the-ldap-user-provider" title="Permalink to this headline">¶</a>
</h2>
<p>If you want to fetch user information from an LDAP server, you may want to
use the <code translate="no" class="notranslate">ldap</code> user provider.</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-adf0c621c2254cf4a7a764403cbb84690955210e" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-5fd2b9541a79f2d76ebcb7e2b7464ee589bfb92a" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-cc7c3e40a576c6415184106c48c4db61715aab8c" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-adf0c621c2254cf4a7a764403cbb84690955210e" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">providers:</span>
        <span class="hljs-attr">my_ldap:</span>
            <span class="hljs-attr">ldap:</span>
                <span class="hljs-attr">service:</span> <span class="hljs-string">Symfony\Component\Ldap\Ldap</span>
                <span class="hljs-attr">base_dn:</span> <span class="hljs-string">dc=example,dc=com</span>
                <span class="hljs-attr">search_dn:</span> <span class="hljs-string">"cn=read-only-admin,dc=example,dc=com"</span>
                <span class="hljs-attr">search_password:</span> <span class="hljs-string">password</span>
                <span class="hljs-attr">default_roles:</span> <span class="hljs-string">ROLE_USER</span>
                <span class="hljs-attr">uid_key:</span> <span class="hljs-string">uid</span>
                <span class="hljs-attr">extra_fields:</span> <span class="hljs-string">['email']</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-5fd2b9541a79f2d76ebcb7e2b7464ee589bfb92a" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">provider</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"my_ldap"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ldap</span> <span class="hljs-attr">service</span>=<span class="hljs-string">"Symfony\Component\Ldap\Ldap"</span>
                <span class="hljs-attr">base-dn</span>=<span class="hljs-string">"dc=example,dc=com"</span>
                <span class="hljs-attr">search-dn</span>=<span class="hljs-string">"cn=read-only-admin,dc=example,dc=com"</span>
                <span class="hljs-attr">search-password</span>=<span class="hljs-string">"password"</span>
                <span class="hljs-attr">default-roles</span>=<span class="hljs-string">"ROLE_USER"</span>
                <span class="hljs-attr">uid-key</span>=<span class="hljs-string">"uid"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">provider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-cc7c3e40a576c6415184106c48c4db61715aab8c" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Ldap</span>\<span class="hljs-title">Ldap</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>provider(<span class="hljs-string">'ldap_users'</span>)
        <span class="hljs-operator">-&gt;</span>ldap()
            <span class="hljs-operator">-&gt;</span>service(Ldap<span class="hljs-operator">::</span>class)
            <span class="hljs-operator">-&gt;</span>baseDn(<span class="hljs-string">'dc=example,dc=com'</span>)
            <span class="hljs-operator">-&gt;</span>searchDn(<span class="hljs-string">'cn=read-only-admin,dc=example,dc=com'</span>)
            <span class="hljs-operator">-&gt;</span>searchPassword(<span class="hljs-string">'password'</span>)
            <span class="hljs-operator">-&gt;</span>defaultRoles([<span class="hljs-string">'ROLE_USER'</span>])
            <span class="hljs-operator">-&gt;</span>uidKey(<span class="hljs-string">'uid'</span>)
            <span class="hljs-operator">-&gt;</span>extraFields([<span class="hljs-string">'email'</span>])
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>The Security component escapes provided input data when the LDAP user
provider is used. However, the LDAP component itself does not provide
any escaping yet. Thus, it's your responsibility to prevent LDAP injection
attacks when using the component directly.</p>
</div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>The user configured above in the user provider is only used to retrieve
data. It's a static user defined by its username and password (for improved
security, define the password as an environment variable).</p>
<p>If your LDAP server allows retrieval of information anonymously, you can
set the <code translate="no" class="notranslate">search_dn</code> and <code translate="no" class="notranslate">search_password</code> options to <code translate="no" class="notranslate">null</code>.</p>
</div>
<p>The <code translate="no" class="notranslate">ldap</code> user provider supports many different configuration options:</p>
<div class="section">
<h3 id="service">
    service
    <a class="headerlink" href="#service" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">ldap</code></p>
<p>This is the name of your configured LDAP client. You can freely choose the
name, but it must be unique in your application and it cannot start with a
number or contain white spaces.</p>
</div>
<div class="section">
<h3 id="base-dn">
    base_dn
    <a class="headerlink" href="#base-dn" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This is the base DN for the directory</p>
</div>
<div class="section">
<h3 id="search-dn">
    search_dn
    <a class="headerlink" href="#search-dn" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This is your read-only user's DN, which will be used to authenticate
against the LDAP server to fetch the user's information.</p>
</div>
<div class="section">
<h3 id="search-password">
    search_password
    <a class="headerlink" href="#search-password" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This is your read-only user's password, which will be used to authenticate
against the LDAP server to fetch the user's information.</p>
</div>
<div class="section">
<h3 id="default-roles">
    default_roles
    <a class="headerlink" href="#default-roles" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">array</code> <strong>default</strong>: <code translate="no" class="notranslate">[]</code></p>
<p>This is the default role you wish to give to a user fetched from the LDAP
server. If you do not configure this key, your users won't have any roles,
and will not be considered as authenticated fully.</p>
</div>
<div class="section">
<h3 id="uid-key">
    uid_key
    <a class="headerlink" href="#uid-key" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This is the entry's key to use as its UID. Depends on your LDAP server
implementation. Commonly used values are:</p>
<ul>
    <li><code translate="no" class="notranslate">sAMAccountName</code> (default)</li>
<li><code translate="no" class="notranslate">userPrincipalName</code></li>
<li><code translate="no" class="notranslate">uid</code></li>
</ul>
<p>If you pass <code translate="no" class="notranslate">null</code> as the value of this option, the default UID key is used
<code translate="no" class="notranslate">sAMAccountName</code>.</p>
</div>
<div class="section">
<h3 id="extra-fields">
    extra_fields
    <a class="headerlink" href="#extra-fields" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">array</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>Defines the custom fields to pull from the LDAP server. If any field does not
exist, an <code translate="no" class="notranslate">\InvalidArgumentException</code> will be thrown.</p>
</div>
<div class="section">
<h3 id="filter">
    filter
    <a class="headerlink" href="#filter" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This key lets you configure which LDAP query will be used. The <code translate="no" class="notranslate">{uid_key}</code>
string will be replaced by the value of the <code translate="no" class="notranslate">uid_key</code> configuration value
(by default, <code translate="no" class="notranslate">sAMAccountName</code>), and the <code translate="no" class="notranslate">{user_identifier}</code> string will be
replaced by the user identified you are trying to load.</p>
<div class="admonition admonition-deprecated ">
    <p class="admonition-title">
                                    <span>6.2</span>
    </p><p>Starting from Symfony 6.2, the <code translate="no" class="notranslate">{username}</code> string was deprecated in favor
of <code translate="no" class="notranslate">{user_identifier}</code>.</p>
</div>
<p>For example, with a <code translate="no" class="notranslate">uid_key</code> of <code translate="no" class="notranslate">uid</code>, and if you are trying to
load the user <code translate="no" class="notranslate">fabpot</code>, the final string will be: <code translate="no" class="notranslate">(uid=fabpot)</code>.</p>
<p>If you pass <code translate="no" class="notranslate">null</code> as the value of this option, the default filter is used
<code translate="no" class="notranslate">({uid_key}={user_identifier})</code>.</p>
<p>To prevent <a href="http://projects.webappsec.org/w/page/13246947/LDAP%20Injection" class="reference external" rel="external noopener noreferrer" target="_blank">LDAP injection</a>, the username will be escaped.</p>
<p>The syntax for the <code translate="no" class="notranslate">filter</code> key is defined by <a href="http://www.faqs.org/rfcs/rfc4515.html" class="reference external" rel="external noopener noreferrer" target="_blank">RFC4515</a>.</p>
</div>
</div>
<div class="section">
<h2 id="authenticating-against-an-ldap-server-1">
    Authenticating against an LDAP server
    <a class="headerlink" href="#authenticating-against-an-ldap-server-1" title="Permalink to this headline">¶</a>
</h2>
<p>Authenticating against an LDAP server can be done using either the form
login or the HTTP Basic authentication providers.</p>
<p>They are configured exactly as their non-LDAP counterparts, with the
addition of two configuration keys and one optional key:</p>
<div class="section">
<h3 id="service-1">
    service
    <a class="headerlink" href="#service-1" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">ldap</code></p>
<p>This is the name of your configured LDAP client. You can freely choose the
name, but it must be unique in your application and it cannot start with a
number or contain white spaces.</p>
</div>
<div class="section">
<h3 id="dn-string">
    dn_string
    <a class="headerlink" href="#dn-string" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">{user_identifier}</code></p>
<p>This key defines the form of the string used to compose the
DN of the user, from the username. The <code translate="no" class="notranslate">{user_identifier}</code> string is
replaced by the actual username of the person trying to authenticate.</p>
<p>For example, if your users have DN strings in the form
<code translate="no" class="notranslate">uid=einstein,dc=example,dc=com</code>, then the <code translate="no" class="notranslate">dn_string</code> will be
<code translate="no" class="notranslate">uid={user_identifier},dc=example,dc=com</code>.</p>
</div>
<div class="section">
<h3 id="query-string">
    query_string
    <a class="headerlink" href="#query-string" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This (optional) key makes the user provider search for a user and then use the
found DN for the bind process. This is useful when using multiple LDAP user
providers with different <code translate="no" class="notranslate">base_dn</code>. The value of this option must be a valid
search string (e.g. <code translate="no" class="notranslate">uid=&quot;{user_identifier}&quot;</code>). The placeholder value will be
replaced by the actual user identifier.</p>
<p>When this option is used, <code translate="no" class="notranslate">query_string</code> will search in the DN specified by
<code translate="no" class="notranslate">dn_string</code> and the DN resulted of the <code translate="no" class="notranslate">query_string</code> will be used to
authenticate the user with their password. Following the previous example, if
your users have the following two DN: <code translate="no" class="notranslate">dc=companyA,dc=example,dc=com</code> and
<code translate="no" class="notranslate">dc=companyB,dc=example,dc=com</code>, then <code translate="no" class="notranslate">dn_string</code> should be
<code translate="no" class="notranslate">dc=example,dc=com</code>.</p>
<p>Bear in mind that usernames must be unique across both DN, as the authentication
provider won't be able to select the correct user for the bind process if more
than one is found.</p>
<p>Examples are provided below, for both <code translate="no" class="notranslate">form_login_ldap</code> and
<code translate="no" class="notranslate">http_basic_ldap</code>.</p>
</div>
<div class="section">
<h3 id="configuration-example-for-form-login">
    Configuration example for form login
    <a class="headerlink" href="#configuration-example-for-form-login" title="Permalink to this headline">¶</a>
</h3>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-92ee1d6590e0cb7c0e5f757e554e7bfc3b0fad76" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-4f987b4e8327203ea44183b74436ac97db1d3990" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-018b0951715925896e3e6528bb5c82e2296e2308" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-92ee1d6590e0cb7c0e5f757e554e7bfc3b0fad76" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-attr">form_login_ldap:</span>
                <span class="hljs-comment"># ...</span>
                <span class="hljs-attr">service:</span> <span class="hljs-string">Symfony\Component\Ldap\Ldap</span>
                <span class="hljs-attr">dn_string:</span> <span class="hljs-string">'uid={user_identifier},dc=example,dc=com'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4f987b4e8327203ea44183b74436ac97db1d3990" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">form-login-ldap</span> <span class="hljs-attr">service</span>=<span class="hljs-string">"Symfony\Component\Ldap\Ldap"</span>
                <span class="hljs-attr">dn-string</span>=<span class="hljs-string">"uid={user_identifier},dc=example,dc=com"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-018b0951715925896e3e6528bb5c82e2296e2308" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Ldap</span>\<span class="hljs-title">Ldap</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-operator">-&gt;</span>formLoginLdap()
            <span class="hljs-operator">-&gt;</span>service(Ldap<span class="hljs-operator">::</span>class)
            <span class="hljs-operator">-&gt;</span>dnString(<span class="hljs-string">'uid={user_identifier},dc=example,dc=com'</span>)
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
</div>
<div class="section">
<h3 id="configuration-example-for-http-basic">
    Configuration example for HTTP Basic
    <a class="headerlink" href="#configuration-example-for-http-basic" title="Permalink to this headline">¶</a>
</h3>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-282e9afb904d4b421f0db261b718fac73117f84e" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-a3cbdfeda42be13048f313bbaa20a355b1d62024" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-30db989d55433fed6290cb6e0d6b6f77befbe58a" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-282e9afb904d4b421f0db261b718fac73117f84e" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-attr">stateless:</span> <span class="hljs-literal">true</span>
            <span class="hljs-attr">http_basic_ldap:</span>
                <span class="hljs-attr">service:</span> <span class="hljs-string">Symfony\Component\Ldap\Ldap</span>
                <span class="hljs-attr">dn_string:</span> <span class="hljs-string">'uid={user_identifier},dc=example,dc=com'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-a3cbdfeda42be13048f313bbaa20a355b1d62024" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span> <span class="hljs-attr">stateless</span>=<span class="hljs-string">"true"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">http-basic-ldap</span> <span class="hljs-attr">service</span>=<span class="hljs-string">"Symfony\Component\Ldap\Ldap"</span>
                <span class="hljs-attr">dn-string</span>=<span class="hljs-string">"uid={user_identifier},dc=example,dc=com"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-30db989d55433fed6290cb6e0d6b6f77befbe58a" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Ldap</span>\<span class="hljs-title">Ldap</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-operator">-&gt;</span>stateless(<span class="hljs-keyword">true</span>)
        <span class="hljs-operator">-&gt;</span>formLoginLdap()
            <span class="hljs-operator">-&gt;</span>service(Ldap<span class="hljs-operator">::</span>class)
            <span class="hljs-operator">-&gt;</span>dnString(<span class="hljs-string">'uid={user_identifier},dc=example,dc=com'</span>)
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
</div>
<div class="section">
<h3 id="configuration-example-for-form-login-and-query-string">
    Configuration example for form login and query_string
    <a class="headerlink" href="#configuration-example-for-form-login-and-query-string" title="Permalink to this headline">¶</a>
</h3>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-d2380e36a03821f2273276866042fce8cb4ef124" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-892b0a9f4ef4f8c29f196ee9a67c21a93e34e227" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-484633fe4deb25450c05d99c2104301e7f2519ff" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-d2380e36a03821f2273276866042fce8cb4ef124" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/security.yaml</span>
<span class="hljs-attr">security:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">firewalls:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-comment"># ...</span>
            <span class="hljs-attr">form_login_ldap:</span>
                <span class="hljs-attr">service:</span> <span class="hljs-string">Symfony\Component\Ldap\Ldap</span>
                <span class="hljs-attr">dn_string:</span> <span class="hljs-string">'dc=example,dc=com'</span>
                <span class="hljs-attr">query_string:</span> <span class="hljs-string">'(&amp;(uid={user_identifier})(memberOf=cn=users,ou=Services,dc=example,dc=com))'</span>
                <span class="hljs-attr">search_dn:</span> <span class="hljs-string">'...'</span>
                <span class="hljs-attr">search_password:</span> <span class="hljs-string">'the-raw-password'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-892b0a9f4ef4f8c29f196ee9a67c21a93e34e227" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/security.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">srv:container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/security"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:srv</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/security
        https://symfony.com/schema/dic/security/security-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">firewall</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ... --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">form-login-ldap</span> <span class="hljs-attr">service</span>=<span class="hljs-string">"Symfony\Component\Ldap\Ldap"</span>
                <span class="hljs-attr">dn-string</span>=<span class="hljs-string">"dc=example,dc=com"</span>
                <span class="hljs-attr">query-string</span>=<span class="hljs-string">"(<span class="hljs-symbol">&amp;amp;</span>(uid={user_identifier})(memberOf=cn=users,ou=Services,dc=example,dc=com))"</span>
                <span class="hljs-attr">search-dn</span>=<span class="hljs-string">"..."</span>
                <span class="hljs-attr">search-password</span>=<span class="hljs-string">"the-raw-password"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">firewall</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">srv:container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-484633fe4deb25450c05d99c2104301e7f2519ff" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/security.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Ldap</span>\<span class="hljs-title">Ldap</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">SecurityConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(SecurityConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>security</span><span class="hljs-operator">-&gt;</span>firewall(<span class="hljs-string">'main'</span>)
        <span class="hljs-operator">-&gt;</span>stateless(<span class="hljs-keyword">true</span>)
        <span class="hljs-operator">-&gt;</span>formLoginLdap()
            <span class="hljs-operator">-&gt;</span>service(Ldap<span class="hljs-operator">::</span>class)
            <span class="hljs-operator">-&gt;</span>dnString(<span class="hljs-string">'dc=example,dc=com'</span>)
            <span class="hljs-operator">-&gt;</span>queryString(<span class="hljs-string">'(&amp;(uid={user_identifier})(memberOf=cn=users,ou=Services,dc=example,dc=com))'</span>)
            <span class="hljs-operator">-&gt;</span>searchDn(<span class="hljs-string">'...'</span>)
            <span class="hljs-operator">-&gt;</span>searchPassword(<span class="hljs-string">'the-raw-password'</span>)
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
</div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>