        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="service-container">
    Service Container
    <a class="headerlink" href="#service-container" title="Permalink to this headline">¶</a>
</h1>
<div class="admonition admonition-screencast screencast">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                <span>Screencast</span>
    </p><p>Do you prefer video tutorials? Check out the <a href="https://symfonycasts.com/screencast/symfony-fundamentals" class="reference external" rel="external noopener noreferrer" target="_blank">Symfony Fundamentals screencast series</a>.</p>
</div>
<p>Your application is <em>full</em> of useful objects: a &quot;Mailer&quot; object might help you
send emails while another object might help you save things to the database.
Almost <em>everything</em> that your app &quot;does&quot; is actually done by one of these objects.
And each time you install a new bundle, you get access to even more!</p>
<p>In Symfony, these useful objects are called <strong>services</strong> and each service lives
inside a very special object called the <strong>service container</strong>. The container
allows you to centralize the way objects are constructed. It makes your life
easier, promotes a strong architecture and is super fast!</p>
<div class="section">
<h2 id="fetching-and-using-services">
    Fetching and using Services
    <a class="headerlink" href="#fetching-and-using-services" title="Permalink to this headline">¶</a>
</h2>
<p>The moment you start a Symfony app, your container <em>already</em> contains many services.
These are like <em>tools</em>: waiting for you to take advantage of them. In your controller,
you can &quot;ask&quot; for a service from the container by type-hinting an argument with the
service's class or interface name. Want to <a href="logging.html" class="reference internal">log</a> something? No problem:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Controller/ProductController.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Psr</span>\<span class="hljs-title">Log</span>\<span class="hljs-title">LoggerInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">FrameworkBundle</span>\<span class="hljs-title">Controller</span>\<span class="hljs-title">AbstractController</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Routing</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">Route</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractController</span>
</span>{
    <span class="hljs-comment">#[Route('/products')]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">list</span><span class="hljs-params">(LoggerInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span>)</span>: <span class="hljs-title">Response</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span><span class="hljs-operator">-&gt;</span>info(<span class="hljs-string">'Look, I just used a service!'</span>);

        <span class="hljs-comment">// ...</span>
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>What other services are available? Find out by running:</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>php bin/console debug:autowiring

  <span class="hljs-comment"># this is just a *small* sample of the output...</span>

  Autowirable Types
  =================

   The following classes &amp; interfaces can be used as <span class="hljs-built_in">type</span>-hints when autowiring:

   Describes a logger instance.
   Psr\Log\LoggerInterface (logger)

   Request stack that controls the lifecycle of requests.
   Symfony\Component\HttpFoundation\RequestStack (request_stack)

   RouterInterface is the interface that all Router classes must implement.
   Symfony\Component\Routing\RouterInterface (router.default)

   [...]</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>When you use these type-hints in your controller methods or inside your
<a href="service_container.html#service-container-creating-service" class="reference internal">own services</a>, Symfony will automatically
pass you the service object matching that type.</p>
<p>Throughout the docs, you'll see how to use the many different services that live
in the container.</p>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>There are actually <em>many</em> more services in the container, and each service has
a unique id in the container, like <code translate="no" class="notranslate">request_stack</code> or <code translate="no" class="notranslate">router.default</code>. For a full
list, you can run <code translate="no" class="notranslate">php bin/console debug:container</code>. But most of the time,
you won't need to worry about this. See <a href="service_container.html#services-wire-specific-service" class="reference internal">Service Container</a>.
See <a href="service_container/debug.html" class="reference internal">How to Debug the Service Container &amp; List Services</a>.</p>
</div>
<span id="service-container-creating-service"></span>
</div>
<div class="section">
<h2 id="creating-configuring-services-in-the-container">
    Creating/Configuring Services in the Container
    <a class="headerlink" href="#creating-configuring-services-in-the-container" title="Permalink to this headline">¶</a>
</h2>
<p>You can also organize your <em>own</em> code into services. For example, suppose you need
to show your users a random, happy message. If you put this code in your controller,
it can't be re-used. Instead, you decide to create a new class:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Service/MessageGenerator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHappyMessage</span><span class="hljs-params">()</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>messages</span> = [
            <span class="hljs-string">'You did it! You updated the system! Amazing!'</span>,
            <span class="hljs-string">'That was one of the coolest updates I\'ve seen all day!'</span>,
            <span class="hljs-string">'Great work! Keep going!'</span>,
        ];

        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>index</span> = array_rand(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>messages</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>messages</span>[<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>index</span>];
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Congratulations! You've created your first service class! You can use it immediately
inside your controller:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Controller/ProductController.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">MessageGenerator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">FrameworkBundle</span>\<span class="hljs-title">Controller</span>\<span class="hljs-title">AbstractController</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Routing</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">Route</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractController</span>
</span>{
    <span class="hljs-comment">#[Route('/products/new')]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">new</span><span class="hljs-params">(MessageGenerator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>messageGenerator</span>)</span>: <span class="hljs-title">Response</span>
    </span>{
        <span class="hljs-comment">// thanks to the type-hint, the container will instantiate a</span>
        <span class="hljs-comment">// new MessageGenerator and pass it to you!</span>
        <span class="hljs-comment">// ...</span>

        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>message</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>messageGenerator</span><span class="hljs-operator">-&gt;</span>getHappyMessage();
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>addFlash(<span class="hljs-string">'success'</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>message</span>);
        <span class="hljs-comment">// ...</span>
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>When you ask for the <code translate="no" class="notranslate">MessageGenerator</code> service, the container constructs a new
<code translate="no" class="notranslate">MessageGenerator</code> object and returns it (see sidebar below). But if you never ask
for the service, it's <em>never</em> constructed: saving memory and speed. As a bonus, the
<code translate="no" class="notranslate">MessageGenerator</code> service is only created <em>once</em>: the same instance is returned
each time you ask for it.</p>
<span id="service-container-services-load-example"></span>
<div class="admonition-wrapper"><div class="admonition admonition-sidebar"><p class="sidebar-title"><span>Automatic Service Loading in services.yaml</span></p><p>The documentation assumes you're using the following service configuration,
which is the default config for a new project:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-2e265b010888696d850ef324c0632cc1a41fe509" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-f67e9594e775093d8065b51bd7591cee972169ca" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-e4dde2fa0ead071419103c1a4334afdb6a7cbc2f" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-2e265b010888696d850ef324c0632cc1a41fe509" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># default configuration for services in *this* file</span>
    <span class="hljs-attr">_defaults:</span>
        <span class="hljs-attr">autowire:</span> <span class="hljs-literal">true</span>      <span class="hljs-comment"># Automatically injects dependencies in your services.</span>
        <span class="hljs-attr">autoconfigure:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Automatically registers your services as commands, event subscribers, etc.</span>

    <span class="hljs-comment"># makes classes in src/ available to be used as services</span>
    <span class="hljs-comment"># this creates a service per class whose id is the fully-qualified class name</span>
    <span class="hljs-string">App\:</span>
        <span class="hljs-attr">resource:</span> <span class="hljs-string">'../src/'</span>
        <span class="hljs-attr">exclude:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'../src/DependencyInjection/'</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'../src/Entity/'</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'../src/Kernel.php'</span>

    <span class="hljs-comment"># order is important in this file because service definitions</span>
    <span class="hljs-comment"># always *replace* previous ones; add your own service configuration below</span>

    <span class="hljs-comment"># ...</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-f67e9594e775093d8065b51bd7591cee972169ca" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Default configuration for services in *this* file --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">defaults</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">autoconfigure</span>=<span class="hljs-string">"true"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- makes classes in src/ available to be used as services --&gt;</span>
        <span class="hljs-comment">&lt;!-- this creates a service per class whose id is the fully-qualified class name --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">prototype</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"App\"</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"../src/"</span> <span class="hljs-attr">exclude</span>=<span class="hljs-string">"../src/{DependencyInjection,Entity,Kernel.php}"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- order is important in this file because service definitions
             always *replace* previous ones; add your own service configuration below --&gt;</span>

        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-e4dde2fa0ead071419103c1a4334afdb6a7cbc2f" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-comment">// default configuration for services in *this* file</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span><span class="hljs-operator">-&gt;</span>services()
        <span class="hljs-operator">-&gt;</span>defaults()
            <span class="hljs-operator">-&gt;</span>autowire()      <span class="hljs-comment">// Automatically injects dependencies in your services.</span>
            <span class="hljs-operator">-&gt;</span>autoconfigure() <span class="hljs-comment">// Automatically registers your services as commands, event subscribers, etc.</span>
    ;

    <span class="hljs-comment">// makes classes in src/ available to be used as services</span>
    <span class="hljs-comment">// this creates a service per class whose id is the fully-qualified class name</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>load(<span class="hljs-string">'App\\'</span>, <span class="hljs-string">'../src/'</span>)
        <span class="hljs-operator">-&gt;</span>exclude(<span class="hljs-string">'../src/{DependencyInjection,Entity,Kernel.php}'</span>);

    <span class="hljs-comment">// order is important in this file because service definitions</span>
    <span class="hljs-comment">// always *replace* previous ones; add your own service configuration below</span>
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>The value of the <code translate="no" class="notranslate">resource</code> and <code translate="no" class="notranslate">exclude</code> options can be any valid
<a href="https://en.wikipedia.org/wiki/Glob_(programming)" class="reference external" rel="external noopener noreferrer" target="_blank">glob pattern</a>. The value of the <code translate="no" class="notranslate">exclude</code> option can also be an
array of glob patterns.</p>
</div>
<p>Thanks to this configuration, you can automatically use any classes from the
<code translate="no" class="notranslate">src/</code> directory as a service, without needing to manually configure
it. Later, you'll learn more about this in <a href="service_container.html#service-psr4-loader" class="reference internal">Service Container</a>.</p>
<p>If you'd prefer to manually wire your service, that's totally possible: see
<a href="service_container.html#services-explicitly-configure-wire-services" class="reference internal">Service Container</a>.</p>
</div></div>
<span id="service-container_limiting-to-env"></span>
<div class="section">
<h3 id="limiting-services-to-a-specific-symfony-environment">
    Limiting Services to a specific Symfony Environment
    <a class="headerlink" href="#limiting-services-to-a-specific-symfony-environment" title="Permalink to this headline">¶</a>
</h3>
<p>If you are using PHP 8.0 or later, you can use the <code translate="no" class="notranslate">#[When]</code> PHP
attribute to only register the class as a service in some environments:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Attribute</span>\<span class="hljs-title">When</span>;

<span class="hljs-comment">// SomeClass is only registered in the "dev" environment</span>

<span class="hljs-comment">#[When(env: 'dev')]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SomeClass</span>
</span>{
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// you can also apply more than one When attribute to the same class</span>

<span class="hljs-comment">#[When(env: 'dev')]</span>
<span class="hljs-comment">#[When(env: 'test')]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnotherClass</span>
</span>{
    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="services-constructor-injection"></span>
</div>
</div>
<div class="section">
<h2 id="injecting-services-config-into-a-service">
    Injecting Services/Config into a Service
    <a class="headerlink" href="#injecting-services-config-into-a-service" title="Permalink to this headline">¶</a>
</h2>
<p>What if you need to access the <code translate="no" class="notranslate">logger</code> service from within <code translate="no" class="notranslate">MessageGenerator</code>?
No problem! Create a <code translate="no" class="notranslate">__construct()</code> method with a <code translate="no" class="notranslate">$logger</code> argument that has
the <code translate="no" class="notranslate">LoggerInterface</code> type-hint. Set this on a new <code translate="no" class="notranslate">$logger</code> property
and use it later:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Service/MessageGenerator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Psr</span>\<span class="hljs-title">Log</span>\<span class="hljs-title">LoggerInterface</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private LoggerInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span>,
    )</span> </span>{
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHappyMessage</span><span class="hljs-params">()</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>logger<span class="hljs-operator">-&gt;</span>info(<span class="hljs-string">'About to find a happy message!'</span>);
        <span class="hljs-comment">// ...</span>
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>That's it! The container will <em>automatically</em> know to pass the <code translate="no" class="notranslate">logger</code> service
when instantiating the <code translate="no" class="notranslate">MessageGenerator</code>. How does it know to do this?
<a href="service_container.html#services-autowire" class="reference internal">Autowiring</a>. The key is the <code translate="no" class="notranslate">LoggerInterface</code>
type-hint in your <code translate="no" class="notranslate">__construct()</code> method and the <code translate="no" class="notranslate">autowire: true</code> config in
<code translate="no" class="notranslate">services.yaml</code>. When you type-hint an argument, the container will automatically
find the matching service. If it can't, you'll see a clear exception with a helpful
suggestion.</p>
<p>By the way, this method of adding dependencies to your <code translate="no" class="notranslate">__construct()</code> method is
called <em>dependency injection</em>.</p>
<span id="services-debug-container-types"></span>
<p>How should you know to use <code translate="no" class="notranslate">LoggerInterface</code> for the type-hint? You can either
read the docs for whatever feature you're using, or get a list of autowireable
type-hints by running:</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>php bin/console debug:autowiring

  <span class="hljs-comment"># this is just a *small* sample of the output...</span>

  Describes a logger instance.
  Psr\Log\LoggerInterface (monolog.logger)

  Request stack that controls the lifecycle of requests.
  Symfony\Component\HttpFoundation\RequestStack (request_stack)

  RouterInterface is the interface that all Router classes must implement.
  Symfony\Component\Routing\RouterInterface (router.default)

  [...]</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h3 id="handling-multiple-services">
    Handling Multiple Services
    <a class="headerlink" href="#handling-multiple-services" title="Permalink to this headline">¶</a>
</h3>
<p>Suppose you also want to email a site administrator each time a site update is
made. To do that, you create a new class:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Service/SiteUpdateManager.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">MessageGenerator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Mailer</span>\<span class="hljs-title">MailerInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Mime</span>\<span class="hljs-title">Email</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SiteUpdateManager</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private MessageGenerator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>messageGenerator</span>,
        private MailerInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>mailer</span>,
    )</span> </span>{
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notifyOfSiteUpdate</span><span class="hljs-params">()</span>: <span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>happyMessage</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>messageGenerator<span class="hljs-operator">-&gt;</span>getHappyMessage();

        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>email</span> = (<span class="hljs-keyword">new</span> Email())
            <span class="hljs-operator">-&gt;</span>from(<span class="hljs-string">'admin@example.com'</span>)
            <span class="hljs-operator">-&gt;</span>to(<span class="hljs-string">'manager@example.com'</span>)
            <span class="hljs-operator">-&gt;</span>subject(<span class="hljs-string">'Site update just happened!'</span>)
            <span class="hljs-operator">-&gt;</span>text(<span class="hljs-string">'Someone just updated the site. We told them: '</span>.<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>happyMessage</span>);

        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>mailer<span class="hljs-operator">-&gt;</span>send(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>email</span>);

        <span class="hljs-comment">// ...</span>

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>This needs the <code translate="no" class="notranslate">MessageGenerator</code> <em>and</em> the <code translate="no" class="notranslate">Mailer</code> service. That's no
problem, we ask them by type hinting their class and interface names!
Now, this new service is ready to be used. In a controller, for example,
you can type-hint the new <code translate="no" class="notranslate">SiteUpdateManager</code> class and use it:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Controller/SiteController.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">SiteUpdateManager</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SiteController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractController</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">new</span><span class="hljs-params">(SiteUpdateManager <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>siteUpdateManager</span>)</span>: <span class="hljs-title">Response</span>
    </span>{
        <span class="hljs-comment">// ...</span>

        <span class="hljs-keyword">if</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>siteUpdateManager</span><span class="hljs-operator">-&gt;</span>notifyOfSiteUpdate()) {
            <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>addFlash(<span class="hljs-string">'success'</span>, <span class="hljs-string">'Notification mail was sent successfully.'</span>);
        }

        <span class="hljs-comment">// ...</span>
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Thanks to autowiring and your type-hints in <code translate="no" class="notranslate">__construct()</code>, the container creates
the <code translate="no" class="notranslate">SiteUpdateManager</code> object and passes it the correct argument. In most cases,
this works perfectly.</p>
<span id="services-manually-wire-args"></span>
</div>
<div class="section">
<h3 id="manually-wiring-arguments">
    Manually Wiring Arguments
    <a class="headerlink" href="#manually-wiring-arguments" title="Permalink to this headline">¶</a>
</h3>
<p>But there are a few cases when an argument to a service cannot be autowired. For
example, suppose you want to make the admin email configurable:</p>
<div translate="no" class="highlight-diff notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs diff">// src/Service/SiteUpdateManager.php
  // ...

  class SiteUpdateManager
  {
      // ...
<span class="hljs-addition">+    private $adminEmail;</span>

      public function __construct(
          private MessageGenerator $messageGenerator,
          private MailerInterface $mailer,
<span class="hljs-addition">+        private string $adminEmail,)</span>
      ) {
      }

      public function notifyOfSiteUpdate(): bool
      {
          // ...

          $email = (new Email())
              // ...
<span class="hljs-deletion">-            -&gt;to('manager@example.com')</span>
<span class="hljs-addition">+            -&gt;to($this-&gt;adminEmail)</span>
              // ...
          ;
          // ...
      }
  }</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>If you make this change and refresh, you'll see an error:</p>
<blockquote><p>Cannot autowire service &quot;App\Service\SiteUpdateManager&quot;: argument &quot;$adminEmail&quot;
of method &quot;__construct()&quot; must have a type-hint or be given a value explicitly.</p>
</blockquote>
<p>That makes sense! There is no way that the container knows what value you want to
pass here. No problem! In your configuration, you can explicitly set this argument:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-bcd05364e5df83d63b6fd8ab202dc73e1ffddc64" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-cf2c3dea3aed0c30502a5a1d1d57cf9ffe202211" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-2ca0c4d26e22844a1ad5052338c82706d0b05852" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-bcd05364e5df83d63b6fd8ab202dc73e1ffddc64" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># ... same as before</span>

    <span class="hljs-comment"># same as before</span>
    <span class="hljs-string">App\:</span>
        <span class="hljs-attr">resource:</span> <span class="hljs-string">'../src/'</span>
        <span class="hljs-attr">exclude:</span> <span class="hljs-string">'../src/{DependencyInjection,Entity,Kernel.php}'</span>

    <span class="hljs-comment"># explicitly configure the service</span>
    <span class="hljs-string">App\Service\SiteUpdateManager:</span>
        <span class="hljs-attr">arguments:</span>
            <span class="hljs-string">$adminEmail:</span> <span class="hljs-string">'manager@example.com'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-cf2c3dea3aed0c30502a5a1d1d57cf9ffe202211" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ...  same as before --&gt;</span>

        <span class="hljs-comment">&lt;!-- Same as before --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">prototype</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"App\"</span>
            <span class="hljs-attr">resource</span>=<span class="hljs-string">"../src/"</span>
            <span class="hljs-attr">exclude</span>=<span class="hljs-string">"../src/{DependencyInjection,Entity,Kernel.php}"</span>
        /&gt;</span>

        <span class="hljs-comment">&lt;!-- Explicitly configure the service --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\SiteUpdateManager"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"$adminEmail"</span>&gt;</span>manager@example.com<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-2ca0c4d26e22844a1ad5052338c82706d0b05852" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">SiteUpdateManager</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// same as before</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>load(<span class="hljs-string">'App\\'</span>, <span class="hljs-string">'../src/'</span>)
        <span class="hljs-operator">-&gt;</span>exclude(<span class="hljs-string">'../src/{DependencyInjection,Entity,Kernel.php}'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(SiteUpdateManager<span class="hljs-operator">::</span>class)
        <span class="hljs-operator">-&gt;</span>arg(<span class="hljs-string">'$adminEmail'</span>, <span class="hljs-string">'manager@example.com'</span>)
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>Thanks to this, the container will pass <code translate="no" class="notranslate">manager@example.com</code> to the <code translate="no" class="notranslate">$adminEmail</code>
argument of <code translate="no" class="notranslate">__construct</code> when creating the <code translate="no" class="notranslate">SiteUpdateManager</code> service. The
other arguments will still be autowired.</p>
<p>But, isn't this fragile? Fortunately, no! If you rename the <code translate="no" class="notranslate">$adminEmail</code> argument
to something else - e.g. <code translate="no" class="notranslate">$mainEmail</code> - you will get a clear exception when you
reload the next page (even if that page doesn't use this service).</p>
<span id="service-container-parameters"></span>
</div>
</div>
<div class="section">
<h2 id="service-parameters">
    Service Parameters
    <a class="headerlink" href="#service-parameters" title="Permalink to this headline">¶</a>
</h2>
<p>In addition to holding service objects, the container also holds configuration,
called <strong>parameters</strong>. The main article about Symfony configuration explains the
<a href="configuration.html#configuration-parameters" class="reference internal">configuration parameters</a> in detail and shows
all their types (string, boolean, array, binary and PHP constant parameters).</p>
<p>However, there is another type of parameter related to services. In YAML config,
any string which starts with <code translate="no" class="notranslate">@</code> is considered as the ID of a service, instead
of a regular string. In XML config, use the <code translate="no" class="notranslate">type=&quot;service&quot;</code> type for the
parameter and in PHP config use the <code translate="no" class="notranslate">service()</code> function:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-f5487810b89db0f0b78202fe9c1e5fc37bf5091a" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-93153dcd8cb140c7063fa4cc459b17096a84840b" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-39e7a7eae2332a31f4c1c31fac1a415cf4a58f36" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-f5487810b89db0f0b78202fe9c1e5fc37bf5091a" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-string">App\Service\MessageGenerator:</span>
        <span class="hljs-attr">arguments:</span>
            <span class="hljs-comment"># this is not a string, but a reference to a service called 'logger'</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'@logger'</span>

            <span class="hljs-comment"># if the value of a string argument starts with '@', you need to escape</span>
            <span class="hljs-comment"># it by adding another '@' so Symfony doesn't consider it a service</span>
            <span class="hljs-comment"># the following example would be parsed as the string '@securepassword'</span>
            <span class="hljs-comment"># - '@@securepassword'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-93153dcd8cb140c7063fa4cc459b17096a84840b" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\MessageGenerator"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"logger"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-39e7a7eae2332a31f4c1c31fac1a415cf4a58f36" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">MessageGenerator</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span><span class="hljs-operator">-&gt;</span>services();

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(MessageGenerator<span class="hljs-operator">::</span>class)
        <span class="hljs-operator">-&gt;</span>args([service(<span class="hljs-string">'logger'</span>)])
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>Working with container parameters is straightforward using the container's
accessor methods for parameters:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// checks if a parameter is defined (parameter names are case-sensitive)</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>container</span><span class="hljs-operator">-&gt;</span>hasParameter(<span class="hljs-string">'mailer.transport'</span>);

<span class="hljs-comment">// gets value of a parameter</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>container</span><span class="hljs-operator">-&gt;</span>getParameter(<span class="hljs-string">'mailer.transport'</span>);

<span class="hljs-comment">// adds a new parameter</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>container</span><span class="hljs-operator">-&gt;</span>setParameter(<span class="hljs-string">'mailer.transport'</span>, <span class="hljs-string">'sendmail'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>The used <code translate="no" class="notranslate">.</code> notation is a
<a href="contributing/code/standards.html#service-naming-conventions" class="reference internal">Symfony convention</a> to make parameters
easier to read. Parameters are flat key-value elements, they can't
be organized into a nested array</p>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>You can only set a parameter before the container is compiled, not at run-time.
To learn more about compiling the container see
<a href="components/dependency_injection/compilation.html" class="reference internal">Compiling the Container</a>.</p>
</div>
<span id="services-wire-specific-service"></span>
</div>
<div class="section">
<h2 id="choose-a-specific-service">
    Choose a Specific Service
    <a class="headerlink" href="#choose-a-specific-service" title="Permalink to this headline">¶</a>
</h2>
<p>The <code translate="no" class="notranslate">MessageGenerator</code> service created earlier requires a <code translate="no" class="notranslate">LoggerInterface</code> argument:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Service/MessageGenerator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Psr</span>\<span class="hljs-title">Log</span>\<span class="hljs-title">LoggerInterface</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private LoggerInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span>,
    )</span> </span>{
    }
    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>However, there are <em>multiple</em> services in the container that implement <code translate="no" class="notranslate">LoggerInterface</code>,
such as <code translate="no" class="notranslate">logger</code>, <code translate="no" class="notranslate">monolog.logger.request</code>, <code translate="no" class="notranslate">monolog.logger.php</code>, etc. How
does the container know which one to use?</p>
<p>In these situations, the container is usually configured to automatically choose
one of the services - <code translate="no" class="notranslate">logger</code> in this case (read more about why in <a href="service_container/autowiring.html#service-autowiring-alias" class="reference internal">Defining Services Dependencies Automatically (Autowiring)</a>).
But, you can control this and pass in a different logger:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-f8a5ddff3ab23ecc7dc6257f4c98bace62b3e6b4" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-e13e7092ee58b837aeda8e09dc7c584ef2133239" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-502c546782ba94393f5a5a7751f672e903122e2f" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-f8a5ddff3ab23ecc7dc6257f4c98bace62b3e6b4" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># ... same code as before</span>

    <span class="hljs-comment"># explicitly configure the service</span>
    <span class="hljs-string">App\Service\MessageGenerator:</span>
        <span class="hljs-attr">arguments:</span>
            <span class="hljs-comment"># the '@' symbol is important: that's what tells the container</span>
            <span class="hljs-comment"># you want to pass the *service* whose id is 'monolog.logger.request',</span>
            <span class="hljs-comment"># and not just the *string* 'monolog.logger.request'</span>
            <span class="hljs-string">$logger:</span> <span class="hljs-string">'@monolog.logger.request'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-e13e7092ee58b837aeda8e09dc7c584ef2133239" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... same code as before --&gt;</span>

        <span class="hljs-comment">&lt;!-- Explicitly configure the service --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\MessageGenerator"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"$logger"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"monolog.logger.request"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-502c546782ba94393f5a5a7751f672e903122e2f" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">MessageGenerator</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-comment">// ... same code as before</span>

    <span class="hljs-comment">// explicitly configure the service</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(MessageGenerator<span class="hljs-operator">::</span>class)
        <span class="hljs-operator">-&gt;</span>arg(<span class="hljs-string">'$logger'</span>, service(<span class="hljs-string">'monolog.logger.request'</span>))
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>This tells the container that the <code translate="no" class="notranslate">$logger</code> argument to <code translate="no" class="notranslate">__construct</code> should use
service whose id is <code translate="no" class="notranslate">monolog.logger.request</code>.</p>
<span id="container-debug-container"></span>
<p>For a full list of <em>all</em> possible services in the container, run:</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>php bin/console debug:container</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="container_closure-as-argument"></span>
</div>
<div class="section">
<h2 id="injecting-a-closure-as-an-argument">
    Injecting a Closure as an Argument
    <a class="headerlink" href="#injecting-a-closure-as-an-argument" title="Permalink to this headline">¶</a>
</h2>
<p>It is possible to inject a callable as an argument of a service.
Let's add an argument to our <code translate="no" class="notranslate">MessageGenerator</code> constructor:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Service/MessageGenerator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Psr</span>\<span class="hljs-title">Log</span>\<span class="hljs-title">LoggerInterface</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageGenerator</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>messageHash</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private LoggerInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span>,
        callable <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>generateMessageHash</span>,
    )</span> </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>messageHash = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>generateMessageHash</span>();
    }
    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Now, we would add a new invokable service to generate the message hash:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Hash/MessageHashGenerator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Hash</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageHashGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">()</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-comment">// Compute and return a message hash</span>
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Our configuration looks like this:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-82ab826b3c0bd3aff6ae0a95c277b69bdcc6f7ac" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-76b36189201136dc67c7b9dc1708a2fbd9caf027" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-ee98939c861dafb42bbeafe284cd095ba688b82d" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-82ab826b3c0bd3aff6ae0a95c277b69bdcc6f7ac" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># ... same code as before</span>

    <span class="hljs-comment"># explicitly configure the service</span>
    <span class="hljs-string">App\Service\MessageGenerator:</span>
        <span class="hljs-attr">arguments:</span>
            <span class="hljs-string">$logger:</span> <span class="hljs-string">'@monolog.logger.request'</span>
            <span class="hljs-string">$generateMessageHash:</span> <span class="hljs-type">!closure</span> <span class="hljs-string">'@App\Hash\MessageHashGenerator'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-76b36189201136dc67c7b9dc1708a2fbd9caf027" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... same code as before --&gt;</span>

        <span class="hljs-comment">&lt;!-- Explicitly configure the service --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\MessageGenerator"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"$logger"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"monolog.logger.request"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"$generateMessageHash"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"closure"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Hash\MessageHashGenerator"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-ee98939c861dafb42bbeafe284cd095ba688b82d" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">MessageGenerator</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-comment">// ... same code as before</span>

    <span class="hljs-comment">// explicitly configure the service</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(MessageGenerator<span class="hljs-operator">::</span>class)
        <span class="hljs-operator">-&gt;</span>arg(<span class="hljs-string">'$logger'</span>, service(<span class="hljs-string">'monolog.logger.request'</span>))
        <span class="hljs-operator">-&gt;</span>arg(<span class="hljs-string">'$generateMessageHash'</span>, closure(<span class="hljs-string">'App\Hash\MessageHashGenerator'</span>))
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.1</span>
    </p><p>The <code translate="no" class="notranslate">closure</code> argument type was introduced in Symfony 6.1.</p>
</div>
<p>It is also possible to convert a callable into an injected closure
thanks to the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DependencyInjection/Attribute/AutowireCallable.php" class="reference external" title="Symfony\Component\DependencyInjection\Attribute\AutowireCallable" rel="external noopener noreferrer" target="_blank">AutowireCallable</a>
attribute. Let's say our <code translate="no" class="notranslate">MessageHashGenerator</code> class now has a <code translate="no" class="notranslate">generate()</code>
method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Hash/MessageHashGenerator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Hash</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageHashGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate</span><span class="hljs-params">()</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-comment">// Compute and return a message hash</span>
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>We can inject the <code translate="no" class="notranslate">generate()</code> method of the <code translate="no" class="notranslate">MessageHashGenerator</code>
like this:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Service/MessageGenerator.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Hash</span>\<span class="hljs-title">MessageHashGenerator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Psr</span>\<span class="hljs-title">Log</span>\<span class="hljs-title">LoggerInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Attribute</span>\<span class="hljs-title">AutowireCallable</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private LoggerInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span>,
        #[AutowireCallable<span class="hljs-params">(service: MessageHashGenerator::class, method: <span class="hljs-string">'generate'</span>)</span>]
        private \Closure <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>generateMessageHash</span>
    )</span> </span>{
        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DependencyInjection/Attribute/AutowireCallable.php" class="reference external" title="Symfony\Component\DependencyInjection\Attribute\AutowireCallable" rel="external noopener noreferrer" target="_blank">AutowireCallable</a>
attribute was introduced in Symfony 6.3.</p>
</div>
<span id="services-binding"></span>
</div>
<div class="section">
<h2 id="binding-arguments-by-name-or-type">
    Binding Arguments by Name or Type
    <a class="headerlink" href="#binding-arguments-by-name-or-type" title="Permalink to this headline">¶</a>
</h2>
<p>You can also use the <code translate="no" class="notranslate">bind</code> keyword to bind specific arguments by name or type:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-a2d59599290884ea72c23c5c664a337053baad4e" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-14581ea9f2226939ab9a9343a1f6dd947110dd13" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-789394eb9439f5c583fafc456b244a2658ed6a98" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-a2d59599290884ea72c23c5c664a337053baad4e" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-attr">_defaults:</span>
        <span class="hljs-attr">bind:</span>
            <span class="hljs-comment"># pass this value to any $adminEmail argument for any service</span>
            <span class="hljs-comment"># that's defined in this file (including controller arguments)</span>
            <span class="hljs-string">$adminEmail:</span> <span class="hljs-string">'manager@example.com'</span>

            <span class="hljs-comment"># pass this service to any $requestLogger argument for any</span>
            <span class="hljs-comment"># service that's defined in this file</span>
            <span class="hljs-string">$requestLogger:</span> <span class="hljs-string">'@monolog.logger.request'</span>

            <span class="hljs-comment"># pass this service for any LoggerInterface type-hint for any</span>
            <span class="hljs-comment"># service that's defined in this file</span>
            <span class="hljs-string">Psr\Log\LoggerInterface:</span> <span class="hljs-string">'@monolog.logger.request'</span>

            <span class="hljs-comment"># optionally you can define both the name and type of the argument to match</span>
            <span class="hljs-string">string</span> <span class="hljs-string">$adminEmail:</span> <span class="hljs-string">'manager@example.com'</span>
            <span class="hljs-string">Psr\Log\LoggerInterface</span> <span class="hljs-string">$requestLogger:</span> <span class="hljs-string">'@monolog.logger.request'</span>
            <span class="hljs-string">iterable</span> <span class="hljs-string">$rules:</span> <span class="hljs-type">!tagged_iterator</span> <span class="hljs-string">app.foo.rule</span>

    <span class="hljs-comment"># ...</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-14581ea9f2226939ab9a9343a1f6dd947110dd13" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">defaults</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">autoconfigure</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">public</span>=<span class="hljs-string">"false"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"$adminEmail"</span>&gt;</span>manager@example.com<span class="hljs-tag">&lt;/<span class="hljs-name">bind</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"$requestLogger"</span>
                <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span>
                <span class="hljs-attr">id</span>=<span class="hljs-string">"monolog.logger.request"</span>
            /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"Psr\Log\LoggerInterface"</span>
                <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span>
                <span class="hljs-attr">id</span>=<span class="hljs-string">"monolog.logger.request"</span>
            /&gt;</span>

            <span class="hljs-comment">&lt;!-- optionally you can define both the name and type of the argument to match --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"string $adminEmail"</span>&gt;</span>manager@example.com<span class="hljs-tag">&lt;/<span class="hljs-name">bind</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"Psr\Log\LoggerInterface $requestLogger"</span>
                <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span>
                <span class="hljs-attr">id</span>=<span class="hljs-string">"monolog.logger.request"</span>
            /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"iterable $rules"</span>
                <span class="hljs-attr">type</span>=<span class="hljs-string">"tagged_iterator"</span>
                <span class="hljs-attr">tag</span>=<span class="hljs-string">"app.foo.rule"</span>
            /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">defaults</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ... --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-789394eb9439f5c583fafc456b244a2658ed6a98" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Controller</span>\<span class="hljs-title">LuckyController</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Psr</span>\<span class="hljs-title">Log</span>\<span class="hljs-title">LoggerInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Definition</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Reference</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span><span class="hljs-operator">-&gt;</span>services()
        <span class="hljs-operator">-&gt;</span>defaults()
            <span class="hljs-comment">// pass this value to any $adminEmail argument for any service</span>
            <span class="hljs-comment">// that's defined in this file (including controller arguments)</span>
            <span class="hljs-operator">-&gt;</span>bind(<span class="hljs-string">'$adminEmail'</span>, <span class="hljs-string">'manager@example.com'</span>)

            <span class="hljs-comment">// pass this service to any $requestLogger argument for any</span>
            <span class="hljs-comment">// service that's defined in this file</span>
            <span class="hljs-operator">-&gt;</span>bind(<span class="hljs-string">'$requestLogger'</span>, service(<span class="hljs-string">'monolog.logger.request'</span>))

            <span class="hljs-comment">// pass this service for any LoggerInterface type-hint for any</span>
            <span class="hljs-comment">// service that's defined in this file</span>
            <span class="hljs-operator">-&gt;</span>bind(LoggerInterface<span class="hljs-operator">::</span>class, service(<span class="hljs-string">'monolog.logger.request'</span>))

            <span class="hljs-comment">// optionally you can define both the name and type of the argument to match</span>
            <span class="hljs-operator">-&gt;</span>bind(<span class="hljs-string">'string $adminEmail'</span>, <span class="hljs-string">'manager@example.com'</span>)
            <span class="hljs-operator">-&gt;</span>bind(LoggerInterface<span class="hljs-operator">::</span>class.<span class="hljs-string">' $requestLogger'</span>, service(<span class="hljs-string">'monolog.logger.request'</span>))
            <span class="hljs-operator">-&gt;</span>bind(<span class="hljs-string">'iterable $rules'</span>, tagged_iterator(<span class="hljs-string">'app.foo.rule'</span>))
    ;

    <span class="hljs-comment">// ...</span>
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>By putting the <code translate="no" class="notranslate">bind</code> key under <code translate="no" class="notranslate">_defaults</code>, you can specify the value of <em>any</em>
argument for <em>any</em> service defined in this file! You can bind arguments by name
(e.g. <code translate="no" class="notranslate">$adminEmail</code>), by type (e.g. <code translate="no" class="notranslate">Psr\Log\LoggerInterface</code>) or both
(e.g. <code translate="no" class="notranslate">Psr\Log\LoggerInterface $requestLogger</code>).</p>
<p>The <code translate="no" class="notranslate">bind</code> config can also be applied to specific services or when loading many
services at once (i.e. <a href="service_container.html#service-psr4-loader" class="reference internal">Service Container</a>).</p>
<span id="services-autowire"></span>
</div>
<div class="section">
<h2 id="the-autowire-option">
    The autowire Option
    <a class="headerlink" href="#the-autowire-option" title="Permalink to this headline">¶</a>
</h2>
<p>Above, the <code translate="no" class="notranslate">services.yaml</code> file has <code translate="no" class="notranslate">autowire: true</code> in the <code translate="no" class="notranslate">_defaults</code> section
so that it applies to all services defined in that file. With this setting, you're
able to type-hint arguments in the <code translate="no" class="notranslate">__construct()</code> method of your services and
the container will automatically pass you the correct arguments. This entire entry
has been written around autowiring.</p>
<p>For more details about autowiring, check out <a href="service_container/autowiring.html" class="reference internal">Defining Services Dependencies Automatically (Autowiring)</a>.</p>
<span id="services-autoconfigure"></span>
</div>
<div class="section">
<h2 id="the-autoconfigure-option">
    The autoconfigure Option
    <a class="headerlink" href="#the-autoconfigure-option" title="Permalink to this headline">¶</a>
</h2>
<p>Above, the <code translate="no" class="notranslate">services.yaml</code> file has <code translate="no" class="notranslate">autoconfigure: true</code> in the <code translate="no" class="notranslate">_defaults</code>
section so that it applies to all services defined in that file. With this setting,
the container will automatically apply certain configuration to your services, based
on your service's <em>class</em>. This is mostly used to <em>auto-tag</em> your services.</p>
<p>For example, to create a Twig extension, you need to create a class, register it
as a service, and <a href="service_container/tags.html" class="reference internal">tag</a> it with <code translate="no" class="notranslate">twig.extension</code>.</p>
<p>But, with <code translate="no" class="notranslate">autoconfigure: true</code>, you don't need the tag. In fact, if you're using
the <a href="service_container.html#service-container-services-load-example" class="reference internal">default services.yaml config</a>,
you don't need to do <em>anything</em>: the service will be automatically loaded. Then,
<code translate="no" class="notranslate">autoconfigure</code> will add the <code translate="no" class="notranslate">twig.extension</code> tag <em>for</em> you, because your class
implements <code translate="no" class="notranslate">Twig\Extension\ExtensionInterface</code>. And thanks to <code translate="no" class="notranslate">autowire</code>, you can even add
constructor arguments without any configuration.</p>
</div>
<div class="section">
<h2 id="linting-service-definitions">
    Linting Service Definitions
    <a class="headerlink" href="#linting-service-definitions" title="Permalink to this headline">¶</a>
</h2>
<p>The <code translate="no" class="notranslate">lint:container</code> command checks that the arguments injected into services
match their type declarations. It's useful to run it before deploying your
application to production (e.g. in your continuous integration server):</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>php bin/console lint:container</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Checking the types of all service arguments whenever the container is compiled
can hurt performance. That's why this type checking is implemented in a
<a href="service_container/compiler_passes.html" class="reference internal">compiler pass</a> called
<code translate="no" class="notranslate">CheckTypeDeclarationsPass</code> which is disabled by default and enabled only when
executing the <code translate="no" class="notranslate">lint:container</code> command. If you don't mind the performance
loss, enable the compiler pass in your application.</p>
<span id="container-public"></span>
</div>
<div class="section">
<h2 id="public-versus-private-services">
    Public Versus Private Services
    <a class="headerlink" href="#public-versus-private-services" title="Permalink to this headline">¶</a>
</h2>
<p>Every service defined is private by default. When a service is private, you
cannot access it directly from the container using <code translate="no" class="notranslate">$container-&gt;get()</code>. As a
best practice, you should only create <em>private</em> services and you should fetch
services using dependency injection instead of using <code translate="no" class="notranslate">$container-&gt;get()</code>.</p>
<p>If you need to fetch services lazily, instead of using public services you
should consider using a <a href="service_container/service_subscribers_locators.html#service-locators" class="reference internal">service locator</a>.</p>
<p>But, if you <em>do</em> need to make a service public, override the <code translate="no" class="notranslate">public</code>
setting:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-77b07004b9830dfed774de141577b30c160bc1fc" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-9f4395e301c29538d76a297c7e012da7f4d556ec" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-ea6b6f7e4a673932180e15dd2894bf73111a3977" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-77b07004b9830dfed774de141577b30c160bc1fc" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># ... same code as before</span>

    <span class="hljs-comment"># explicitly configure the service</span>
    <span class="hljs-string">App\Service\PublicService:</span>
        <span class="hljs-attr">public:</span> <span class="hljs-literal">true</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-9f4395e301c29538d76a297c7e012da7f4d556ec" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... same code as before --&gt;</span>

        <span class="hljs-comment">&lt;!-- Explicitly configure the service --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\PublicService"</span> <span class="hljs-attr">public</span>=<span class="hljs-string">"true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-ea6b6f7e4a673932180e15dd2894bf73111a3977" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">PublicService</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-comment">// ... same as code before</span>

    <span class="hljs-comment">// explicitly configure the service</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(Service\PublicService<span class="hljs-operator">::</span>class)
        <span class="hljs-operator">-&gt;</span><span class="hljs-keyword">public</span>()
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<span id="service-psr4-loader"></span>
</div>
<div class="section">
<h2 id="importing-many-services-at-once-with-resource">
    Importing Many Services at once with resource
    <a class="headerlink" href="#importing-many-services-at-once-with-resource" title="Permalink to this headline">¶</a>
</h2>
<p>You've already seen that you can import many services at once by using the <code translate="no" class="notranslate">resource</code>
key. For example, the default Symfony configuration contains this:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-11424a8e60face059f7c4b7468aee6a3bc491028" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-0d866f541c7ea61474adc86ce70e7e2c669bd6b5" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-d6a4cf22cabe4705d54e9c6087ffda077a15181a" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-11424a8e60face059f7c4b7468aee6a3bc491028" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># ... same as before</span>

    <span class="hljs-comment"># makes classes in src/ available to be used as services</span>
    <span class="hljs-comment"># this creates a service per class whose id is the fully-qualified class name</span>
    <span class="hljs-string">App\:</span>
        <span class="hljs-attr">resource:</span> <span class="hljs-string">'../src/'</span>
        <span class="hljs-attr">exclude:</span> <span class="hljs-string">'../src/{DependencyInjection,Entity,Kernel.php}'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-0d866f541c7ea61474adc86ce70e7e2c669bd6b5" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... same as before --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">prototype</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"App\"</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"../src/"</span> <span class="hljs-attr">exclude</span>=<span class="hljs-string">"../src/{DependencyInjection,Entity,Kernel.php}"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-d6a4cf22cabe4705d54e9c6087ffda077a15181a" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// makes classes in src/ available to be used as services</span>
    <span class="hljs-comment">// this creates a service per class whose id is the fully-qualified class name</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>load(<span class="hljs-string">'App\\'</span>, <span class="hljs-string">'../src/'</span>)
        <span class="hljs-operator">-&gt;</span>exclude(<span class="hljs-string">'../src/{DependencyInjection,Entity,Kernel.php}'</span>);
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>The value of the <code translate="no" class="notranslate">resource</code> and <code translate="no" class="notranslate">exclude</code> options can be any valid
<a href="https://en.wikipedia.org/wiki/Glob_(programming)" class="reference external" rel="external noopener noreferrer" target="_blank">glob pattern</a>. If you want to exclude only a few services, you
may use the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Dependency/Injection/Attribute/Exclude.php" class="reference external" title="Symfony\Component\Dependency\Injection\Attribute\Exclude" rel="external noopener noreferrer" target="_blank">Exclude</a>
attribute directly on your class to exclude it.</p>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Dependency/Injection/Attribute/Exclude.php" class="reference external" title="Symfony\Component\Dependency\Injection\Attribute\Exclude" rel="external noopener noreferrer" target="_blank">Exclude</a>
attribute was introduced in Symfony 6.3.</p>
</div>
</div>
<p>This can be used to quickly make many classes available as services and apply some
default configuration. The <code translate="no" class="notranslate">id</code> of each service is its fully-qualified class name.
You can override any service that's imported by using its id (class name) below
(e.g. see <a href="service_container.html#services-manually-wire-args" class="reference internal">Service Container</a>). If you override a service, none of
the options (e.g. <code translate="no" class="notranslate">public</code>) are inherited from the import (but the overridden
service <em>does</em> still inherit from <code translate="no" class="notranslate">_defaults</code>).</p>
<p>You can also <code translate="no" class="notranslate">exclude</code> certain paths. This is optional, but will slightly increase
performance in the <code translate="no" class="notranslate">dev</code> environment: excluded paths are not tracked and so modifying
them will not cause the container to be rebuilt.</p>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>Wait, does this mean that <em>every</em> class in <code translate="no" class="notranslate">src/</code> is registered as
a service? Even model classes? Actually, no. As long as you keep your imported services as <a href="service_container.html#container-public" class="reference internal">private</a>, all
classes in <code translate="no" class="notranslate">src/</code> that are <em>not</em> explicitly used as services are
automatically removed from the final container. In reality, the import
means that all classes are &quot;available to be <em>used</em> as services&quot; without needing
to be manually configured.</p>
</div>
<div class="section">
<h3 id="multiple-service-definitions-using-the-same-namespace">
    Multiple Service Definitions Using the Same Namespace
    <a class="headerlink" href="#multiple-service-definitions-using-the-same-namespace" title="Permalink to this headline">¶</a>
</h3>
<p>If you define services using the YAML config format, the PHP namespace is used
as the key of each configuration, so you can't define different service configs
for classes under the same namespace:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-491e2ec7620a6af1fdbb50694d3b303902c353f5" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-35f1b7cc69540d29bcc1c673559b9a8a1e29da4e" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-ac7e04d71bf17eabd3248cec991898b25f72fe82" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-491e2ec7620a6af1fdbb50694d3b303902c353f5" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-string">App\Domain\:</span>
        <span class="hljs-attr">resource:</span> <span class="hljs-string">'../src/Domain/*'</span>
        <span class="hljs-comment"># ...</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-35f1b7cc69540d29bcc1c673559b9a8a1e29da4e" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">prototype</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"App\Domain"</span>
            <span class="hljs-attr">resource</span>=<span class="hljs-string">"../src/App/Domain/*"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- ... --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-ac7e04d71bf17eabd3248cec991898b25f72fe82" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Definition</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaults</span> = <span class="hljs-keyword">new</span> Definition();

<span class="hljs-comment">// $this is a reference to the current loader</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>registerClasses(
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaults</span>,
    <span class="hljs-string">'App\\Domain\\'</span>,
    <span class="hljs-string">'../src/App/Domain/*'</span>
);

<span class="hljs-comment">// ...</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>In order to have multiple definitions, add the <code translate="no" class="notranslate">namespace</code> option and use any
unique string as the key of each service config:</p>
<div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-attr">command_handlers:</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">App\Domain\</span>
        <span class="hljs-attr">resource:</span> <span class="hljs-string">'../src/Domain/*/CommandHandler'</span>
        <span class="hljs-attr">tags:</span> <span class="hljs-string">[command_handler]</span>

    <span class="hljs-attr">event_subscribers:</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">App\Domain\</span>
        <span class="hljs-attr">resource:</span> <span class="hljs-string">'../src/Domain/*/EventSubscriber'</span>
        <span class="hljs-attr">tags:</span> <span class="hljs-string">[event_subscriber]</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="services-explicitly-configure-wire-services"></span>
</div>
</div>
<div class="section">
<h2 id="explicitly-configuring-services-and-arguments">
    Explicitly Configuring Services and Arguments
    <a class="headerlink" href="#explicitly-configuring-services-and-arguments" title="Permalink to this headline">¶</a>
</h2>
<p><a href="service_container.html#service-container-services-load-example" class="reference internal">Loading services automatically</a>
and <a href="service_container.html#services-autowire" class="reference internal">autowiring</a> are optional. And even if you use them, there may be some
cases where you want to manually wire a service. For example, suppose that you want
to register <em>2</em> services for the <code translate="no" class="notranslate">SiteUpdateManager</code> class - each with a different
admin email. In this case, each needs to have a unique service id:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-9a344b080ec51e5cd53b8fe68368f6c6835a52ed" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-5c3a8f6212e56ee1b0bfb6b55f341a99bae834a1" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-b8638c16216b25f770c916ae443e9ce422df9223" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-9a344b080ec51e5cd53b8fe68368f6c6835a52ed" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-comment"># this is the service's id</span>
    <span class="hljs-attr">site_update_manager.superadmin:</span>
        <span class="hljs-attr">class:</span> <span class="hljs-string">App\Service\SiteUpdateManager</span>
        <span class="hljs-comment"># you CAN still use autowiring: we just want to show what it looks like without</span>
        <span class="hljs-attr">autowire:</span> <span class="hljs-literal">false</span>
        <span class="hljs-comment"># manually wire all arguments</span>
        <span class="hljs-attr">arguments:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'@App\Service\MessageGenerator'</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'@mailer'</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'superadmin@example.com'</span>

    <span class="hljs-attr">site_update_manager.normal_users:</span>
        <span class="hljs-attr">class:</span> <span class="hljs-string">App\Service\SiteUpdateManager</span>
        <span class="hljs-attr">autowire:</span> <span class="hljs-literal">false</span>
        <span class="hljs-attr">arguments:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'@App\Service\MessageGenerator'</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'@mailer'</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">'contact@example.com'</span>

    <span class="hljs-comment"># Create an alias, so that - by default - if you type-hint SiteUpdateManager,</span>
    <span class="hljs-comment"># the site_update_manager.superadmin will be used</span>
    <span class="hljs-string">App\Service\SiteUpdateManager:</span> <span class="hljs-string">'@site_update_manager.superadmin'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-5c3a8f6212e56ee1b0bfb6b55f341a99bae834a1" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"site_update_manager.superadmin"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"App\Service\SiteUpdateManager"</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">"false"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\MessageGenerator"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mailer"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span>&gt;</span>superadmin@example.com<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"site_update_manager.normal_users"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"App\Service\SiteUpdateManager"</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">"false"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\MessageGenerator"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mailer"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span>&gt;</span>contact@example.com<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\Service\SiteUpdateManager"</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"site_update_manager.superadmin"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-b8638c16216b25f770c916ae443e9ce422df9223" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">MessageGenerator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Service</span>\<span class="hljs-title">SiteUpdateManager</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// site_update_manager.superadmin is the service's id</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'site_update_manager.superadmin'</span>, SiteUpdateManager<span class="hljs-operator">::</span>class)
        <span class="hljs-comment">// you CAN still use autowiring: we just want to show what it looks like without</span>
        <span class="hljs-operator">-&gt;</span>autowire(<span class="hljs-keyword">false</span>)
        <span class="hljs-comment">// manually wire all arguments</span>
        <span class="hljs-operator">-&gt;</span>args([
           service(MessageGenerator<span class="hljs-operator">::</span>class),
           service(<span class="hljs-string">'mailer'</span>),
           <span class="hljs-string">'superadmin@example.com'</span>,
        ]);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'site_update_manager.normal_users'</span>, SiteUpdateManager<span class="hljs-operator">::</span>class)
        <span class="hljs-operator">-&gt;</span>autowire(<span class="hljs-keyword">false</span>)
        <span class="hljs-operator">-&gt;</span>args([
            service(MessageGenerator<span class="hljs-operator">::</span>class),
            service(<span class="hljs-string">'mailer'</span>),
            <span class="hljs-string">'contact@example.com'</span>,
        ]);

    <span class="hljs-comment">// Create an alias, so that - by default - if you type-hint SiteUpdateManager,</span>
    <span class="hljs-comment">// the site_update_manager.superadmin will be used</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>alias(SiteUpdateManager<span class="hljs-operator">::</span>class, <span class="hljs-string">'site_update_manager.superadmin'</span>);
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>In this case, <em>two</em> services are registered: <code translate="no" class="notranslate">site_update_manager.superadmin</code>
and <code translate="no" class="notranslate">site_update_manager.normal_users</code>. Thanks to the alias, if you type-hint
<code translate="no" class="notranslate">SiteUpdateManager</code> the first (<code translate="no" class="notranslate">site_update_manager.superadmin</code>) will be passed.
If you want to pass the second, you'll need to <a href="service_container.html#services-wire-specific-service" class="reference internal">manually wire the service</a>.</p>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>If you do <em>not</em> create the alias and are <a href="service_container.html#service-container-services-load-example" class="reference internal">loading all services from src/</a>,
then <em>three</em> services have been created (the automatic service + your two services)
and the automatically loaded service will be passed - by default - when you type-hint
<code translate="no" class="notranslate">SiteUpdateManager</code>. That's why creating the alias is a good idea.</p>
</div>
<p>When using PHP closures to configure your services, it is possible to automatically
inject the current environment value by adding a string argument named <code translate="no" class="notranslate">$env</code> to
the closure:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/my_config.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>, string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>env</span>)</span> </span>{
    <span class="hljs-comment">// `$env` is automatically filled in, so you can configure your</span>
    <span class="hljs-comment">// services depending on which environment you're on</span>
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="learn-more">
    Learn more
    <a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a>
</h2>
<div class="toctree-wrapper toc-size-xl"><ul class="toctree toctree-level-1 toctree-length-21"><li><a href="service_container/alias_private.html">How to Create Service Aliases and Mark Services as Private</a></li><li><a href="service_container/autowiring.html">Defining Services Dependencies Automatically (Autowiring)</a></li><li><a href="service_container/calls.html">Service Method Calls and Setter Injection</a></li><li><a href="service_container/compiler_passes.html">How to Work with Compiler Passes</a></li><li><a href="service_container/configurators.html">How to Configure a Service with a Configurator</a></li><li><a href="service_container/debug.html">How to Debug the Service Container & List Services</a></li><li><a href="service_container/definitions.html">How to work with Service Definition Objects</a></li><li><a href="service_container/expression_language.html">How to Inject Values Based on Complex Expressions</a></li><li><a href="service_container/factories.html">Using a Factory to Create Services</a></li><li><a href="service_container/import.html">How to Import Configuration Files/Resources</a></li><li><a href="service_container/injection_types.html">Types of Injection</a></li><li><a href="service_container/lazy_services.html">Lazy Services</a></li><li><a href="service_container/optional_dependencies.html">How to Make Service Arguments/References Optional</a></li><li><a href="service_container/parent_services.html">How to Manage Common Dependencies with Parent Services</a></li><li><a href="service_container/request.html">How to Retrieve the Request from the Service Container</a></li><li><a href="service_container/service_closures.html">Service Closures</a></li><li><a href="service_container/service_decoration.html">How to Decorate Services</a></li><li><a href="service_container/service_subscribers_locators.html">Service Subscribers & Locators</a></li><li><a href="service_container/shared.html">How to Define Non Shared Services</a></li><li><a href="service_container/synthetic_services.html">How to Inject Instances into the Container</a></li><li><a href="service_container/tags.html">How to Work with Service Tags</a></li></ul></div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>