        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="the-domcrawler-component">
    The DomCrawler Component
    <a class="headerlink" href="#the-domcrawler-component" title="Permalink to this headline">¶</a>
</h1>
<blockquote><p>The DomCrawler component eases DOM navigation for HTML and XML documents.</p>
</blockquote>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>While possible, the DomCrawler component is not designed for manipulation
of the DOM or re-dumping HTML/XML.</p>
</div>
<div class="section">
<h2 id="installation">
    Installation
    <a class="headerlink" href="#installation" title="Permalink to this headline">¶</a>
</h2>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>composer require symfony/dom-crawler</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>If you install this component outside of a Symfony application, you must
require the <code translate="no" class="notranslate">vendor/autoload.php</code> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a href="using_components.html" class="reference internal">this article</a> for more details.</p>
</div>
</div>
<div class="section">
<h2 id="usage">
    Usage
    <a class="headerlink" href="#usage" title="Permalink to this headline">¶</a>
</h2>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>This article explains how to use the DomCrawler features as an independent
component in any PHP application. Read the <a href="../testing.html#functional-tests" class="reference internal">Symfony Functional Tests</a>
article to learn about how to use it when creating Symfony tests.</p>
</div>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php" class="reference external" title="Symfony\Component\DomCrawler\Crawler" rel="external noopener noreferrer" target="_blank">Crawler</a> class provides methods
to query and manipulate HTML and XML documents.</p>
<p>An instance of the Crawler represents a set of <a href="https://secure.php.net/manual/en/class.domelement.php" class="reference external" title="DOMElement" rel="external noopener noreferrer" target="_blank">DOMElement</a> objects,
which are nodes that can be traversed as follows:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DomCrawler</span>\<span class="hljs-title">Crawler</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span> = <span class="hljs-string">&lt;&lt;&lt;'HTML'
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;p class="message"&gt;Hello World!&lt;/p&gt;
        &lt;p&gt;Hello Crawler!&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
HTML;</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-keyword">new</span> Crawler(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span>);

<span class="hljs-keyword">foreach</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> <span class="hljs-keyword">as</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domElement</span>) {
    var_dump(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domElement</span><span class="hljs-operator">-&gt;</span>nodeName);
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Specialized <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Link.php" class="reference external" title="Symfony\Component\DomCrawler\Link" rel="external noopener noreferrer" target="_blank">Link</a>,
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Image.php" class="reference external" title="Symfony\Component\DomCrawler\Image" rel="external noopener noreferrer" target="_blank">Image</a> and
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Form.php" class="reference external" title="Symfony\Component\DomCrawler\Form" rel="external noopener noreferrer" target="_blank">Form</a> classes are useful for
interacting with html links, images and forms as you traverse through the HTML
tree.</p>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The DomCrawler will attempt to automatically fix your HTML to match the
official specification. For example, if you nest a <code translate="no" class="notranslate">&lt;p&gt;</code> tag inside
another <code translate="no" class="notranslate">&lt;p&gt;</code> tag, it will be moved to be a sibling of the parent tag.
This is expected and is part of the HTML5 spec. But if you're getting
unexpected behavior, this could be a cause. And while the DomCrawler
isn't meant to dump content, you can see the &quot;fixed&quot; version of your HTML
by <a href="dom_crawler.html#component-dom-crawler-dumping" class="reference internal">dumping it</a>.</p>
</div>
<div class="section">
<h3 id="node-filtering">
    Node Filtering
    <a class="headerlink" href="#node-filtering" title="Permalink to this headline">¶</a>
</h3>
<p>Using XPath expressions, you can select specific nodes within the document:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'descendant-or-self::body/p'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p><code translate="no" class="notranslate">DOMXPath::query</code> is used internally to actually perform an XPath query.</p>
</div>
<p>If you prefer CSS selectors over XPath, install <a href="css_selector.html" class="reference internal">The CssSelector Component</a>.
It allows you to use jQuery-like selectors:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>An anonymous function can be used to filter with more complex criteria:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DomCrawler</span>\<span class="hljs-title">Crawler</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span>
    <span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)
    <span class="hljs-operator">-&gt;</span>reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Crawler <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>node</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>i</span>)</span> </span>{
        <span class="hljs-comment">// filters every other node</span>
        <span class="hljs-keyword">return</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>i</span> % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>;
    });</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>To remove a node, the anonymous function must return <code translate="no" class="notranslate">false</code>.</p>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>All filter methods return a new <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php" class="reference external" title="Symfony\Component\DomCrawler\Crawler" rel="external noopener noreferrer" target="_blank">Crawler</a>
instance with the filtered content. To check if the filter actually
found something, use <code translate="no" class="notranslate">$crawler-&gt;count() &gt; 0</code> on this new crawler.</p>
</div>
<p>Both the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_filterXPath" class="reference external" title="Symfony\Component\DomCrawler\Crawler::filterXPath()" rel="external noopener noreferrer" target="_blank">filterXPath()</a> and
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_filter" class="reference external" title="Symfony\Component\DomCrawler\Crawler::filter()" rel="external noopener noreferrer" target="_blank">filter()</a> methods work with
XML namespaces, which can be either automatically discovered or registered
explicitly.</p>
<p>Consider the XML below:</p>
<div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">entry</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2005/Atom"</span>
    <span class="hljs-attr">xmlns:media</span>=<span class="hljs-string">"http://search.yahoo.com/mrss/"</span>
    <span class="hljs-attr">xmlns:yt</span>=<span class="hljs-string">"http://gdata.youtube.com/schemas/2007"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>tag:youtube.com,2008:video:kgZRZmEc9j4<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">yt:accessControl</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"comment"</span> <span class="hljs-attr">permission</span>=<span class="hljs-string">"allowed"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">yt:accessControl</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"videoRespond"</span> <span class="hljs-attr">permission</span>=<span class="hljs-string">"moderated"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">media:group</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">media:title</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"plain"</span>&gt;</span>Chordates - CrashCourse Biology #24<span class="hljs-tag">&lt;/<span class="hljs-name">media:title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">yt:aspectRatio</span>&gt;</span>widescreen<span class="hljs-tag">&lt;/<span class="hljs-name">yt:aspectRatio</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">media:group</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>This can be filtered with the  <code translate="no" class="notranslate">Crawler</code> without needing to register namespace
aliases both with <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_filterXPath" class="reference external" title="Symfony\Component\DomCrawler\Crawler::filterXPath()" rel="external noopener noreferrer" target="_blank">filterXPath()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//default:entry/media:group//yt:aspectRatio'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>and <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_filter" class="reference external" title="Symfony\Component\DomCrawler\Crawler::filter()" rel="external noopener noreferrer" target="_blank">filter()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'default|entry media|group yt|aspectRatio'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The default namespace is registered with a prefix &quot;default&quot;. It can be
changed with the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_setDefaultNamespacePrefix" class="reference external" title="Symfony\Component\DomCrawler\Crawler::setDefaultNamespacePrefix()" rel="external noopener noreferrer" target="_blank">setDefaultNamespacePrefix()</a>
method.</p>
<p>The default namespace is removed when loading the content if it's the only
namespace in the document. It's done to simplify the XPath queries.</p>
</div>
<p>Namespaces can be explicitly registered with the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_registerNamespace" class="reference external" title="Symfony\Component\DomCrawler\Crawler::registerNamespace()" rel="external noopener noreferrer" target="_blank">registerNamespace()</a> method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>registerNamespace(<span class="hljs-string">'m'</span>, <span class="hljs-string">'http://search.yahoo.com/mrss/'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//m:group//yt:aspectRatio'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Verify if the current node matches a selector:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>matches(<span class="hljs-string">'p.lorem'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="node-traversing">
    Node Traversing
    <a class="headerlink" href="#node-traversing" title="Permalink to this headline">¶</a>
</h3>
<p>Access node by its position on the list:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)<span class="hljs-operator">-&gt;</span>eq(<span class="hljs-number">0</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Get the first or last node of the current selection:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)<span class="hljs-operator">-&gt;</span>first();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)<span class="hljs-operator">-&gt;</span>last();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Get the nodes of the same level as the current selection:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)<span class="hljs-operator">-&gt;</span>siblings();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Get the same level nodes after or before the current selection:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)<span class="hljs-operator">-&gt;</span>nextAll();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)<span class="hljs-operator">-&gt;</span>previousAll();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Get all the child or ancestor nodes:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body'</span>)<span class="hljs-operator">-&gt;</span>children();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body &gt; p'</span>)<span class="hljs-operator">-&gt;</span>ancestors();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Get all the direct child nodes matching a CSS selector:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'body'</span>)<span class="hljs-operator">-&gt;</span>children(<span class="hljs-string">'p.lorem'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Get the first parent (heading toward the document root) of the element that matches the provided selector:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>closest(<span class="hljs-string">'p.lorem'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>All the traversal methods return a new <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php" class="reference external" title="Symfony\Component\DomCrawler\Crawler" rel="external noopener noreferrer" target="_blank">Crawler</a>
instance.</p>
</div>
</div>
<div class="section">
<h3 id="accessing-node-values">
    Accessing Node Values
    <a class="headerlink" href="#accessing-node-values" title="Permalink to this headline">¶</a>
</h3>
<p>Access the node name (HTML tag name) of the first node of the current selection (e.g. &quot;p&quot; or &quot;div&quot;):</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// returns the node name (HTML tag name) of the first child element under &lt;body&gt;</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>tag</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//body/*'</span>)<span class="hljs-operator">-&gt;</span>nodeName();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Access the value of the first node of the current selection:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// if the node does not exist, calling to text() will result in an exception</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>message</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//body/p'</span>)<span class="hljs-operator">-&gt;</span>text();

<span class="hljs-comment">// avoid the exception passing an argument that text() returns when node does not exist</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>message</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//body/p'</span>)<span class="hljs-operator">-&gt;</span>text(<span class="hljs-string">'Default text content'</span>);

<span class="hljs-comment">// by default, text() trims whitespace characters, including the internal ones</span>
<span class="hljs-comment">// (e.g. "  foo\n  bar    baz \n " is returned as "foo bar baz")</span>
<span class="hljs-comment">// pass FALSE as the second argument to return the original text unchanged</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//body/p'</span>)<span class="hljs-operator">-&gt;</span>text(<span class="hljs-string">'Default text content'</span>, <span class="hljs-keyword">false</span>);

<span class="hljs-comment">// innerText() is similar to text() but returns only text that is a direct</span>
<span class="hljs-comment">// descendant of the current node, excluding text from child nodes</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>text</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//body/p'</span>)<span class="hljs-operator">-&gt;</span>innerText();
<span class="hljs-comment">// if content is &lt;p&gt;Foo &lt;span&gt;Bar&lt;/span&gt;&lt;/p&gt; or &lt;p&gt;&lt;span&gt;Bar&lt;/span&gt; Foo&lt;/p&gt;</span>
<span class="hljs-comment">// innerText() returns 'Foo' in both cases; and text() returns 'Foo Bar' and 'Bar Foo' respectively</span>

<span class="hljs-comment">// if there are multiple text nodes, between other child nodes, like</span>
<span class="hljs-comment">// &lt;p&gt;Foo &lt;span&gt;Bar&lt;/span&gt; Baz&lt;/p&gt;</span>
<span class="hljs-comment">// innerText() returns only the first text node 'Foo'</span>

<span class="hljs-comment">// like text(), innerText() also trims whitespace characters by default,</span>
<span class="hljs-comment">// but you can get the unchanged text by passing FALSE as argument</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>text</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//body/p'</span>)<span class="hljs-operator">-&gt;</span>innerText(<span class="hljs-keyword">false</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The removal of whitespace characters by default in <code translate="no" class="notranslate">innerText()</code> was
introduced in Symfony 6.3.</p>
</div>
<p>Access the attribute value of the first node of the current selection:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>class</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//body/p'</span>)<span class="hljs-operator">-&gt;</span>attr(<span class="hljs-string">'class'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Extract attribute and/or node values from the list of nodes:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>attributes</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span>
    <span class="hljs-operator">-&gt;</span>filterXpath(<span class="hljs-string">'//body/p'</span>)
    <span class="hljs-operator">-&gt;</span>extract([<span class="hljs-string">'_name'</span>, <span class="hljs-string">'_text'</span>, <span class="hljs-string">'class'</span>])
;</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>Special attribute <code translate="no" class="notranslate">_text</code> represents a node value, while <code translate="no" class="notranslate">_name</code>
represents the element name (the HTML tag name).</p>
</div>
<p>Call an anonymous function on each node of the list:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DomCrawler</span>\<span class="hljs-title">Crawler</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>nodeValues</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'p'</span>)<span class="hljs-operator">-&gt;</span>each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Crawler <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>node</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>i</span>)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>node</span><span class="hljs-operator">-&gt;</span>text();
});</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The anonymous function receives the node (as a Crawler) and the position as arguments.
The result is an array of values returned by the anonymous function calls.</p>
<p>When using nested crawler, beware that <code translate="no" class="notranslate">filterXPath()</code> is evaluated in the
context of the crawler:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'parent'</span>)<span class="hljs-operator">-&gt;</span>each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Crawler <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>parentCrawler</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>i</span>)</span> </span>{
    <span class="hljs-comment">// DON'T DO THIS: direct child can not be found</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>subCrawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>parentCrawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'sub-tag/sub-child-tag'</span>);

    <span class="hljs-comment">// DO THIS: specify the parent tag too</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>subCrawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>parentCrawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'parent/sub-tag/sub-child-tag'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>subCrawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>parentCrawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'node()/sub-tag/sub-child-tag'</span>);
});</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="adding-the-content">
    Adding the Content
    <a class="headerlink" href="#adding-the-content" title="Permalink to this headline">¶</a>
</h3>
<p>The crawler supports multiple ways of adding the content, but they are mutually
exclusive, so you can only use one of them to add content (e.g. if you pass the
content to the <code translate="no" class="notranslate">Crawler</code> constructor, you can't call <code translate="no" class="notranslate">addContent()</code> later):</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-keyword">new</span> Crawler(<span class="hljs-string">'&lt;html&gt;&lt;body/&gt;&lt;/html&gt;'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addHtmlContent(<span class="hljs-string">'&lt;html&gt;&lt;body/&gt;&lt;/html&gt;'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addXmlContent(<span class="hljs-string">'&lt;root&gt;&lt;node/&gt;&lt;/root&gt;'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addContent(<span class="hljs-string">'&lt;html&gt;&lt;body/&gt;&lt;/html&gt;'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addContent(<span class="hljs-string">'&lt;root&gt;&lt;node/&gt;&lt;/root&gt;'</span>, <span class="hljs-string">'text/xml'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>add(<span class="hljs-string">'&lt;html&gt;&lt;body/&gt;&lt;/html&gt;'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>add(<span class="hljs-string">'&lt;root&gt;&lt;node/&gt;&lt;/root&gt;'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_addHtmlContent" class="reference external" title="Symfony\Component\DomCrawler\Crawler::addHtmlContent()" rel="external noopener noreferrer" target="_blank">addHtmlContent()</a> and
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_addXmlContent" class="reference external" title="Symfony\Component\DomCrawler\Crawler::addXmlContent()" rel="external noopener noreferrer" target="_blank">addXmlContent()</a> methods
default to UTF-8 encoding but you can change this behavior with their second
optional argument.</p>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_addContent" class="reference external" title="Symfony\Component\DomCrawler\Crawler::addContent()" rel="external noopener noreferrer" target="_blank">addContent()</a> method
guesses the best charset according to the given contents and defaults to
<code translate="no" class="notranslate">ISO-8859-1</code> in case no charset can be guessed.</p>
</div>
<p>As the Crawler's implementation is based on the DOM extension, it is also able
to interact with native <a href="https://secure.php.net/manual/en/class.domdocument.php" class="reference external" title="DOMDocument" rel="external noopener noreferrer" target="_blank">DOMDocument</a>, <a href="https://secure.php.net/manual/en/class.domnodelist.php" class="reference external" title="DOMNodeList" rel="external noopener noreferrer" target="_blank">DOMNodeList</a>
and <a href="https://secure.php.net/manual/en/class.domnode.php" class="reference external" title="DOMNode" rel="external noopener noreferrer" target="_blank">DOMNode</a> objects:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domDocument</span> = <span class="hljs-keyword">new</span> \DOMDocument();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domDocument</span><span class="hljs-operator">-&gt;</span>loadXml(<span class="hljs-string">'&lt;root&gt;&lt;node/&gt;&lt;node/&gt;&lt;/root&gt;'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>nodeList</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domDocument</span><span class="hljs-operator">-&gt;</span>getElementsByTagName(<span class="hljs-string">'node'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>node</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domDocument</span><span class="hljs-operator">-&gt;</span>getElementsByTagName(<span class="hljs-string">'node'</span>)<span class="hljs-operator">-&gt;</span>item(<span class="hljs-number">0</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addDocument(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domDocument</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addNodeList(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>nodeList</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addNodes([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>node</span>]);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addNode(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>node</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>add(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domDocument</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="component-dom-crawler-dumping"></span>
<div class="admonition-wrapper"><div class="admonition admonition-sidebar"><p class="sidebar-title"><span>Manipulating and Dumping a <code translate="no" class="notranslate">Crawler</code></span></p><p>These methods on the <code translate="no" class="notranslate">Crawler</code> are intended to initially populate your
<code translate="no" class="notranslate">Crawler</code> and aren't intended to be used to further manipulate a DOM
(though this is possible). However, since the <code translate="no" class="notranslate">Crawler</code> is a set of
<a href="https://secure.php.net/manual/en/class.domelement.php" class="reference external" title="DOMElement" rel="external noopener noreferrer" target="_blank">DOMElement</a> objects, you can use any method or property available
on <a href="https://secure.php.net/manual/en/class.domelement.php" class="reference external" title="DOMElement" rel="external noopener noreferrer" target="_blank">DOMElement</a>, <a href="https://secure.php.net/manual/en/class.domnode.php" class="reference external" title="DOMNode" rel="external noopener noreferrer" target="_blank">DOMNode</a> or <a href="https://secure.php.net/manual/en/class.domdocument.php" class="reference external" title="DOMDocument" rel="external noopener noreferrer" target="_blank">DOMDocument</a>.
For example, you could get the HTML of a <code translate="no" class="notranslate">Crawler</code> with something like
this:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span> = <span class="hljs-string">''</span>;

<span class="hljs-keyword">foreach</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> <span class="hljs-keyword">as</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domElement</span>) {
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span> .= <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domElement</span><span class="hljs-operator">-&gt;</span>ownerDocument<span class="hljs-operator">-&gt;</span>saveHTML(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>domElement</span>);
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Or you can get the HTML of the first node using
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_html" class="reference external" title="Symfony\Component\DomCrawler\Crawler::html()" rel="external noopener noreferrer" target="_blank">html()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// if the node does not exist, calling to html() will result in an exception</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>html();

<span class="hljs-comment">// avoid the exception passing an argument that html() returns when node does not exist</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>html(<span class="hljs-string">'Default &lt;strong&gt;HTML&lt;/strong&gt; content'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Or you can get the outer HTML of the first node using
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php#method_outerHtml" class="reference external" title="Symfony\Component\DomCrawler\Crawler::outerHtml()" rel="external noopener noreferrer" target="_blank">outerHtml()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>outerHtml();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div></div>
</div>
<div class="section">
<h3 id="expression-evaluation">
    Expression Evaluation
    <a class="headerlink" href="#expression-evaluation" title="Permalink to this headline">¶</a>
</h3>
<p>The <code translate="no" class="notranslate">evaluate()</code> method evaluates the given XPath expression. The return
value depends on the XPath expression. If the expression evaluates to a scalar
value (e.g. HTML attributes), an array of results will be returned. If the
expression evaluates to a DOM document, a new <code translate="no" class="notranslate">Crawler</code> instance will be
returned.</p>
<p>This behavior is best illustrated with examples:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DomCrawler</span>\<span class="hljs-title">Crawler</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span> = <span class="hljs-string">'&lt;html&gt;
&lt;body&gt;
    &lt;span id="article-100" class="article"&gt;Article 1&lt;/span&gt;
    &lt;span id="article-101" class="article"&gt;Article 2&lt;/span&gt;
    &lt;span id="article-102" class="article"&gt;Article 3&lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;'</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-keyword">new</span> Crawler();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>addHtmlContent(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>html</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//span[contains(@id, "article-")]'</span>)<span class="hljs-operator">-&gt;</span>evaluate(<span class="hljs-string">'substring-after(@id, "-")'</span>);
<span class="hljs-comment">/* Result:
[
    0 =&gt; '100',
    1 =&gt; '101',
    2 =&gt; '102',
];
*/</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>evaluate(<span class="hljs-string">'substring-after(//span[contains(@id, "article-")]/@id, "-")'</span>);
<span class="hljs-comment">/* Result:
[
    0 =&gt; '100',
]
*/</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filterXPath(<span class="hljs-string">'//span[@class="article"]'</span>)<span class="hljs-operator">-&gt;</span>evaluate(<span class="hljs-string">'count(@id)'</span>);
<span class="hljs-comment">/* Result:
[
    0 =&gt; 1.0,
    1 =&gt; 1.0,
    2 =&gt; 1.0,
]
*/</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>evaluate(<span class="hljs-string">'count(//span[@class="article"])'</span>);
<span class="hljs-comment">/* Result:
[
    0 =&gt; 3.0,
]
*/</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>evaluate(<span class="hljs-string">'//span[1]'</span>);
<span class="hljs-comment">// A Symfony\Component\DomCrawler\Crawler instance</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="links">
    Links
    <a class="headerlink" href="#links" title="Permalink to this headline">¶</a>
</h3>
<p>Use the <code translate="no" class="notranslate">filter()</code> method to find links by their <code translate="no" class="notranslate">id</code> or <code translate="no" class="notranslate">class</code>
attributes and use the <code translate="no" class="notranslate">selectLink()</code> method to find links by their content
(it also finds clickable images with that content in its <code translate="no" class="notranslate">alt</code> attribute).</p>
<p>Both methods return a <code translate="no" class="notranslate">Crawler</code> instance with just the selected link. Use the
<code translate="no" class="notranslate">link()</code> method to get the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Link.php" class="reference external" title="Symfony\Component\DomCrawler\Link" rel="external noopener noreferrer" target="_blank">Link</a> object
that represents the link:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// first, select the link by id, class or content...</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>linkCrawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'#sign-up'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>linkCrawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'.user-profile'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>linkCrawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectLink(<span class="hljs-string">'Log in'</span>);

<span class="hljs-comment">// ...then, get the Link object:</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>link</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>linkCrawler</span><span class="hljs-operator">-&gt;</span>link();

<span class="hljs-comment">// or do all this at once:</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>link</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'#sign-up'</span>)<span class="hljs-operator">-&gt;</span>link();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>link</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'.user-profile'</span>)<span class="hljs-operator">-&gt;</span>link();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>link</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectLink(<span class="hljs-string">'Log in'</span>)<span class="hljs-operator">-&gt;</span>link();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Link.php" class="reference external" title="Symfony\Component\DomCrawler\Link" rel="external noopener noreferrer" target="_blank">Link</a> object has several useful
methods to get more information about the selected link itself:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// returns the proper URI that can be used to make another request</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>uri</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>link</span><span class="hljs-operator">-&gt;</span>getUri();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The <code translate="no" class="notranslate">getUri()</code> is especially useful as it cleans the <code translate="no" class="notranslate">href</code> value and
transforms it into how it should really be processed. For example, for a
link with <code translate="no" class="notranslate">href=&quot;#foo&quot;</code>, this would return the full URI of the current
page suffixed with <code translate="no" class="notranslate">#foo</code>. The return from <code translate="no" class="notranslate">getUri()</code> is always a full
URI that you can act on.</p>
</div>
</div>
<div class="section">
<h3 id="images">
    Images
    <a class="headerlink" href="#images" title="Permalink to this headline">¶</a>
</h3>
<p>To find an image by its <code translate="no" class="notranslate">alt</code> attribute, use the <code translate="no" class="notranslate">selectImage</code> method on an
existing crawler. This returns a <code translate="no" class="notranslate">Crawler</code> instance with just the selected
image(s). Calling <code translate="no" class="notranslate">image()</code> gives you a special
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Image.php" class="reference external" title="Symfony\Component\DomCrawler\Image" rel="external noopener noreferrer" target="_blank">Image</a> object:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>imagesCrawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectImage(<span class="hljs-string">'Kitten'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>image</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>imagesCrawler</span><span class="hljs-operator">-&gt;</span>image();

<span class="hljs-comment">// or do this all at once</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>image</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectImage(<span class="hljs-string">'Kitten'</span>)<span class="hljs-operator">-&gt;</span>image();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Image.php" class="reference external" title="Symfony\Component\DomCrawler\Image" rel="external noopener noreferrer" target="_blank">Image</a> object has the same
<code translate="no" class="notranslate">getUri()</code> method as <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Link.php" class="reference external" title="Symfony\Component\DomCrawler\Link" rel="external noopener noreferrer" target="_blank">Link</a>.</p>
</div>
<div class="section">
<h3 id="forms">
    Forms
    <a class="headerlink" href="#forms" title="Permalink to this headline">¶</a>
</h3>
<p>Special treatment is also given to forms. A <code translate="no" class="notranslate">selectButton()</code> method is
available on the Crawler which returns another Crawler that matches <code translate="no" class="notranslate">&lt;button&gt;</code>
or <code translate="no" class="notranslate">&lt;input type=&quot;submit&quot;&gt;</code> or <code translate="no" class="notranslate">&lt;input type=&quot;button&quot;&gt;</code> elements (or an
<code translate="no" class="notranslate">&lt;img&gt;</code> element inside them). The string given as argument is looked for in
the <code translate="no" class="notranslate">id</code>, <code translate="no" class="notranslate">alt</code>, <code translate="no" class="notranslate">name</code>, and <code translate="no" class="notranslate">value</code> attributes and the text content of
those elements.</p>
<p>This method is especially useful because you can use it to return
a <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Form.php" class="reference external" title="Symfony\Component\DomCrawler\Form" rel="external noopener noreferrer" target="_blank">Form</a> object that represents the
form that the button lives in:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// button example: &lt;button id="my-super-button" type="submit"&gt;My super button&lt;/button&gt;</span>

<span class="hljs-comment">// you can get button by its label</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectButton(<span class="hljs-string">'My super button'</span>)<span class="hljs-operator">-&gt;</span>form();

<span class="hljs-comment">// or by button id (#my-super-button) if the button doesn't have a label</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectButton(<span class="hljs-string">'my-super-button'</span>)<span class="hljs-operator">-&gt;</span>form();

<span class="hljs-comment">// or you can filter the whole form, for example a form has a class attribute: &lt;form class="form-vertical" method="POST"&gt;</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>filter(<span class="hljs-string">'.form-vertical'</span>)<span class="hljs-operator">-&gt;</span>form();

<span class="hljs-comment">// or "fill" the form fields with data</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectButton(<span class="hljs-string">'my-super-button'</span>)<span class="hljs-operator">-&gt;</span>form([
    <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'Ryan'</span>,
]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Form.php" class="reference external" title="Symfony\Component\DomCrawler\Form" rel="external noopener noreferrer" target="_blank">Form</a> object has lots of very
useful methods for working with forms:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>uri</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getUri();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>method</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getMethod();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getName();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Form.php#method_getUri" class="reference external" title="Symfony\Component\DomCrawler\Form::getUri()" rel="external noopener noreferrer" target="_blank">getUri()</a> method does more
than just return the <code translate="no" class="notranslate">action</code> attribute of the form. If the form method
is GET, then it mimics the browser's behavior and returns the <code translate="no" class="notranslate">action</code>
attribute followed by a query string of all of the form's values.</p>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The optional <code translate="no" class="notranslate">formaction</code> and <code translate="no" class="notranslate">formmethod</code> button attributes are
supported. The <code translate="no" class="notranslate">getUri()</code> and <code translate="no" class="notranslate">getMethod()</code> methods take into account
those attributes to always return the right action and method depending on
the button used to get the form.</p>
</div>
<p>You can virtually set and get values on the form:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// sets values on the form internally</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>setValues([
    <span class="hljs-string">'registration[username]'</span> =&gt; <span class="hljs-string">'symfonyfan'</span>,
    <span class="hljs-string">'registration[terms]'</span>    =&gt; <span class="hljs-number">1</span>,
]);

<span class="hljs-comment">// gets back an array of values - in the "flat" array like above</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>values</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getValues();

<span class="hljs-comment">// returns the values like PHP would see them,</span>
<span class="hljs-comment">// where "registration" is its own array</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>values</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getPhpValues();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>To work with multi-dimensional fields:</p>
<div translate="no" class="highlight-html notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"multi[]"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"multi[]"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"multi[dimensional]"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"multi[dimensional][]"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"multi[dimensional][]"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"multi[dimensional][]"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Pass an array of values:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// sets a single field</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>setValues([<span class="hljs-string">'multi'</span> =&gt; [<span class="hljs-string">'value'</span>]]);

<span class="hljs-comment">// sets multiple fields at once</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>setValues([<span class="hljs-string">'multi'</span> =&gt; [
    <span class="hljs-number">1</span>             =&gt; <span class="hljs-string">'value'</span>,
    <span class="hljs-string">'dimensional'</span> =&gt; <span class="hljs-string">'an other value'</span>,
]]);

<span class="hljs-comment">// tick multiple checkboxes at once</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>setValues([<span class="hljs-string">'multi'</span> =&gt; [
    <span class="hljs-string">'dimensional'</span> =&gt; [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>] <span class="hljs-comment">// it uses the input value to determine which checkbox to tick</span>
]]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>This is great, but it gets better! The <code translate="no" class="notranslate">Form</code> object allows you to interact
with your form like a browser, selecting radio values, ticking checkboxes,
and uploading files:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'registration[username]'</span>]<span class="hljs-operator">-&gt;</span>setValue(<span class="hljs-string">'symfonyfan'</span>);

<span class="hljs-comment">// checks or unchecks a checkbox</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'registration[terms]'</span>]<span class="hljs-operator">-&gt;</span>tick();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'registration[terms]'</span>]<span class="hljs-operator">-&gt;</span>untick();

<span class="hljs-comment">// selects an option</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'registration[birthday][year]'</span>]<span class="hljs-operator">-&gt;</span>select(<span class="hljs-number">1984</span>);

<span class="hljs-comment">// selects many options from a "multiple" select</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'registration[interests]'</span>]<span class="hljs-operator">-&gt;</span>select([<span class="hljs-string">'symfony'</span>, <span class="hljs-string">'cookies'</span>]);

<span class="hljs-comment">// fakes a file upload</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'registration[photo]'</span>]<span class="hljs-operator">-&gt;</span>upload(<span class="hljs-string">'/path/to/lucas.jpg'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h4 id="using-the-form-data">
    Using the Form Data
    <a class="headerlink" href="#using-the-form-data" title="Permalink to this headline">¶</a>
</h4>
<p>What's the point of doing all of this? If you're testing internally, you
can grab the information off of your form as if it had just been submitted
by using the PHP values:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>values</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getPhpValues();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>files</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getPhpFiles();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>If you're using an external HTTP client, you can use the form to grab all
of the information you need to create a POST request for the form:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>uri</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getUri();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>method</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getMethod();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>values</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getValues();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>files</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>getFiles();

<span class="hljs-comment">// now use some HTTP client and post using this information</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>One great example of an integrated system that uses all of this is
the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/BrowserKit/HttpBrowser.php" class="reference external" title="Symfony\Component\BrowserKit\HttpBrowser" rel="external noopener noreferrer" target="_blank">HttpBrowser</a> provided by
the <a href="browser_kit.html" class="reference internal">BrowserKit component</a>.
It understands the Symfony Crawler object and can use it to submit forms
directly:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">BrowserKit</span>\<span class="hljs-title">HttpBrowser</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpClient</span>\<span class="hljs-title">HttpClient</span>;

<span class="hljs-comment">// makes a real request to an external site</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>browser</span> = <span class="hljs-keyword">new</span> HttpBrowser(HttpClient<span class="hljs-operator">::</span>create());
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>browser</span><span class="hljs-operator">-&gt;</span>request(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'https://github.com/login'</span>);

<span class="hljs-comment">// select the form and fill in some values</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span><span class="hljs-operator">-&gt;</span>selectButton(<span class="hljs-string">'Sign in'</span>)<span class="hljs-operator">-&gt;</span>form();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'login'</span>] = <span class="hljs-string">'symfonyfan'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'password'</span>] = <span class="hljs-string">'anypass'</span>;

<span class="hljs-comment">// submits the given form</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>browser</span><span class="hljs-operator">-&gt;</span>submit(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="components-dom-crawler-invalid"></span>
</div>
<div class="section">
<h4 id="selecting-invalid-choice-values">
    Selecting Invalid Choice Values
    <a class="headerlink" href="#selecting-invalid-choice-values" title="Permalink to this headline">¶</a>
</h4>
<p>By default, choice fields (select, radio) have internal validation activated
to prevent you from setting invalid values. If you want to be able to set
invalid values, you can use the  <code translate="no" class="notranslate">disableValidation()</code> method on either
the whole form or specific field(s):</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// disables validation for a specific field</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'country'</span>]<span class="hljs-operator">-&gt;</span>disableValidation()<span class="hljs-operator">-&gt;</span>select(<span class="hljs-string">'Invalid value'</span>);

<span class="hljs-comment">// disables validation for the whole form</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span><span class="hljs-operator">-&gt;</span>disableValidation();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>form</span>[<span class="hljs-string">'country'</span>]<span class="hljs-operator">-&gt;</span>select(<span class="hljs-string">'Invalid value'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
<div class="section">
<h3 id="resolving-a-uri">
    Resolving a URI
    <a class="headerlink" href="#resolving-a-uri" title="Permalink to this headline">¶</a>
</h3>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/UriResolver.php" class="reference external" title="Symfony\Component\DomCrawler\UriResolver" rel="external noopener noreferrer" target="_blank">UriResolver</a> class takes a URI
(relative, absolute, fragment, etc.) and turns it into an absolute URI against
another given base URI:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DomCrawler</span>\<span class="hljs-title">UriResolver</span>;

UriResolver<span class="hljs-operator">::</span>resolve(<span class="hljs-string">'/foo'</span>, <span class="hljs-string">'http://localhost/bar/foo/'</span>); <span class="hljs-comment">// http://localhost/foo</span>
UriResolver<span class="hljs-operator">::</span>resolve(<span class="hljs-string">'?a=b'</span>, <span class="hljs-string">'http://localhost/bar#foo'</span>); <span class="hljs-comment">// http://localhost/bar?a=b</span>
UriResolver<span class="hljs-operator">::</span>resolve(<span class="hljs-string">'../../'</span>, <span class="hljs-string">'http://localhost/'</span>); <span class="hljs-comment">// http://localhost/</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="using-a-html5-parser">
    Using a HTML5 Parser
    <a class="headerlink" href="#using-a-html5-parser" title="Permalink to this headline">¶</a>
</h3>
<p>If you need the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DomCrawler/Crawler.php" class="reference external" title="Symfony\Component\DomCrawler\Crawler" rel="external noopener noreferrer" target="_blank">Crawler</a> to use an HTML5
parser, set its <code translate="no" class="notranslate">useHtml5Parser</code> constructor argument to <code translate="no" class="notranslate">true</code>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DomCrawler</span>\<span class="hljs-title">Crawler</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>crawler</span> = <span class="hljs-keyword">new</span> Crawler(<span class="hljs-keyword">null</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>uri</span>, useHtml5Parser: <span class="hljs-keyword">true</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>By doing so, the crawler will use the HTML5 parser provided by the <a href="https://packagist.org/packages/masterminds/html5" class="reference external" rel="external noopener noreferrer" target="_blank">masterminds/html5</a>
library to parse the documents.</p>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The <code translate="no" class="notranslate">useHtml5Parser</code> argument was introduced in Symfony 6.3.</p>
</div>
</div>
</div>
<div class="section">
<h2 id="learn-more">
    Learn more
    <a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a>
</h2>
<ul>
    <li><a href="../testing.html" class="reference internal">Testing</a></li>
<li><a href="css_selector.html" class="reference internal">The CssSelector Component</a></li>
</ul>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>