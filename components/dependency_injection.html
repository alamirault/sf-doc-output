        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="the-dependencyinjection-component">
    The DependencyInjection Component
    <a class="headerlink" href="#the-dependencyinjection-component" title="Permalink to this headline">¶</a>
</h1>
<blockquote><p>The DependencyInjection component implements a <a href="https://www.php-fig.org/psr/psr-11/" class="reference external" rel="external noopener noreferrer" target="_blank">PSR-11</a> compatible service
container that allows you to standardize and centralize the way objects are
constructed in your application.</p>
</blockquote>
<p>For an introduction to Dependency Injection and service containers see
<a href="../service_container.html" class="reference internal">Service Container</a>.</p>
<div class="section">
<h2 id="installation">
    Installation
    <a class="headerlink" href="#installation" title="Permalink to this headline">¶</a>
</h2>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>composer require symfony/dependency-injection</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>If you install this component outside of a Symfony application, you must
require the <code translate="no" class="notranslate">vendor/autoload.php</code> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a href="using_components.html" class="reference internal">this article</a> for more details.</p>
</div>
</div>
<div class="section">
<h2 id="basic-usage">
    Basic Usage
    <a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a>
</h2>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>This article explains how to use the DependencyInjection features as an
independent component in any PHP application. Read the <a href="../service_container.html" class="reference internal">Service Container</a>
article to learn about how to use it in Symfony applications.</p>
</div>
<p>You might have a class like the following <code translate="no" class="notranslate">Mailer</code> that
you want to make available as a service:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mailer</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>transport</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>transport = <span class="hljs-string">'sendmail'</span>;
    }

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>You can register this in the container as a service:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span><span class="hljs-operator">-&gt;</span>register(<span class="hljs-string">'mailer'</span>, <span class="hljs-string">'Mailer'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>An improvement to the class to make it more flexible would be to allow
the container to set the <code translate="no" class="notranslate">transport</code> used. If you change the class
so this is passed into the constructor:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mailer</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>transport</span>,
    )</span> </span>{
    }

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Then you can set the choice of transport in the container:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>
    <span class="hljs-operator">-&gt;</span>register(<span class="hljs-string">'mailer'</span>, <span class="hljs-string">'Mailer'</span>)
    <span class="hljs-operator">-&gt;</span>addArgument(<span class="hljs-string">'sendmail'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>This class is now much more flexible as you have separated the choice of
transport out of the implementation and into the container.</p>
<p>Which mail transport you have chosen may be something other services need
to know about. You can avoid having to change it in multiple places by making
it a parameter in the container and then referring to this parameter for
the <code translate="no" class="notranslate">Mailer</code> service's constructor argument:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span><span class="hljs-operator">-&gt;</span>setParameter(<span class="hljs-string">'mailer.transport'</span>, <span class="hljs-string">'sendmail'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>
    <span class="hljs-operator">-&gt;</span>register(<span class="hljs-string">'mailer'</span>, <span class="hljs-string">'Mailer'</span>)
    <span class="hljs-operator">-&gt;</span>addArgument(<span class="hljs-string">'%mailer.transport%'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Now that the <code translate="no" class="notranslate">mailer</code> service is in the container you can inject it as
a dependency of other classes. If you have a <code translate="no" class="notranslate">NewsletterManager</code> class
like this:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewsletterManager</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private \Mailer <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>mailer</span>,
    )</span> </span>{
    }

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>When defining the <code translate="no" class="notranslate">newsletter_manager</code> service, the <code translate="no" class="notranslate">mailer</code> service does
not exist yet. Use the <code translate="no" class="notranslate">Reference</code> class to tell the container to inject the
<code translate="no" class="notranslate">mailer</code> service when it initializes the newsletter manager:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Reference</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span><span class="hljs-operator">-&gt;</span>setParameter(<span class="hljs-string">'mailer.transport'</span>, <span class="hljs-string">'sendmail'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>
    <span class="hljs-operator">-&gt;</span>register(<span class="hljs-string">'mailer'</span>, <span class="hljs-string">'Mailer'</span>)
    <span class="hljs-operator">-&gt;</span>addArgument(<span class="hljs-string">'%mailer.transport%'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>
    <span class="hljs-operator">-&gt;</span>register(<span class="hljs-string">'newsletter_manager'</span>, <span class="hljs-string">'NewsletterManager'</span>)
    <span class="hljs-operator">-&gt;</span>addArgument(<span class="hljs-keyword">new</span> Reference(<span class="hljs-string">'mailer'</span>));</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>If the <code translate="no" class="notranslate">NewsletterManager</code> did not require the <code translate="no" class="notranslate">Mailer</code> and injecting
it was only optional then you could use setter injection instead:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewsletterManager</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>mailer</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setMailer</span><span class="hljs-params">(\Mailer <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>mailer</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>mailer = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>mailer</span>;
    }

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>You can now choose not to inject a <code translate="no" class="notranslate">Mailer</code> into the <code translate="no" class="notranslate">NewsletterManager</code>.
If you do want to though then the container can call the setter method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Reference</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span><span class="hljs-operator">-&gt;</span>setParameter(<span class="hljs-string">'mailer.transport'</span>, <span class="hljs-string">'sendmail'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>
    <span class="hljs-operator">-&gt;</span>register(<span class="hljs-string">'mailer'</span>, <span class="hljs-string">'Mailer'</span>)
    <span class="hljs-operator">-&gt;</span>addArgument(<span class="hljs-string">'%mailer.transport%'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>
    <span class="hljs-operator">-&gt;</span>register(<span class="hljs-string">'newsletter_manager'</span>, <span class="hljs-string">'NewsletterManager'</span>)
    <span class="hljs-operator">-&gt;</span>addMethodCall(<span class="hljs-string">'setMailer'</span>, [<span class="hljs-keyword">new</span> Reference(<span class="hljs-string">'mailer'</span>)]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>You could then get your <code translate="no" class="notranslate">newsletter_manager</code> service from the container
like this:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();

<span class="hljs-comment">// ...</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>newsletterManager</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span><span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'newsletter_manager'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h3 id="getting-services-that-don-t-exist">
    Getting Services That Don't Exist
    <a class="headerlink" href="#getting-services-that-don-t-exist" title="Permalink to this headline">¶</a>
</h3>
<p>By default, when you try to get a service that doesn't exist, you see an exception.
You can override this behavior as follows:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerInterface</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();

<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// the second argument is optional and defines what to do when the service doesn't exist</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>newsletterManager</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span><span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'newsletter_manager'</span>, ContainerInterface<span class="hljs-operator">::</span>EXCEPTION_ON_INVALID_REFERENCE);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>These are all the possible behaviors:</p>
<blockquote><ul>
    <li><code translate="no" class="notranslate">ContainerInterface::EXCEPTION_ON_INVALID_REFERENCE</code>: throws an exception
at compile time (this is the <strong>default</strong> behavior);</li>
<li><code translate="no" class="notranslate">ContainerInterface::RUNTIME_EXCEPTION_ON_INVALID_REFERENCE</code>: throws an
exception at runtime, when trying to access the missing service;</li>
<li><code translate="no" class="notranslate">ContainerInterface::NULL_ON_INVALID_REFERENCE</code>: returns <code translate="no" class="notranslate">null</code>;</li>
<li><code translate="no" class="notranslate">ContainerInterface::IGNORE_ON_INVALID_REFERENCE</code>: ignores the wrapping
command asking for the reference (for instance, ignore a setter if the service
does not exist);</li>
<li><code translate="no" class="notranslate">ContainerInterface::IGNORE_ON_UNINITIALIZED_REFERENCE</code>: ignores/returns
<code translate="no" class="notranslate">null</code> for uninitialized services or invalid references.</li>
</ul>
</blockquote>
</div>
</div>
<div class="section">
<h2 id="avoiding-your-code-becoming-dependent-on-the-container">
    Avoiding your Code Becoming Dependent on the Container
    <a class="headerlink" href="#avoiding-your-code-becoming-dependent-on-the-container" title="Permalink to this headline">¶</a>
</h2>
<p>Whilst you can retrieve services from the container directly it is best
to minimize this. For example, in the <code translate="no" class="notranslate">NewsletterManager</code> you injected
the <code translate="no" class="notranslate">mailer</code> service in rather than asking for it from the container.
You could have injected the container in and retrieved the <code translate="no" class="notranslate">mailer</code> service
from it but it would then be tied to this particular container making it
difficult to reuse the class elsewhere.</p>
<p>You will need to get a service from the container at some point but this
should be as few times as possible at the entry point to your application.</p>
<span id="components-dependency-injection-loading-config"></span>
</div>
<div class="section">
<h2 id="setting-up-the-container-with-configuration-files">
    Setting up the Container with Configuration Files
    <a class="headerlink" href="#setting-up-the-container-with-configuration-files" title="Permalink to this headline">¶</a>
</h2>
<p>As well as setting up the services using PHP as above you can also use
configuration files. This allows you to use XML or YAML to write the definitions
for the services rather than using PHP to define the services as in the
above examples. In anything but the smallest applications it makes sense
to organize the service definitions by moving them into one or more configuration
files. To do this you also need to install
<a href="config.html" class="reference internal">the Config component</a>.</p>
<p>Loading an XML config file:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">FileLocator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">XmlFileLoader</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span> = <span class="hljs-keyword">new</span> XmlFileLoader(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>, <span class="hljs-keyword">new</span> FileLocator(<span class="hljs-keyword">__DIR__</span>));
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span><span class="hljs-operator">-&gt;</span>load(<span class="hljs-string">'services.xml'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Loading a YAML config file:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">FileLocator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">YamlFileLoader</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span> = <span class="hljs-keyword">new</span> YamlFileLoader(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>, <span class="hljs-keyword">new</span> FileLocator(<span class="hljs-keyword">__DIR__</span>));
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span><span class="hljs-operator">-&gt;</span>load(<span class="hljs-string">'services.yaml'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>If you want to load YAML config files then you will also need to install
<a href="yaml.html" class="reference internal">the Yaml component</a>.</p>
</div>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>If your application uses unconventional file extensions (for example, your
XML files have a <code translate="no" class="notranslate">.config</code> extension) you can pass the file type as the
second optional parameter of the <code translate="no" class="notranslate">load()</code> method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// ...</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span><span class="hljs-operator">-&gt;</span>load(<span class="hljs-string">'services.config'</span>, <span class="hljs-string">'xml'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<p>If you <em>do</em> want to use PHP to create the services then you can move this
into a separate config file and load it in a similar way:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">FileLocator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerBuilder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">PhpFileLoader</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span> = <span class="hljs-keyword">new</span> ContainerBuilder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span> = <span class="hljs-keyword">new</span> PhpFileLoader(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerBuilder</span>, <span class="hljs-keyword">new</span> FileLocator(<span class="hljs-keyword">__DIR__</span>));
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span><span class="hljs-operator">-&gt;</span>load(<span class="hljs-string">'services.php'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>You can now set up the <code translate="no" class="notranslate">newsletter_manager</code> and <code translate="no" class="notranslate">mailer</code> services using
config files:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-86ba17ae7a54816671ebc7e184498d227d66fb73" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-528ff7e572315400dcd1d7ce0e29c84ed99d6693" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-8b68e37654143d844110f9f12e7fed7c0568521b" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-86ba17ae7a54816671ebc7e184498d227d66fb73" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-attr">parameters:</span>
    <span class="hljs-comment"># ...</span>
    <span class="hljs-attr">mailer.transport:</span> <span class="hljs-string">sendmail</span>

<span class="hljs-attr">services:</span>
    <span class="hljs-attr">mailer:</span>
        <span class="hljs-attr">class:</span>     <span class="hljs-string">Mailer</span>
        <span class="hljs-attr">arguments:</span> <span class="hljs-string">['%mailer.transport%']</span>
    <span class="hljs-attr">newsletter_manager:</span>
        <span class="hljs-attr">class:</span>     <span class="hljs-string">NewsletterManager</span>
        <span class="hljs-attr">calls:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">[setMailer,</span> <span class="hljs-string">['@mailer']]</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-528ff7e572315400dcd1d7ce0e29c84ed99d6693" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parameters</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">parameter</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"mailer.transport"</span>&gt;</span>sendmail<span class="hljs-tag">&lt;/<span class="hljs-name">parameter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parameters</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mailer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"Mailer"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">argument</span>&gt;</span>%mailer.transport%<span class="hljs-tag">&lt;/<span class="hljs-name">argument</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"newsletter_manager"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"NewsletterManager"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">call</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"setMailer"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">argument</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"service"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mailer"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">call</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-8b68e37654143d844110f9f12e7fed7c0568521b" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span><span class="hljs-operator">-&gt;</span>parameters()
        <span class="hljs-comment">// ...</span>
        <span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'mailer.transport'</span>, <span class="hljs-string">'sendmail'</span>)
    ;

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span><span class="hljs-operator">-&gt;</span>services();
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'mailer'</span>, <span class="hljs-string">'Mailer'</span>)
        <span class="hljs-operator">-&gt;</span>args([<span class="hljs-string">'%mailer.transport%'</span>])
    ;

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'mailer'</span>, <span class="hljs-string">'Mailer'</span>)
        <span class="hljs-operator">-&gt;</span>args([param(<span class="hljs-string">'mailer.transport'</span>)])
    ;

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>services</span><span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'newsletter_manager'</span>, <span class="hljs-string">'NewsletterManager'</span>)
        <span class="hljs-operator">-&gt;</span>call(<span class="hljs-string">'setMailer'</span>, [service(<span class="hljs-string">'mailer'</span>)])
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
</div>
<div class="section">
<h2 id="learn-more">
    Learn More
    <a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a>
</h2>
<div class="toctree-wrapper toc-size-xl"><ul class="toctree toctree-level-1 toctree-length-23"><li><a href="../components/dependency_injection/compilation.html">Compiling the Container</a></li><li><a href="../components/dependency_injection/workflow.html">Container Building Workflow</a></li><li><a href="../service_container/alias_private.html">How to Create Service Aliases and Mark Services as Private</a></li><li><a href="../service_container/autowiring.html">Defining Services Dependencies Automatically (Autowiring)</a></li><li><a href="../service_container/calls.html">Service Method Calls and Setter Injection</a></li><li><a href="../service_container/compiler_passes.html">How to Work with Compiler Passes</a></li><li><a href="../service_container/configurators.html">How to Configure a Service with a Configurator</a></li><li><a href="../service_container/debug.html">How to Debug the Service Container & List Services</a></li><li><a href="../service_container/definitions.html">How to work with Service Definition Objects</a></li><li><a href="../service_container/expression_language.html">How to Inject Values Based on Complex Expressions</a></li><li><a href="../service_container/factories.html">Using a Factory to Create Services</a></li><li><a href="../service_container/import.html">How to Import Configuration Files/Resources</a></li><li><a href="../service_container/injection_types.html">Types of Injection</a></li><li><a href="../service_container/lazy_services.html">Lazy Services</a></li><li><a href="../service_container/optional_dependencies.html">How to Make Service Arguments/References Optional</a></li><li><a href="../service_container/parent_services.html">How to Manage Common Dependencies with Parent Services</a></li><li><a href="../service_container/request.html">How to Retrieve the Request from the Service Container</a></li><li><a href="../service_container/service_closures.html">Service Closures</a></li><li><a href="../service_container/service_decoration.html">How to Decorate Services</a></li><li><a href="../service_container/service_subscribers_locators.html">Service Subscribers & Locators</a></li><li><a href="../service_container/shared.html">How to Define Non Shared Services</a></li><li><a href="../service_container/synthetic_services.html">How to Inject Instances into the Container</a></li><li><a href="../service_container/tags.html">How to Work with Service Tags</a></li></ul></div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>