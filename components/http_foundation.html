        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="the-httpfoundation-component">
    The HttpFoundation Component
    <a class="headerlink" href="#the-httpfoundation-component" title="Permalink to this headline">¶</a>
</h1>
<blockquote><p>The HttpFoundation component defines an object-oriented layer for the HTTP
specification.</p>
</blockquote>
<p>In PHP, the request is represented by some global variables (<code translate="no" class="notranslate">$_GET</code>,
<code translate="no" class="notranslate">$_POST</code>, <code translate="no" class="notranslate">$_FILES</code>, <code translate="no" class="notranslate">$_COOKIE</code>, <code translate="no" class="notranslate">$_SESSION</code>, ...) and the response is
generated by some functions (<code translate="no" class="notranslate">echo</code>, <code translate="no" class="notranslate">header()</code>, <code translate="no" class="notranslate">setcookie()</code>, ...).</p>
<p>The Symfony HttpFoundation component replaces these default PHP global
variables and functions by an object-oriented layer.</p>
<div class="section">
<h2 id="installation">
    Installation
    <a class="headerlink" href="#installation" title="Permalink to this headline">¶</a>
</h2>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>composer require symfony/http-foundation</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>If you install this component outside of a Symfony application, you must
require the <code translate="no" class="notranslate">vendor/autoload.php</code> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a href="using_components.html" class="reference internal">this article</a> for more details.</p>
</div>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>This article explains how to use the HttpFoundation features as an
independent component in any PHP application. In Symfony applications
everything is already configured and ready to use. Read the <a href="../controller.html" class="reference internal">Controller</a>
article to learn about how to use these features when creating controllers.</p>
</div>
<span id="component-http-foundation-request"></span>
</div>
<div class="section">
<h2 id="request">
    Request
    <a class="headerlink" href="#request" title="Permalink to this headline">¶</a>
</h2>
<p>The most common way to create a request is to base it on the current PHP global
variables with
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_createFromGlobals" class="reference external" title="Symfony\Component\HttpFoundation\Request::createFromGlobals()" rel="external noopener noreferrer" target="_blank">createFromGlobals()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Request</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span> = Request<span class="hljs-operator">::</span>createFromGlobals();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>which is almost equivalent to the more verbose, but also more flexible,
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method___construct" class="reference external" title="Symfony\Component\HttpFoundation\Request::__construct()" rel="external noopener noreferrer" target="_blank">__construct()</a> call:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span> = <span class="hljs-keyword">new</span> Request(
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>_GET</span>,
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>_POST</span>,
    [],
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>_COOKIE</span>,
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>_FILES</span>,
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>_SERVER</span>
);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="accessing-request-data"></span>
<div class="section">
<h3 id="accessing-request-data">
    Accessing Request Data
    <a class="headerlink" href="#accessing-request-data" title="Permalink to this headline">¶</a>
</h3>
<p>A Request object holds information about the client request. This information
can be accessed via several public properties:</p>
<ul>
    <li><code translate="no" class="notranslate">request</code>: equivalent of <code translate="no" class="notranslate">$_POST</code>;</li>
<li><code translate="no" class="notranslate">query</code>: equivalent of <code translate="no" class="notranslate">$_GET</code> (<code translate="no" class="notranslate">$request-&gt;query-&gt;get(&#039;name&#039;)</code>);</li>
<li><code translate="no" class="notranslate">cookies</code>: equivalent of <code translate="no" class="notranslate">$_COOKIE</code>;</li>
<li><code translate="no" class="notranslate">attributes</code>: no equivalent - used by your app to store other data (see <a href="http_foundation.html#component-foundation-attributes" class="reference internal">below</a>);</li>
<li><code translate="no" class="notranslate">files</code>: equivalent of <code translate="no" class="notranslate">$_FILES</code>;</li>
<li><code translate="no" class="notranslate">server</code>: equivalent of <code translate="no" class="notranslate">$_SERVER</code>;</li>
<li><code translate="no" class="notranslate">headers</code>: mostly equivalent to a subset of <code translate="no" class="notranslate">$_SERVER</code>
(<code translate="no" class="notranslate">$request-&gt;headers-&gt;get(&#039;User-Agent&#039;)</code>).</li>
</ul>
<p>Each property is a <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag" rel="external noopener noreferrer" target="_blank">ParameterBag</a>
instance (or a subclass of), which is a data holder class:</p>
<ul>
    <li><code translate="no" class="notranslate">request</code>: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag" rel="external noopener noreferrer" target="_blank">ParameterBag</a> or
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/InputBag.php" class="reference external" title="Symfony\Component\HttpFoundation\InputBag" rel="external noopener noreferrer" target="_blank">InputBag</a> if the data is
coming from <code translate="no" class="notranslate">$_POST</code> parameters;</li>
<li><code translate="no" class="notranslate">query</code>: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/InputBag.php" class="reference external" title="Symfony\Component\HttpFoundation\InputBag" rel="external noopener noreferrer" target="_blank">InputBag</a>;</li>
<li><code translate="no" class="notranslate">cookies</code>: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/InputBag.php" class="reference external" title="Symfony\Component\HttpFoundation\InputBag" rel="external noopener noreferrer" target="_blank">InputBag</a>;</li>
<li><code translate="no" class="notranslate">attributes</code>: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag" rel="external noopener noreferrer" target="_blank">ParameterBag</a>;</li>
<li><code translate="no" class="notranslate">files</code>: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/FileBag.php" class="reference external" title="Symfony\Component\HttpFoundation\FileBag" rel="external noopener noreferrer" target="_blank">FileBag</a>;</li>
<li><code translate="no" class="notranslate">server</code>: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ServerBag.php" class="reference external" title="Symfony\Component\HttpFoundation\ServerBag" rel="external noopener noreferrer" target="_blank">ServerBag</a>;</li>
<li><code translate="no" class="notranslate">headers</code>: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/HeaderBag.php" class="reference external" title="Symfony\Component\HttpFoundation\HeaderBag" rel="external noopener noreferrer" target="_blank">HeaderBag</a>.</li>
</ul>
<p>All <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag" rel="external noopener noreferrer" target="_blank">ParameterBag</a> instances have
methods to retrieve and update their data:</p>
<dl>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_all" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::all()" rel="external noopener noreferrer" target="_blank">all()</a></dt>
        
        <dd>
                            Returns the parameters.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_keys" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::keys()" rel="external noopener noreferrer" target="_blank">keys()</a></dt>
        
        <dd>
                            Returns the parameter keys.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_replace" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::replace()" rel="external noopener noreferrer" target="_blank">replace()</a></dt>
        
        <dd>
                            Replaces the current parameters by a new set.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_add" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::add()" rel="external noopener noreferrer" target="_blank">add()</a></dt>
        
        <dd>
                            Adds parameters.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_get" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::get()" rel="external noopener noreferrer" target="_blank">get()</a></dt>
        
        <dd>
                            Returns a parameter by name.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_set" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::set()" rel="external noopener noreferrer" target="_blank">set()</a></dt>
        
        <dd>
                            Sets a parameter by name.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_has" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::has()" rel="external noopener noreferrer" target="_blank">has()</a></dt>
        
        <dd>
                            Returns <code translate="no" class="notranslate">true</code> if the parameter is defined.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_remove" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::remove()" rel="external noopener noreferrer" target="_blank">remove()</a></dt>
        
        <dd>
                            Removes a parameter.
                    </dd>
    </dl>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag" rel="external noopener noreferrer" target="_blank">ParameterBag</a> instance also
has some methods to filter the input values:</p>
<dl>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_getAlpha" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::getAlpha()" rel="external noopener noreferrer" target="_blank">getAlpha()</a></dt>
        
        <dd>
                            Returns the alphabetic characters of the parameter value;
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_getAlnum" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::getAlnum()" rel="external noopener noreferrer" target="_blank">getAlnum()</a></dt>
        
        <dd>
                            Returns the alphabetic characters and digits of the parameter value;
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_getBoolean" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::getBoolean()" rel="external noopener noreferrer" target="_blank">getBoolean()</a></dt>
        
        <dd>
                            Returns the parameter value converted to boolean;
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_getDigits" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::getDigits()" rel="external noopener noreferrer" target="_blank">getDigits()</a></dt>
        
        <dd>
                            Returns the digits of the parameter value;
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_getInt" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::getInt()" rel="external noopener noreferrer" target="_blank">getInt()</a></dt>
        
        <dd>
                            Returns the parameter value converted to integer;
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_getEnum" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::getEnum()" rel="external noopener noreferrer" target="_blank">getEnum()</a></dt>
        
        <dd>
                            Returns the parameter value converted to a PHP enum;
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_getString" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::getString()" rel="external noopener noreferrer" target="_blank">getString()</a></dt>
        
        <dd>
                            Returns the parameter value as a string;
                    </dd>
    </dl>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The <code translate="no" class="notranslate">ParameterBag::getEnum()</code> and <code translate="no" class="notranslate">ParameterBag::getString()</code> methods
were introduced in Symfony 6.3.</p>
</div>
<dl>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php#method_filter" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag::filter()" rel="external noopener noreferrer" target="_blank">filter()</a></dt>
        
        <dd>
                            <p class="first">Filters the parameter by using the PHP <a href="https://secure.php.net/manual/en/function.filter-var.php" class="reference external" title="filter_var" rel="external noopener noreferrer" target="_blank">filter_var</a> function.</p>
                            <div class="admonition admonition-deprecated ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>Ignoring invalid values when using <code translate="no" class="notranslate">filter()</code> is deprecated and will throw
a <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpKernel/Exception/BadRequestHttpException.php" class="reference external" title="Symfony\Component\HttpKernel\Exception\BadRequestHttpException" rel="external noopener noreferrer" target="_blank">BadRequestHttpException</a>
in Symfony 7.0. You can use the <code translate="no" class="notranslate">FILTER_NULL_ON_FAILURE</code> flag to keep
ignoring them.</p>
</div>
                    </dd>
    </dl>
<p>All getters take up to two arguments: the first one is the parameter name
and the second one is the default value to return if the parameter does not
exist:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// the query string is '?foo=bar'</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>query<span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'foo'</span>);
<span class="hljs-comment">// returns 'bar'</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>query<span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'bar'</span>);
<span class="hljs-comment">// returns null</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>query<span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'bar'</span>, <span class="hljs-string">'baz'</span>);
<span class="hljs-comment">// returns 'baz'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>When PHP imports the request query, it handles request parameters like
<code translate="no" class="notranslate">foo[bar]=baz</code> in a special way as it creates an array. The <code translate="no" class="notranslate">get()</code> method
doesn't support returning arrays, so you need to use the following code:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// the query string is '?foo[bar]=baz'</span>

<span class="hljs-comment">// don't use $request-&gt;query-&gt;get('foo'); use the following instead:</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>query<span class="hljs-operator">-&gt;</span>all(<span class="hljs-string">'foo'</span>);
<span class="hljs-comment">// returns ['bar' =&gt; 'baz']</span>

<span class="hljs-comment">// if the requested parameter does not exist, an empty array is returned:</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>query<span class="hljs-operator">-&gt;</span>all(<span class="hljs-string">'qux'</span>);
<span class="hljs-comment">// returns []</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>query<span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'foo[bar]'</span>);
<span class="hljs-comment">// returns null</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>query<span class="hljs-operator">-&gt;</span>all()[<span class="hljs-string">'foo'</span>][<span class="hljs-string">'bar'</span>];
<span class="hljs-comment">// returns 'baz'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="component-foundation-attributes"></span>
<p>Thanks to the public <code translate="no" class="notranslate">attributes</code> property, you can store additional data
in the request, which is also an instance of
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ParameterBag.php" class="reference external" title="Symfony\Component\HttpFoundation\ParameterBag" rel="external noopener noreferrer" target="_blank">ParameterBag</a>. This is mostly used
to attach information that belongs to the Request and that needs to be
accessed from many different points in your application.</p>
<p>Finally, the raw data sent with the request body can be accessed using
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_getContent" class="reference external" title="Symfony\Component\HttpFoundation\Request::getContent()" rel="external noopener noreferrer" target="_blank">getContent()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>content</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>getContent();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>For instance, this may be useful to process an XML string sent to the
application by a remote service using the HTTP POST method.</p>
<p>If the request body is a JSON string, it can be accessed using
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_toArray" class="reference external" title="Symfony\Component\HttpFoundation\Request::toArray()" rel="external noopener noreferrer" target="_blank">toArray()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>toArray();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="identifying-a-request">
    Identifying a Request
    <a class="headerlink" href="#identifying-a-request" title="Permalink to this headline">¶</a>
</h3>
<p>In your application, you need a way to identify a request; most of the time,
this is done via the &quot;path info&quot; of the request, which can be accessed via the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_getPathInfo" class="reference external" title="Symfony\Component\HttpFoundation\Request::getPathInfo()" rel="external noopener noreferrer" target="_blank">getPathInfo()</a> method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// for a request to http://example.com/blog/index.php/post/hello-world</span>
<span class="hljs-comment">// the path info is "/post/hello-world"</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>getPathInfo();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="simulating-a-request">
    Simulating a Request
    <a class="headerlink" href="#simulating-a-request" title="Permalink to this headline">¶</a>
</h3>
<p>Instead of creating a request based on the PHP globals, you can also simulate
a request:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span> = Request<span class="hljs-operator">::</span>create(
    <span class="hljs-string">'/hello-world'</span>,
    <span class="hljs-string">'GET'</span>,
    [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'Fabien'</span>]
);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_create" class="reference external" title="Symfony\Component\HttpFoundation\Request::create()" rel="external noopener noreferrer" target="_blank">create()</a> method
creates a request based on a URI, a method and some parameters (the
query parameters or the request ones depending on the HTTP method); and of
course, you can also override all other variables as well (by default, Symfony
creates sensible defaults for all the PHP global variables).</p>
<p>Based on such a request, you can override the PHP global variables via
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_overrideGlobals" class="reference external" title="Symfony\Component\HttpFoundation\Request::overrideGlobals()" rel="external noopener noreferrer" target="_blank">overrideGlobals()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>overrideGlobals();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>You can also duplicate an existing request via
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_duplicate" class="reference external" title="Symfony\Component\HttpFoundation\Request::duplicate()" rel="external noopener noreferrer" target="_blank">duplicate()</a> or
change a bunch of parameters with a single call to
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_initialize" class="reference external" title="Symfony\Component\HttpFoundation\Request::initialize()" rel="external noopener noreferrer" target="_blank">initialize()</a>.</p>
</div>
</div>
<div class="section">
<h3 id="accessing-the-session">
    Accessing the Session
    <a class="headerlink" href="#accessing-the-session" title="Permalink to this headline">¶</a>
</h3>
<p>If you have a session attached to the request, you can access it via the
<code translate="no" class="notranslate">getSession()</code> method of the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php" class="reference external" title="Symfony\Component\HttpFoundation\Request" rel="external noopener noreferrer" target="_blank">Request</a>
or <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/RequestStack.php" class="reference external" title="Symfony\Component\HttpFoundation\RequestStack" rel="external noopener noreferrer" target="_blank">RequestStack</a> class;
the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_hasPreviousSession" class="reference external" title="Symfony\Component\HttpFoundation\Request::hasPreviousSession()" rel="external noopener noreferrer" target="_blank">hasPreviousSession()</a>
method tells you if the request contains a session which was started in one of
the previous requests.</p>
</div>
<div class="section">
<h3 id="processing-http-headers">
    Processing HTTP Headers
    <a class="headerlink" href="#processing-http-headers" title="Permalink to this headline">¶</a>
</h3>
<p>Processing HTTP headers is not a trivial task because of the escaping and white
space handling of their contents. Symfony provides a
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/HeaderUtils.php" class="reference external" title="Symfony\Component\HttpFoundation\HeaderUtils" rel="external noopener noreferrer" target="_blank">HeaderUtils</a> class that abstracts
this complexity and defines some methods for the most common tasks:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">HeaderUtils</span>;

<span class="hljs-comment">// Splits an HTTP header by one or more separators</span>
HeaderUtils<span class="hljs-operator">::</span>split(<span class="hljs-string">'da, en-gb;q=0.8'</span>, <span class="hljs-string">',;'</span>);
<span class="hljs-comment">// =&gt; [['da'], ['en-gb','q=0.8']]</span>

<span class="hljs-comment">// Combines an array of arrays into one associative array</span>
HeaderUtils<span class="hljs-operator">::</span>combine([[<span class="hljs-string">'foo'</span>, <span class="hljs-string">'abc'</span>], [<span class="hljs-string">'bar'</span>]]);
<span class="hljs-comment">// =&gt; ['foo' =&gt; 'abc', 'bar' =&gt; true]</span>

<span class="hljs-comment">// Joins an associative array into a string for use in an HTTP header</span>
HeaderUtils<span class="hljs-operator">::</span>toString([<span class="hljs-string">'foo'</span> =&gt; <span class="hljs-string">'abc'</span>, <span class="hljs-string">'bar'</span> =&gt; <span class="hljs-keyword">true</span>, <span class="hljs-string">'baz'</span> =&gt; <span class="hljs-string">'a b c'</span>], <span class="hljs-string">','</span>);
<span class="hljs-comment">// =&gt; 'foo=abc, bar, baz="a b c"'</span>

<span class="hljs-comment">// Encodes a string as a quoted string, if necessary</span>
HeaderUtils<span class="hljs-operator">::</span>quote(<span class="hljs-string">'foo "bar"'</span>);
<span class="hljs-comment">// =&gt; '"foo \"bar\""'</span>

<span class="hljs-comment">// Decodes a quoted string</span>
HeaderUtils<span class="hljs-operator">::</span>unquote(<span class="hljs-string">'"foo \"bar\""'</span>);
<span class="hljs-comment">// =&gt; 'foo "bar"'</span>

<span class="hljs-comment">// Parses a query string but maintains dots (PHP parse_str() replaces '.' by '_')</span>
HeaderUtils<span class="hljs-operator">::</span>parseQuery(<span class="hljs-string">'foo[bar.baz]=qux'</span>);
<span class="hljs-comment">// =&gt; ['foo' =&gt; ['bar.baz' =&gt; 'qux']]</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="accessing-accept-headers-data">
    Accessing <code translate="no" class="notranslate">Accept-*</code> Headers Data
    <a class="headerlink" href="#accessing-accept-headers-data" title="Permalink to this headline">¶</a>
</h3>
<p>You can access basic data extracted from <code translate="no" class="notranslate">Accept-*</code> headers
by using the following methods:</p>
<dl>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_getAcceptableContentTypes" class="reference external" title="Symfony\Component\HttpFoundation\Request::getAcceptableContentTypes()" rel="external noopener noreferrer" target="_blank">getAcceptableContentTypes()</a></dt>
        
        <dd>
                            Returns the list of accepted content types ordered by descending quality.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_getLanguages" class="reference external" title="Symfony\Component\HttpFoundation\Request::getLanguages()" rel="external noopener noreferrer" target="_blank">getLanguages()</a></dt>
        
        <dd>
                            Returns the list of accepted languages ordered by descending quality.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_getCharsets" class="reference external" title="Symfony\Component\HttpFoundation\Request::getCharsets()" rel="external noopener noreferrer" target="_blank">getCharsets()</a></dt>
        
        <dd>
                            Returns the list of accepted charsets ordered by descending quality.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_getEncodings" class="reference external" title="Symfony\Component\HttpFoundation\Request::getEncodings()" rel="external noopener noreferrer" target="_blank">getEncodings()</a></dt>
        
        <dd>
                            Returns the list of accepted encodings ordered by descending quality.
                    </dd>
    </dl>
<p>If you need to get full access to parsed data from <code translate="no" class="notranslate">Accept</code>, <code translate="no" class="notranslate">Accept-Language</code>,
<code translate="no" class="notranslate">Accept-Charset</code> or <code translate="no" class="notranslate">Accept-Encoding</code>, you can use
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/AcceptHeader.php" class="reference external" title="Symfony\Component\HttpFoundation\AcceptHeader" rel="external noopener noreferrer" target="_blank">AcceptHeader</a> utility class:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">AcceptHeader</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>acceptHeader</span> = AcceptHeader<span class="hljs-operator">::</span>fromString(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'Accept'</span>));
<span class="hljs-keyword">if</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>acceptHeader</span><span class="hljs-operator">-&gt;</span>has(<span class="hljs-string">'text/html'</span>)) {
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>item</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>acceptHeader</span><span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'text/html'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>charset</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>item</span><span class="hljs-operator">-&gt;</span>getAttribute(<span class="hljs-string">'charset'</span>, <span class="hljs-string">'utf-8'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>quality</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>item</span><span class="hljs-operator">-&gt;</span>getQuality();
}

<span class="hljs-comment">// Accept header items are sorted by descending quality</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>acceptHeaders</span> = AcceptHeader<span class="hljs-operator">::</span>fromString(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'Accept'</span>))
    <span class="hljs-operator">-&gt;</span>all();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The default values that can be optionally included in the <code translate="no" class="notranslate">Accept-*</code> headers
are also supported:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>acceptHeader</span> = <span class="hljs-string">'text/plain;q=0.5, text/html, text/*;q=0.8, */*;q=0.3'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>accept</span> = AcceptHeader<span class="hljs-operator">::</span>fromString(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>acceptHeader</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>quality</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>accept</span><span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'text/xml'</span>)<span class="hljs-operator">-&gt;</span>getQuality(); <span class="hljs-comment">// $quality = 0.8</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>quality</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>accept</span><span class="hljs-operator">-&gt;</span>get(<span class="hljs-string">'application/xml'</span>)<span class="hljs-operator">-&gt;</span>getQuality(); <span class="hljs-comment">// $quality = 0.3</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="anonymizing-ip-addresses">
    Anonymizing IP Addresses
    <a class="headerlink" href="#anonymizing-ip-addresses" title="Permalink to this headline">¶</a>
</h3>
<p>An increasingly common need for applications to comply with user protection
regulations is to anonymize IP addresses before logging and storing them for
analysis purposes. Use the <code translate="no" class="notranslate">anonymize()</code> method from the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/IpUtils.php" class="reference external" title="Symfony\Component\HttpFoundation\IpUtils" rel="external noopener noreferrer" target="_blank">IpUtils</a> to do that:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">IpUtils</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv4</span> = <span class="hljs-string">'123.234.235.236'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>anonymousIpv4</span> = IpUtils<span class="hljs-operator">::</span>anonymize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv4</span>);
<span class="hljs-comment">// $anonymousIpv4 = '123.234.235.0'</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv6</span> = <span class="hljs-string">'2a01:198:603:10:396e:4789:8e99:890f'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>anonymousIpv6</span> = IpUtils<span class="hljs-operator">::</span>anonymize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv6</span>);
<span class="hljs-comment">// $anonymousIpv6 = '2a01:198:603:10::'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="check-if-an-ip-belongs-to-a-private-subnet">
    Check if an IP Belongs to a Private Subnet
    <a class="headerlink" href="#check-if-an-ip-belongs-to-a-private-subnet" title="Permalink to this headline">¶</a>
</h3>
<p>If you need to know if an IP address belongs to a private subnet, you can
use the <code translate="no" class="notranslate">isPrivateIp()</code> method from the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/IpUtils.php" class="reference external" title="Symfony\Component\HttpFoundation\IpUtils" rel="external noopener noreferrer" target="_blank">IpUtils</a> to do that:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">IpUtils</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv4</span> = <span class="hljs-string">'192.168.1.1'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>isPrivate</span> = IpUtils<span class="hljs-operator">::</span>isPrivateIp(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv4</span>);
<span class="hljs-comment">// $isPrivate = true</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv6</span> = <span class="hljs-string">'2a01:198:603:10:396e:4789:8e99:890f'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>isPrivate</span> = IpUtils<span class="hljs-operator">::</span>isPrivateIp(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>ipv6</span>);
<span class="hljs-comment">// $isPrivate = false</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The <code translate="no" class="notranslate">isPrivateIp()</code> method was introduced in Symfony 6.3.</p>
</div>
</div>
<div class="section">
<h3 id="accessing-other-data">
    Accessing other Data
    <a class="headerlink" href="#accessing-other-data" title="Permalink to this headline">¶</a>
</h3>
<p>The <code translate="no" class="notranslate">Request</code> class has many other methods that you can use to access the
request information. Have a look at
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php" class="reference external" title="Symfony\Component\HttpFoundation\Request" rel="external noopener noreferrer" target="_blank">the Request API</a>
for more information about them.</p>
</div>
<div class="section">
<h3 id="overriding-the-request">
    Overriding the Request
    <a class="headerlink" href="#overriding-the-request" title="Permalink to this headline">¶</a>
</h3>
<p>The <code translate="no" class="notranslate">Request</code> class should not be overridden as it is a data object that
represents an HTTP message. But when moving from a legacy system, adding
methods or changing some default behavior might help. In that case, register a
PHP callable that is able to create an instance of your <code translate="no" class="notranslate">Request</code> class:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">SpecialRequest</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Request</span>;

Request<span class="hljs-operator">::</span>setFactory(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(
    array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>query</span> = [],
    array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span> = [],
    array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>attributes</span> = [],
    array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>cookies</span> = [],
    array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>files</span> = [],
    array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>server</span> = [],
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>content</span> = null
)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SpecialRequest(
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>query</span>,
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span>,
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>attributes</span>,
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>cookies</span>,
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>files</span>,
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>server</span>,
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>content</span>
    );
});

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span> = Request<span class="hljs-operator">::</span>createFromGlobals();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="component-http-foundation-response"></span>
</div>
</div>
<div class="section">
<h2 id="response">
    Response
    <a class="headerlink" href="#response" title="Permalink to this headline">¶</a>
</h2>
<p>A <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php" class="reference external" title="Symfony\Component\HttpFoundation\Response" rel="external noopener noreferrer" target="_blank">Response</a> object holds all the
information that needs to be sent back to the client from a given request. The
constructor takes up to three arguments: the response content, the status
code, and an array of HTTP headers:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> Response(
    <span class="hljs-string">'Content'</span>,
    Response<span class="hljs-operator">::</span>HTTP_OK,
    [<span class="hljs-string">'content-type'</span> =&gt; <span class="hljs-string">'text/html'</span>]
);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>This information can also be manipulated after the Response object creation:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setContent(<span class="hljs-string">'Hello World'</span>);

<span class="hljs-comment">// the headers public attribute is a ResponseHeaderBag</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setStatusCode(Response<span class="hljs-operator">::</span>HTTP_NOT_FOUND);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>When setting the <code translate="no" class="notranslate">Content-Type</code> of the Response, you can set the charset,
but it is better to set it via the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setCharset" class="reference external" title="Symfony\Component\HttpFoundation\Response::setCharset()" rel="external noopener noreferrer" target="_blank">setCharset()</a> method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setCharset(<span class="hljs-string">'ISO-8859-1'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Note that by default, Symfony assumes that your Responses are encoded in
UTF-8.</p>
<div class="section">
<h3 id="sending-the-response">
    Sending the Response
    <a class="headerlink" href="#sending-the-response" title="Permalink to this headline">¶</a>
</h3>
<p>Before sending the Response, you can optionally call the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_prepare" class="reference external" title="Symfony\Component\HttpFoundation\Response::prepare()" rel="external noopener noreferrer" target="_blank">prepare()</a> method to fix any
incompatibility with the HTTP specification (e.g. a wrong <code translate="no" class="notranslate">Content-Type</code> header):</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>prepare(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Sending the response to the client is done by calling the method
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_send" class="reference external" title="Symfony\Component\HttpFoundation\Response::send()" rel="external noopener noreferrer" target="_blank">send()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>send();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="setting-cookies">
    Setting Cookies
    <a class="headerlink" href="#setting-cookies" title="Permalink to this headline">¶</a>
</h3>
<p>The response cookies can be manipulated through the <code translate="no" class="notranslate">headers</code> public
attribute:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Cookie</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>setCookie(Cookie<span class="hljs-operator">::</span>create(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>));</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ResponseHeaderBag.php#method_setCookie" class="reference external" title="Symfony\Component\HttpFoundation\ResponseHeaderBag::setCookie()" rel="external noopener noreferrer" target="_blank">setCookie()</a>
method takes an instance of
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Cookie.php" class="reference external" title="Symfony\Component\HttpFoundation\Cookie" rel="external noopener noreferrer" target="_blank">Cookie</a> as an argument.</p>
<p>You can clear a cookie via the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/ResponseHeaderBag.php#method_clearCookie" class="reference external" title="Symfony\Component\HttpFoundation\ResponseHeaderBag::clearCookie()" rel="external noopener noreferrer" target="_blank">clearCookie()</a> method.</p>
<p>In addition to the <code translate="no" class="notranslate">Cookie::create()</code> method, you can create a <code translate="no" class="notranslate">Cookie</code>
object from a raw header value using <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Cookie.php#method_fromString" class="reference external" title="Symfony\Component\HttpFoundation\Cookie::fromString()" rel="external noopener noreferrer" target="_blank">fromString()</a>
method. You can also use the <code translate="no" class="notranslate">with*()</code> methods to change some Cookie property (or
to build the entire Cookie using a fluent interface). Each <code translate="no" class="notranslate">with*()</code> method returns
a new object with the modified property:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>cookie</span> = Cookie<span class="hljs-operator">::</span>create(<span class="hljs-string">'foo'</span>)
    <span class="hljs-operator">-&gt;</span>withValue(<span class="hljs-string">'bar'</span>)
    <span class="hljs-operator">-&gt;</span>withExpires(strtotime(<span class="hljs-string">'Fri, 20-May-2011 15:25:52 GMT'</span>))
    <span class="hljs-operator">-&gt;</span>withDomain(<span class="hljs-string">'.example.com'</span>)
    <span class="hljs-operator">-&gt;</span>withSecure(<span class="hljs-keyword">true</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="managing-the-http-cache">
    Managing the HTTP Cache
    <a class="headerlink" href="#managing-the-http-cache" title="Permalink to this headline">¶</a>
</h3>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php" class="reference external" title="Symfony\Component\HttpFoundation\Response" rel="external noopener noreferrer" target="_blank">Response</a> class has a rich set
of methods to manipulate the HTTP headers related to the cache:</p>
<ul>
    <li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setPublic" class="reference external" title="Symfony\Component\HttpFoundation\Response::setPublic()" rel="external noopener noreferrer" target="_blank">setPublic()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setPrivate" class="reference external" title="Symfony\Component\HttpFoundation\Response::setPrivate()" rel="external noopener noreferrer" target="_blank">setPrivate()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_expire" class="reference external" title="Symfony\Component\HttpFoundation\Response::expire()" rel="external noopener noreferrer" target="_blank">expire()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setExpires" class="reference external" title="Symfony\Component\HttpFoundation\Response::setExpires()" rel="external noopener noreferrer" target="_blank">setExpires()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setMaxAge" class="reference external" title="Symfony\Component\HttpFoundation\Response::setMaxAge()" rel="external noopener noreferrer" target="_blank">setMaxAge()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setSharedMaxAge" class="reference external" title="Symfony\Component\HttpFoundation\Response::setSharedMaxAge()" rel="external noopener noreferrer" target="_blank">setSharedMaxAge()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setStaleIfError" class="reference external" title="Symfony\Component\HttpFoundation\Response::setStaleIfError()" rel="external noopener noreferrer" target="_blank">setStaleIfError()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setStaleWhileRevalidate" class="reference external" title="Symfony\Component\HttpFoundation\Response::setStaleWhileRevalidate()" rel="external noopener noreferrer" target="_blank">setStaleWhileRevalidate()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setTtl" class="reference external" title="Symfony\Component\HttpFoundation\Response::setTtl()" rel="external noopener noreferrer" target="_blank">setTtl()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setClientTtl" class="reference external" title="Symfony\Component\HttpFoundation\Response::setClientTtl()" rel="external noopener noreferrer" target="_blank">setClientTtl()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setLastModified" class="reference external" title="Symfony\Component\HttpFoundation\Response::setLastModified()" rel="external noopener noreferrer" target="_blank">setLastModified()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setEtag" class="reference external" title="Symfony\Component\HttpFoundation\Response::setEtag()" rel="external noopener noreferrer" target="_blank">setEtag()</a></li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setVary" class="reference external" title="Symfony\Component\HttpFoundation\Response::setVary()" rel="external noopener noreferrer" target="_blank">setVary()</a></li>
</ul>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The methods <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setExpires" class="reference external" title="Symfony\Component\HttpFoundation\Response::setExpires()" rel="external noopener noreferrer" target="_blank">setExpires()</a>,
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setLastModified" class="reference external" title="Symfony\Component\HttpFoundation\Response::setLastModified()" rel="external noopener noreferrer" target="_blank">setLastModified()</a> and
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setDate" class="reference external" title="Symfony\Component\HttpFoundation\Response::setDate()" rel="external noopener noreferrer" target="_blank">setDate()</a> accept any
object that implements <code translate="no" class="notranslate">\DateTimeInterface</code>, including immutable date objects.</p>
</div>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setCache" class="reference external" title="Symfony\Component\HttpFoundation\Response::setCache()" rel="external noopener noreferrer" target="_blank">setCache()</a> method
can be used to set the most commonly used cache information in one method
call:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setCache([
    <span class="hljs-string">'must_revalidate'</span>  =&gt; <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'no_cache'</span>         =&gt; <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'no_store'</span>         =&gt; <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'no_transform'</span>     =&gt; <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'public'</span>           =&gt; <span class="hljs-keyword">true</span>,
    <span class="hljs-string">'private'</span>          =&gt; <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'proxy_revalidate'</span> =&gt; <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'max_age'</span>          =&gt; <span class="hljs-number">600</span>,
    <span class="hljs-string">'s_maxage'</span>         =&gt; <span class="hljs-number">600</span>,
    <span class="hljs-string">'stale_if_error'</span>   =&gt; <span class="hljs-number">86400</span>,
    <span class="hljs-string">'stale_while_revalidate'</span> =&gt; <span class="hljs-number">60</span>,
    <span class="hljs-string">'immutable'</span>        =&gt; <span class="hljs-keyword">true</span>,
    <span class="hljs-string">'last_modified'</span>    =&gt; <span class="hljs-keyword">new</span> \DateTime(),
    <span class="hljs-string">'etag'</span>             =&gt; <span class="hljs-string">'abcdef'</span>,
]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.1</span>
    </p><p>The <code translate="no" class="notranslate">stale_if_error</code> and <code translate="no" class="notranslate">stale_while_revalidate</code> options were
introduced in Symfony 6.1.</p>
</div>
<p>To check if the Response validators (<code translate="no" class="notranslate">ETag</code>, <code translate="no" class="notranslate">Last-Modified</code>) match a
conditional value specified in the client Request, use the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_isNotModified" class="reference external" title="Symfony\Component\HttpFoundation\Response::isNotModified()" rel="external noopener noreferrer" target="_blank">isNotModified()</a>
method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">if</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>isNotModified(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span>)) {
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>send();
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>If the Response is not modified, it sets the status code to 304 and removes the
actual response content.</p>
<span id="redirect-response"></span>
</div>
<div class="section">
<h3 id="redirecting-the-user">
    Redirecting the User
    <a class="headerlink" href="#redirecting-the-user" title="Permalink to this headline">¶</a>
</h3>
<p>To redirect the client to another URL, you can use the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/RedirectResponse.php" class="reference external" title="Symfony\Component\HttpFoundation\RedirectResponse" rel="external noopener noreferrer" target="_blank">RedirectResponse</a> class:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">RedirectResponse</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> RedirectResponse(<span class="hljs-string">'http://example.com/'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="streaming-response"></span>
</div>
<div class="section">
<h3 id="streaming-a-response">
    Streaming a Response
    <a class="headerlink" href="#streaming-a-response" title="Permalink to this headline">¶</a>
</h3>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/StreamedResponse.php" class="reference external" title="Symfony\Component\HttpFoundation\StreamedResponse" rel="external noopener noreferrer" target="_blank">StreamedResponse</a> class allows
you to stream the Response back to the client. The response content is
represented by a PHP callable instead of a string:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">StreamedResponse</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> StreamedResponse();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setCallback(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    var_dump(<span class="hljs-string">'Hello World'</span>);
    flush();
    sleep(<span class="hljs-number">2</span>);
    var_dump(<span class="hljs-string">'Hello World'</span>);
    flush();
});
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>send();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The <code translate="no" class="notranslate">flush()</code> function does not flush buffering. If <code translate="no" class="notranslate">ob_start()</code> has
been called before or the <code translate="no" class="notranslate">output_buffering</code> <code translate="no" class="notranslate">php.ini</code> option is enabled,
you must call <code translate="no" class="notranslate">ob_flush()</code> before <code translate="no" class="notranslate">flush()</code>.</p>
<p>Additionally, PHP isn't the only layer that can buffer output. Your web
server might also buffer based on its configuration. Some servers, such as
nginx, let you disable buffering at the config level or by adding a special HTTP
header in the response:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// disables FastCGI buffering in nginx only for this response</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'X-Accel-Buffering'</span>, <span class="hljs-string">'no'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<span id="component-http-foundation-serving-files"></span>
</div>
<div class="section">
<h3 id="serving-files">
    Serving Files
    <a class="headerlink" href="#serving-files" title="Permalink to this headline">¶</a>
</h3>
<p>When sending a file, you must add a <code translate="no" class="notranslate">Content-Disposition</code> header to your
response. While creating this header for basic file downloads is straightforward,
using non-ASCII filenames is more involved. The
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/HeaderUtils.php#method_makeDisposition" class="reference external" title="Symfony\Component\HttpFoundation\HeaderUtils::makeDisposition()" rel="external noopener noreferrer" target="_blank">makeDisposition()</a>
abstracts the hard work behind a simple API:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">HeaderUtils</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">ResponseHeaderBag</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>fileContent</span> = ...; <span class="hljs-comment">// the generated file content</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> Response(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>fileContent</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>disposition</span> = HeaderUtils<span class="hljs-operator">::</span>makeDisposition(
    HeaderUtils<span class="hljs-operator">::</span>DISPOSITION_ATTACHMENT,
    <span class="hljs-string">'foo.pdf'</span>
);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'Content-Disposition'</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>disposition</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Alternatively, if you are serving a static file, you can use a
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php" class="reference external" title="Symfony\Component\HttpFoundation\BinaryFileResponse" rel="external noopener noreferrer" target="_blank">BinaryFileResponse</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">BinaryFileResponse</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>file</span> = <span class="hljs-string">'path/to/file.txt'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> BinaryFileResponse(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>file</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <code translate="no" class="notranslate">BinaryFileResponse</code> will automatically handle <code translate="no" class="notranslate">Range</code> and
<code translate="no" class="notranslate">If-Range</code> headers from the request. It also supports <code translate="no" class="notranslate">X-Sendfile</code>
(see for <a href="https://www.nginx.com/resources/wiki/start/topics/examples/xsendfile/" class="reference external" rel="external noopener noreferrer" target="_blank">nginx</a> and <a href="https://tn123.org/mod_xsendfile/" class="reference external" rel="external noopener noreferrer" target="_blank">Apache</a>). To make use of it, you need to determine
whether or not the <code translate="no" class="notranslate">X-Sendfile-Type</code> header should be trusted and call
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php#method_trustXSendfileTypeHeader" class="reference external" title="Symfony\Component\HttpFoundation\BinaryFileResponse::trustXSendfileTypeHeader()" rel="external noopener noreferrer" target="_blank">trustXSendfileTypeHeader()</a>
if it should:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php">BinaryFileResponse<span class="hljs-operator">::</span>trustXSendfileTypeHeader();</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The <code translate="no" class="notranslate">BinaryFileResponse</code> will only handle <code translate="no" class="notranslate">X-Sendfile</code> if the particular header is present.
For Apache, this is not the default case.</p>
<p>To add the header use the <code translate="no" class="notranslate">mod_headers</code> Apache module and add the following to the Apache configuration:</p>
<div translate="no" class="highlight-apache notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs apache"><span class="hljs-section">&lt;IfModule mod_xsendfile.c&gt;</span>
  <span class="hljs-comment"># This is already present somewhere...</span>
  <span class="hljs-attribute">XSendFile</span> <span class="hljs-literal">on</span>
  <span class="hljs-attribute">XSendFilePath</span> ...some path...

  <span class="hljs-comment"># This needs to be added:</span>
  <span class="hljs-section">&lt;IfModule mod_headers.c&gt;</span>
    <span class="hljs-attribute">RequestHeader</span> set X-Sendfile-Type X-Sendfile
  <span class="hljs-section">&lt;/IfModule&gt;</span>
<span class="hljs-section">&lt;/IfModule&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<p>With the <code translate="no" class="notranslate">BinaryFileResponse</code>, you can still set the <code translate="no" class="notranslate">Content-Type</code> of the sent file,
or change its <code translate="no" class="notranslate">Content-Disposition</code>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// ...</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setContentDisposition(
    ResponseHeaderBag<span class="hljs-operator">::</span>DISPOSITION_ATTACHMENT,
    <span class="hljs-string">'filename.txt'</span>
);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>It is possible to delete the file after the response is sent with the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/BinaryFileResponse.php#method_deleteFileAfterSend" class="reference external" title="Symfony\Component\HttpFoundation\BinaryFileResponse::deleteFileAfterSend()" rel="external noopener noreferrer" target="_blank">deleteFileAfterSend()</a> method.
Please note that this will not work when the <code translate="no" class="notranslate">X-Sendfile</code> header is set.</p>
<p>If the size of the served file is unknown (e.g. because it's being generated on the fly,
or because a PHP stream filter is registered on it, etc.), you can pass a <code translate="no" class="notranslate">Stream</code>
instance to <code translate="no" class="notranslate">BinaryFileResponse</code>. This will disable <code translate="no" class="notranslate">Range</code> and <code translate="no" class="notranslate">Content-Length</code>
handling, switching to chunked encoding instead:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">BinaryFileResponse</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">File</span>\<span class="hljs-title">Stream</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>stream</span> = <span class="hljs-keyword">new</span> Stream(<span class="hljs-string">'path/to/stream'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> BinaryFileResponse(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>stream</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>If you <em>just</em> created the file during this same request, the file <em>may</em> be sent
without any content. This may be due to cached file stats that return zero for
the size of the file. To fix this issue, call <code translate="no" class="notranslate">clearstatcache(true, $file)</code>
with the path to the binary file.</p>
</div>
<span id="component-http-foundation-json-response"></span>
</div>
<div class="section">
<h3 id="creating-a-json-response">
    Creating a JSON Response
    <a class="headerlink" href="#creating-a-json-response" title="Permalink to this headline">¶</a>
</h3>
<p>Any type of response can be created via the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php" class="reference external" title="Symfony\Component\HttpFoundation\Response" rel="external noopener noreferrer" target="_blank">Response</a> class by setting the
right content and headers. A JSON response might look like this:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> Response();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setContent(json_encode([
    <span class="hljs-string">'data'</span> =&gt; <span class="hljs-number">123</span>,
]));
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>headers<span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>There is also a helpful <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/JsonResponse.php" class="reference external" title="Symfony\Component\HttpFoundation\JsonResponse" rel="external noopener noreferrer" target="_blank">JsonResponse</a>
class, which can make this even easier:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">JsonResponse</span>;

<span class="hljs-comment">// if you know the data to send when creating the response</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> JsonResponse([<span class="hljs-string">'data'</span> =&gt; <span class="hljs-number">123</span>]);

<span class="hljs-comment">// if you don't know the data to send or if you want to customize the encoding options</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> JsonResponse();
<span class="hljs-comment">// ...</span>
<span class="hljs-comment">// configure any custom encoding options (if needed, it must be called before "setData()")</span>
<span class="hljs-comment">//$response-&gt;setEncodingOptions(JsonResponse::DEFAULT_ENCODING_OPTIONS | \JSON_PRESERVE_ZERO_FRACTION);</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setData([<span class="hljs-string">'data'</span> =&gt; <span class="hljs-number">123</span>]);

<span class="hljs-comment">// if the data to send is already encoded in JSON</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = JsonResponse<span class="hljs-operator">::</span>fromJsonString(<span class="hljs-string">'{ "data": 123 }'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <code translate="no" class="notranslate">JsonResponse</code> class sets the <code translate="no" class="notranslate">Content-Type</code> header to
<code translate="no" class="notranslate">application/json</code> and encodes your data to JSON when needed.</p>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>To avoid XSSI <a href="https://haacked.com/archive/2009/06/25/json-hijacking.aspx/" class="reference external" rel="external noopener noreferrer" target="_blank">JSON Hijacking</a>, you should pass an associative array
as the outermost array to <code translate="no" class="notranslate">JsonResponse</code> and not an indexed array so
that the final result is an object (e.g. <code translate="no" class="notranslate">{&quot;object&quot;: &quot;not inside an array&quot;}</code>)
instead of an array (e.g. <code translate="no" class="notranslate">[{&quot;object&quot;: &quot;inside an array&quot;}]</code>). Read
the <a href="https://cheatsheetseries.owasp.org/cheatsheets/AJAX_Security_Cheat_Sheet.html#always-return-json-with-an-object-on-the-outside" class="reference external" rel="external noopener noreferrer" target="_blank">OWASP guidelines</a> for more information.</p>
<p>Only methods that respond to GET requests are vulnerable to XSSI 'JSON Hijacking'.
Methods responding to POST requests only remain unaffected.</p>
</div>
</div>
<div class="section">
<h3 id="jsonp-callback">
    JSONP Callback
    <a class="headerlink" href="#jsonp-callback" title="Permalink to this headline">¶</a>
</h3>
<p>If you're using JSONP, you can set the callback function that the data should
be passed to:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setCallback(<span class="hljs-string">'handleResponse'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>In this case, the <code translate="no" class="notranslate">Content-Type</code> header will be <code translate="no" class="notranslate">text/javascript</code> and
the response content will look like this:</p>
<div translate="no" class="highlight-javascript notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs javascript">handleResponse({<span class="hljs-string">'data'</span>: <span class="hljs-number">123</span>});</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
<div class="section">
<h2 id="session">
    Session
    <a class="headerlink" href="#session" title="Permalink to this headline">¶</a>
</h2>
<p>The session information is in its own document: <a href="../session.html" class="reference internal">Sessions</a>.</p>
</div>
<div class="section">
<h2 id="safe-content-preference">
    Safe Content Preference
    <a class="headerlink" href="#safe-content-preference" title="Permalink to this headline">¶</a>
</h2>
<p>Some web sites have a &quot;safe&quot; mode to assist those who don't want to be exposed
to content to which they might object. The  <a href="https://tools.ietf.org/html/rfc8674" class="reference external" rel="external noopener noreferrer" target="_blank">RFC 8674</a> specification defines a
way for user agents to ask for safe content to a server.</p>
<p>The specification does not define what content might be considered objectionable,
so the concept of &quot;safe&quot; is not precisely defined. Rather, the term is interpreted
by the server and within the scope of each web site that chooses to act upon this information.</p>
<p>Symfony offers two methods to interact with this preference:</p>
<ul>
    <li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Request.php#method_preferSafeContent" class="reference external" title="Symfony\Component\HttpFoundation\Request::preferSafeContent()" rel="external noopener noreferrer" target="_blank">preferSafeContent()</a>;</li>
<li><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/Response.php#method_setContentSafe" class="reference external" title="Symfony\Component\HttpFoundation\Response::setContentSafe()" rel="external noopener noreferrer" target="_blank">setContentSafe()</a>;</li>
</ul>
<p>The following example shows how to detect if the user agent prefers &quot;safe&quot; content:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">if</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>preferSafeContent()) {
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span> = <span class="hljs-keyword">new</span> Response(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>alternativeContent</span>);
    <span class="hljs-comment">// this informs the user we respected their preferences</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span><span class="hljs-operator">-&gt;</span>setContentSafe();

    <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>response</span>;</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="generating-relative-and-absolute-urls">
    Generating Relative and Absolute URLs
    <a class="headerlink" href="#generating-relative-and-absolute-urls" title="Permalink to this headline">¶</a>
</h2>
<p>Generating absolute and relative URLs for a given path is a common need
in some applications. In Twig templates you can use the
<a href="../reference/twig_reference.html#reference-twig-function-absolute-url" class="reference internal">absolute_url()</a> and
<a href="../reference/twig_reference.html#reference-twig-function-relative-path" class="reference internal">relative_path()</a> functions to do that.</p>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpFoundation/UrlHelper.php" class="reference external" title="Symfony\Component\HttpFoundation\UrlHelper" rel="external noopener noreferrer" target="_blank">UrlHelper</a> class provides the
same functionality for PHP code via the <code translate="no" class="notranslate">getAbsoluteUrl()</code> and <code translate="no" class="notranslate">getRelativePath()</code>
methods. You can inject this as a service anywhere in your application:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Normalizer/UserApiNormalizer.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Normalizer</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">UrlHelper</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserApiNormalizer</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private UrlHelper <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>urlHelper</span>,
    )</span> </span>{
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalize</span><span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>user</span>)</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'avatar'</span> =&gt; <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>urlHelper<span class="hljs-operator">-&gt;</span>getAbsoluteUrl(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>user</span><span class="hljs-operator">-&gt;</span>avatar()<span class="hljs-operator">-&gt;</span>path()),
        ];
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="learn-more">
    Learn More
    <a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a>
</h2>
<div class="toctree-wrapper toc-size-lg"><ul class="toctree toctree-level-1 toctree-length-14"><li><a href="../controller.html">Controller</a></li><li><a href="../controller/error_pages.html">How to Customize Error Pages</a></li><li><a href="../controller/forwarding.html">How to Forward Requests to another Controller</a></li><li><a href="../controller/service.html">How to Define Controllers as Services</a></li><li><a href="../controller/upload_file.html">How to Upload Files</a></li><li><a href="../controller/value_resolver.html">Extending Action Argument Resolving</a></li><li><a href="../session.html">Sessions</a></li><li><a href="../http_cache/cache_invalidation.html">Cache Invalidation</a></li><li><a href="../http_cache/cache_vary.html">Varying the Response for HTTP Cache</a></li><li><a href="../http_cache/esi.html">Working with Edge Side Includes</a></li><li><a href="../http_cache/expiration.html">HTTP Cache Expiration</a></li><li><a href="../http_cache/ssi.html">Working with Server Side Includes</a></li><li><a href="../http_cache/validation.html">HTTP Cache Validation</a></li><li><a href="../http_cache/varnish.html">How to Use Varnish to Speed up my Website</a></li></ul></div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>