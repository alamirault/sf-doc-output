        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="question-helper">
    Question Helper
    <a class="headerlink" href="#question-helper" title="Permalink to this headline">¶</a>
</h1>
<p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Helper/QuestionHelper.php" class="reference external" title="Symfony\Component\Console\Helper\QuestionHelper" rel="external noopener noreferrer" target="_blank">QuestionHelper</a> provides
functions to ask the user for more information. It is included in the default
helper set and you can get it by calling
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Command/Command.php#method_getHelper" class="reference external" title="Symfony\Component\Console\Command\Command::getHelper()" rel="external noopener noreferrer" target="_blank">getHelper()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The Question Helper has a single method
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Helper/QuestionHelper.php#method_ask" class="reference external" title="Symfony\Component\Console\Helper\QuestionHelper::ask()" rel="external noopener noreferrer" target="_blank">ask()</a> that needs an
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Input/InputInterface.php" class="reference external" title="Symfony\Component\Console\Input\InputInterface" rel="external noopener noreferrer" target="_blank">InputInterface</a> instance as the
first argument, an <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Output/OutputInterface.php" class="reference external" title="Symfony\Component\Console\Output\OutputInterface" rel="external noopener noreferrer" target="_blank">OutputInterface</a>
instance as the second argument and a
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/Question.php" class="reference external" title="Symfony\Component\Console\Question\Question" rel="external noopener noreferrer" target="_blank">Question</a> as last argument.</p>
<div class="section">
<h2 id="asking-the-user-for-confirmation">
    Asking the User for Confirmation
    <a class="headerlink" href="#asking-the-user-for-confirmation" title="Permalink to this headline">¶</a>
</h2>
<p>Suppose you want to confirm an action before actually executing it. Add
the following to your command:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Command</span>\<span class="hljs-title">Command</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Input</span>\<span class="hljs-title">InputInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Output</span>\<span class="hljs-title">OutputInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">ConfirmationQuestion</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">YourCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Command</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> ConfirmationQuestion(<span class="hljs-string">'Continue with this action?'</span>, <span class="hljs-keyword">false</span>);

        <span class="hljs-keyword">if</span> (!<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>)) {
            <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
        }

        <span class="hljs-comment">// ... do something here</span>

        <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>In this case, the user will be asked &quot;Continue with this action?&quot;. If the user
answers with <code translate="no" class="notranslate">y</code> it returns <code translate="no" class="notranslate">true</code> or <code translate="no" class="notranslate">false</code> if they answer with <code translate="no" class="notranslate">n</code>.
The second argument to
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/ConfirmationQuestion.php#method___construct" class="reference external" title="Symfony\Component\Console\Question\ConfirmationQuestion::__construct()" rel="external noopener noreferrer" target="_blank">__construct()</a>
is the default value to return if the user doesn't enter any valid input. If
the second argument is not provided, <code translate="no" class="notranslate">true</code> is assumed.</p>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>You can customize the regex used to check if the answer means &quot;yes&quot; in the
third argument of the constructor. For instance, to allow anything that
starts with either <code translate="no" class="notranslate">y</code> or <code translate="no" class="notranslate">j</code>, you would set it to:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> ConfirmationQuestion(
    <span class="hljs-string">'Continue with this action?'</span>,
    <span class="hljs-keyword">false</span>,
    <span class="hljs-string">'/^(y|j)/i'</span>
);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The regex defaults to <code translate="no" class="notranslate">/^y/i</code>.</p>
</div>
</div>
<div class="section">
<h2 id="asking-the-user-for-information">
    Asking the User for Information
    <a class="headerlink" href="#asking-the-user-for-information" title="Permalink to this headline">¶</a>
</h2>
<p>You can also ask a question with more than a simple yes/no answer. For instance,
if you want to know a bundle name, you can add this to your command:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'Please enter the name of the bundle'</span>, <span class="hljs-string">'AcmeDemoBundle'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bundleName</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the bundleName</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The user will be asked &quot;Please enter the name of the bundle&quot;. They can type
some name which will be returned by the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Helper/QuestionHelper.php#method_ask" class="reference external" title="Symfony\Component\Console\Helper\QuestionHelper::ask()" rel="external noopener noreferrer" target="_blank">ask()</a> method.
If they leave it empty, the default value (<code translate="no" class="notranslate">AcmeDemoBundle</code> here) is returned.</p>
<div class="section">
<h3 id="let-the-user-choose-from-a-list-of-answers">
    Let the User Choose from a List of Answers
    <a class="headerlink" href="#let-the-user-choose-from-a-list-of-answers" title="Permalink to this headline">¶</a>
</h3>
<p>If you have a predefined set of answers the user can choose from, you
could use a <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/ChoiceQuestion.php" class="reference external" title="Symfony\Component\Console\Question\ChoiceQuestion" rel="external noopener noreferrer" target="_blank">ChoiceQuestion</a>
which makes sure that the user can only enter a valid string
from a predefined list:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">ChoiceQuestion</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> ChoiceQuestion(
        <span class="hljs-string">'Please select your favorite color (defaults to red)'</span>,
        <span class="hljs-comment">// choices can also be PHP objects that implement __toString() method</span>
        [<span class="hljs-string">'red'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'yellow'</span>],
        <span class="hljs-number">0</span>
    );
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setErrorMessage(<span class="hljs-string">'Color %s is invalid.'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>color</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span><span class="hljs-operator">-&gt;</span>writeln(<span class="hljs-string">'You have just selected: '</span>.<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>color</span>);

    <span class="hljs-comment">// ... do something with the color</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The option which should be selected by default is provided with the third
argument of the constructor. The default is <code translate="no" class="notranslate">null</code>, which means that no
option is the default one.</p>
<p>If the user enters an invalid string, an error message is shown and the user
is asked to provide the answer another time, until they enter a valid string
or reach the maximum number of attempts. The default value for the maximum number
of attempts is <code translate="no" class="notranslate">null</code>, which means an infinite number of attempts. You can define
your own error message using
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/ChoiceQuestion.php#method_setErrorMessage" class="reference external" title="Symfony\Component\Console\Question\ChoiceQuestion::setErrorMessage()" rel="external noopener noreferrer" target="_blank">setErrorMessage()</a>.</p>
<div class="section">
<h4 id="multiple-choices">
    Multiple Choices
    <a class="headerlink" href="#multiple-choices" title="Permalink to this headline">¶</a>
</h4>
<p>Sometimes, multiple answers can be given. The <code translate="no" class="notranslate">ChoiceQuestion</code> provides this
feature using comma separated values. This is disabled by default, to enable
this use <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/ChoiceQuestion.php#method_setMultiselect" class="reference external" title="Symfony\Component\Console\Question\ChoiceQuestion::setMultiselect()" rel="external noopener noreferrer" target="_blank">setMultiselect()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">ChoiceQuestion</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> ChoiceQuestion(
        <span class="hljs-string">'Please select your favorite colors (defaults to red and blue)'</span>,
        [<span class="hljs-string">'red'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'yellow'</span>],
        <span class="hljs-string">'0,1'</span>
    );
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setMultiselect(<span class="hljs-keyword">true</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>colors</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span><span class="hljs-operator">-&gt;</span>writeln(<span class="hljs-string">'You have just selected: '</span> . implode(<span class="hljs-string">', '</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>colors</span>));
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Now, when the user enters <code translate="no" class="notranslate">1,2</code>, the result will be:
<code translate="no" class="notranslate">You have just selected: blue, yellow</code>.</p>
<p>If the user does not enter anything, the result will be:
<code translate="no" class="notranslate">You have just selected: red, blue</code>.</p>
</div>
</div>
<div class="section">
<h3 id="autocompletion">
    Autocompletion
    <a class="headerlink" href="#autocompletion" title="Permalink to this headline">¶</a>
</h3>
<p>You can also specify an array of potential answers for a given question. These
will be autocompleted as the user types:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bundles</span> = [<span class="hljs-string">'AcmeDemoBundle'</span>, <span class="hljs-string">'AcmeBlogBundle'</span>, <span class="hljs-string">'AcmeStoreBundle'</span>];
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'Please enter the name of a bundle'</span>, <span class="hljs-string">'FooBundle'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setAutocompleterValues(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bundles</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bundleName</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the bundleName</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>In more complex use cases, it may be necessary to generate suggestions on the
fly, for instance if you wish to autocomplete a file path. In that case, you can
provide a callback function to dynamically generate suggestions:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-comment">// This function is called whenever the input changes and new</span>
    <span class="hljs-comment">// suggestions are needed.</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>callback</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>userInput</span>)</span>: <span class="hljs-title">array</span> </span>{
        <span class="hljs-comment">// Strip any characters from the last slash to the end of the string</span>
        <span class="hljs-comment">// to keep only the last directory and generate suggestions for it</span>
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inputPath</span> = preg_replace(<span class="hljs-string">'%(/|^)[^/]*$%'</span>, <span class="hljs-string">'$1'</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>userInput</span>);
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inputPath</span> = <span class="hljs-string">''</span> === <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inputPath</span> ? <span class="hljs-string">'.'</span> : <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inputPath</span>;

        <span class="hljs-comment">// CAUTION - this example code allows unrestricted access to the</span>
        <span class="hljs-comment">// entire filesystem. In real applications, restrict the directories</span>
        <span class="hljs-comment">// where files and dirs can be found</span>
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foundFilesAndDirs</span> = @scandir(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inputPath</span>) ?: [];

        <span class="hljs-keyword">return</span> array_map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>dirOrFile</span>)</span> <span class="hljs-title">use</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inputPath</span>)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inputPath</span>.<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>dirOrFile</span>;
        }, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foundFilesAndDirs</span>);
    };

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'Please provide the full path of a file to parse'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setAutocompleterCallback(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>callback</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>filePath</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the filePath</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="do-not-trim-the-answer">
    Do not Trim the Answer
    <a class="headerlink" href="#do-not-trim-the-answer" title="Permalink to this headline">¶</a>
</h3>
<p>You can also specify if you want to not trim the answer by setting it directly with
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/Question.php#method_setTrimmable" class="reference external" title="Symfony\Component\Console\Question\Question::setTrimmable()" rel="external noopener noreferrer" target="_blank">setTrimmable()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'What is the name of the child?'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setTrimmable(<span class="hljs-keyword">false</span>);
    <span class="hljs-comment">// if the users inputs 'elsa ' it will not be trimmed and you will get 'elsa ' as value</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the name</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="accept-multiline-answers">
    Accept Multiline Answers
    <a class="headerlink" href="#accept-multiline-answers" title="Permalink to this headline">¶</a>
</h3>
<p>By default, the question helper stops reading user input when it receives a newline
character (i.e., when the user hits <code translate="no" class="notranslate">ENTER</code> once). However, you may specify that
the response to a question should allow multiline answers by passing <code translate="no" class="notranslate">true</code> to
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/Question.php#method_setMultiline" class="reference external" title="Symfony\Component\Console\Question\Question::setMultiline()" rel="external noopener noreferrer" target="_blank">setMultiline()</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'How do you solve world peace?'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setMultiline(<span class="hljs-keyword">true</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>answer</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the answer</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Multiline questions stop reading user input after receiving an end-of-transmission
control character (<code translate="no" class="notranslate">Ctrl-D</code> on Unix systems or <code translate="no" class="notranslate">Ctrl-Z</code> on Windows).</p>
</div>
<div class="section">
<h3 id="hiding-the-user-s-response">
    Hiding the User's Response
    <a class="headerlink" href="#hiding-the-user-s-response" title="Permalink to this headline">¶</a>
</h3>
<p>You can also ask a question and hide the response. This is particularly
convenient for passwords:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'What is the database password?'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setHidden(<span class="hljs-keyword">true</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setHiddenFallback(<span class="hljs-keyword">false</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>password</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the password</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>When you ask for a hidden response, Symfony will use either a binary, change
<code translate="no" class="notranslate">stty</code> mode or use another trick to hide the response. If none is available,
it will fallback and allow the response to be visible unless you set this
behavior to <code translate="no" class="notranslate">false</code> using
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/Question.php#method_setHiddenFallback" class="reference external" title="Symfony\Component\Console\Question\Question::setHiddenFallback()" rel="external noopener noreferrer" target="_blank">setHiddenFallback()</a>
like in the example above. In this case, a <code translate="no" class="notranslate">RuntimeException</code>
would be thrown.</p>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The <code translate="no" class="notranslate">stty</code> command is used to get and set properties of the command line
(such as getting the number of rows and columns or hiding the input text).
On Windows systems, this <code translate="no" class="notranslate">stty</code> command may generate gibberish output and
mangle the input text. If that's your case, disable it with this command:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Helper</span>\<span class="hljs-title">QuestionHelper</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">ChoiceQuestion</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);
    QuestionHelper<span class="hljs-operator">::</span>disableStty();

    <span class="hljs-comment">// ...</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
</div>
<div class="section">
<h2 id="normalizing-the-answer">
    Normalizing the Answer
    <a class="headerlink" href="#normalizing-the-answer" title="Permalink to this headline">¶</a>
</h2>
<p>Before validating the answer, you can &quot;normalize&quot; it to fix minor errors or
tweak it as needed. For instance, in a previous example you asked for the bundle
name. In case the user adds white spaces around the name by mistake, you can
trim the name before validating it. To do so, configure a normalizer using the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/Question.php#method_setNormalizer" class="reference external" title="Symfony\Component\Console\Question\Question::setNormalizer()" rel="external noopener noreferrer" target="_blank">setNormalizer()</a>
method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'Please enter the name of the bundle'</span>, <span class="hljs-string">'AcmeDemoBundle'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setNormalizer(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>)</span> </span>{
        <span class="hljs-comment">// $value can be null here</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span> ? trim(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>) : <span class="hljs-string">''</span>;
    });

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bundleName</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the bundleName</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>The normalizer is called first and the returned value is used as the input
of the validator. If the answer is invalid, don't throw exceptions in the
normalizer and let the validator handle those errors.</p>
</div>
<span id="console-validate-question-answer"></span>
</div>
<div class="section">
<h2 id="validating-the-answer">
    Validating the Answer
    <a class="headerlink" href="#validating-the-answer" title="Permalink to this headline">¶</a>
</h2>
<p>You can even validate the answer. For instance, in a previous example you asked
for the bundle name. Following the Symfony naming conventions, it should
be suffixed with <code translate="no" class="notranslate">Bundle</code>. You can validate that by using the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/Question.php#method_setValidator" class="reference external" title="Symfony\Component\Console\Question\Question::setValidator()" rel="external noopener noreferrer" target="_blank">setValidator()</a>
method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'Please enter the name of the bundle'</span>, <span class="hljs-string">'AcmeDemoBundle'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setValidator(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>answer</span>)</span> </span>{
        <span class="hljs-keyword">if</span> (!is_string(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>answer</span>) || <span class="hljs-string">'Bundle'</span> !== substr(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>answer</span>, <span class="hljs-number">-6</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> \RuntimeException(
                <span class="hljs-string">'The name of the bundle should be suffixed with \'Bundle\''</span>
            );
        }

        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>answer</span>;
    });
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setMaxAttempts(<span class="hljs-number">2</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bundleName</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the bundleName</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <code translate="no" class="notranslate">$validator</code> is a callback which handles the validation. It should
throw an exception if there is something wrong. The exception message is displayed
in the console, so it is a good practice to put some useful information in it. The
callback function should also return the value of the user's input if the validation
was successful.</p>
<p>You can set the max number of times to ask with the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Question/Question.php#method_setMaxAttempts" class="reference external" title="Symfony\Component\Console\Question\Question::setMaxAttempts()" rel="external noopener noreferrer" target="_blank">setMaxAttempts()</a> method.
If you reach this max number it will use the default value. Using <code translate="no" class="notranslate">null</code> means
the number of attempts is infinite. The user will be asked as long as they provide an
invalid answer and will only be able to proceed if their input is valid.</p>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>You can even use the <a href="../../../validation.html" class="reference internal">Validator</a> component to
validate the input by using the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Validator/Validation.php#method_createCallable" class="reference external" title="Symfony\Component\Validator\Validation::createCallable()" rel="external noopener noreferrer" target="_blank">createCallable()</a>
method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span>\<span class="hljs-title">Regex</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Validation</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'Please enter the name of the bundle'</span>, <span class="hljs-string">'AcmeDemoBundle'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>validation</span> = Validation<span class="hljs-operator">::</span>createCallable(<span class="hljs-keyword">new</span> Regex([
    <span class="hljs-string">'pattern'</span> =&gt; <span class="hljs-string">'/^[a-zA-Z]+Bundle$/'</span>,
    <span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'The name of the bundle should be suffixed with \'Bundle\''</span>,
]));
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setValidator(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>validation</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="validating-a-hidden-response">
    Validating a Hidden Response
    <a class="headerlink" href="#validating-a-hidden-response" title="Permalink to this headline">¶</a>
</h3>
<p>You can also use a validator with a hidden question:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Question</span>\<span class="hljs-title">Question</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">(InputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, OutputInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>)</span>: <span class="hljs-title">int</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getHelper(<span class="hljs-string">'question'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span> = <span class="hljs-keyword">new</span> Question(<span class="hljs-string">'Please enter your password'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setNormalizer(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span> ?? <span class="hljs-string">''</span>;
    });
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setValidator(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>)</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">''</span> === trim(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> \<span class="hljs-keyword">Exception</span>(<span class="hljs-string">'The password cannot be empty'</span>);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>;
    });
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setHidden(<span class="hljs-keyword">true</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span><span class="hljs-operator">-&gt;</span>setMaxAttempts(<span class="hljs-number">20</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>password</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>helper</span><span class="hljs-operator">-&gt;</span>ask(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>input</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>output</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>question</span>);
    
    <span class="hljs-comment">// ... do something with the password</span>
    
    <span class="hljs-keyword">return</span> Command<span class="hljs-operator">::</span>SUCCESS;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
<div class="section">
<h2 id="testing-a-command-that-expects-input">
    Testing a Command that Expects Input
    <a class="headerlink" href="#testing-a-command-that-expects-input" title="Permalink to this headline">¶</a>
</h2>
<p>If you want to write a unit test for a command which expects some kind of input
from the command line, you need to set the inputs that the command expects:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Tester</span>\<span class="hljs-title">CommandTester</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testExecute</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>commandTester</span> = <span class="hljs-keyword">new</span> CommandTester(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>command</span>);

    <span class="hljs-comment">// Equals to a user inputting "Test" and hitting ENTER</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>commandTester</span><span class="hljs-operator">-&gt;</span>setInputs([<span class="hljs-string">'Test'</span>]);

    <span class="hljs-comment">// Equals to a user inputting "This", "That" and hitting ENTER</span>
    <span class="hljs-comment">// This can be used for answering two separated questions for instance</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>commandTester</span><span class="hljs-operator">-&gt;</span>setInputs([<span class="hljs-string">'This'</span>, <span class="hljs-string">'That'</span>]);

    <span class="hljs-comment">// For simulating a positive answer to a confirmation question, adding an</span>
    <span class="hljs-comment">// additional input saying "yes" will work</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>commandTester</span><span class="hljs-operator">-&gt;</span>setInputs([<span class="hljs-string">'yes'</span>]);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>commandTester</span><span class="hljs-operator">-&gt;</span>execute([<span class="hljs-string">'command'</span> =&gt; <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>command</span><span class="hljs-operator">-&gt;</span>getName()]);

    <span class="hljs-comment">// $this-&gt;assertRegExp('/.../', $commandTester-&gt;getDisplay());</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>By calling <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Tester/CommandTester.php#method_setInputs" class="reference external" title="Symfony\Component\Console\Tester\CommandTester::setInputs()" rel="external noopener noreferrer" target="_blank">setInputs()</a>,
you imitate what the console would do internally with all user input through the CLI.
This method takes an array as only argument with, for each input that the command expects,
a string representing what the user would have typed.
This way you can test any user interaction (even complex ones) by passing the appropriate inputs.</p>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Console/Tester/CommandTester.php" class="reference external" title="Symfony\Component\Console\Tester\CommandTester" rel="external noopener noreferrer" target="_blank">CommandTester</a> automatically
simulates a user hitting <code translate="no" class="notranslate">ENTER</code> after each input, no need for passing
an additional input.</p>
</div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>On Windows systems Symfony uses a special binary to implement hidden
questions. This means that those questions don't use the default <code translate="no" class="notranslate">Input</code>
console object and therefore you can't test them on Windows.</p>
</div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>