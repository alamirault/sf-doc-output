        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="the-serializer-component">
    The Serializer Component
    <a class="headerlink" href="#the-serializer-component" title="Permalink to this headline">¶</a>
</h1>
<blockquote><p>The Serializer component is meant to be used to turn objects into a
specific format (XML, JSON, YAML, ...) and the other way around.</p>
</blockquote>
<p>In order to do so, the Serializer component follows the following schema.</p>
<object data="../_images/components/serializer/serializer_workflow.svg" type="image/svg+xml"></object>
<p>As you can see in the picture above, an array is used as an intermediary between
objects and serialized contents. This way, encoders will only deal with turning
specific <strong>formats</strong> into <strong>arrays</strong> and vice versa. The same way, Normalizers
will deal with turning specific <strong>objects</strong> into <strong>arrays</strong> and vice versa.</p>
<p>Serialization is a complex topic. This component may not cover all your use cases out of the box,
but it can be useful for developing tools to serialize and deserialize your objects.</p>
<div class="section">
<h2 id="installation">
    Installation
    <a class="headerlink" href="#installation" title="Permalink to this headline">¶</a>
</h2>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>composer require symfony/serializer</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>If you install this component outside of a Symfony application, you must
require the <code translate="no" class="notranslate">vendor/autoload.php</code> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a href="using_components.html" class="reference internal">this article</a> for more details.</p>
</div>
<p>To use the <code translate="no" class="notranslate">ObjectNormalizer</code>, the <a href="property_access.html" class="reference internal">PropertyAccess component</a>
must also be installed.</p>
</div>
<div class="section">
<h2 id="usage">
    Usage
    <a class="headerlink" href="#usage" title="Permalink to this headline">¶</a>
</h2>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>This article explains the philosophy of the Serializer and gets you familiar
with the concepts of normalizers and encoders. The code examples assume
that you use the Serializer as an independent component. If you are using
the Serializer in a Symfony application, read <a href="../serializer.html" class="reference internal">How to Use the Serializer</a> after you
finish this article.</p>
</div>
<p>To use the Serializer component, set up the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Serializer.php" class="reference external" title="Symfony\Component\Serializer\Serializer" rel="external noopener noreferrer" target="_blank">Serializer</a> specifying which encoders
and normalizer are going to be available:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">XmlEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoders</span> = [<span class="hljs-keyword">new</span> XmlEncoder(), <span class="hljs-keyword">new</span> JsonEncoder()];
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizers</span> = [<span class="hljs-keyword">new</span> ObjectNormalizer()];

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizers</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoders</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The preferred normalizer is the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ObjectNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ObjectNormalizer" rel="external noopener noreferrer" target="_blank">ObjectNormalizer</a>,
but other normalizers are available. All the examples shown below use
the <code translate="no" class="notranslate">ObjectNormalizer</code>.</p>
</div>
<div class="section">
<h2 id="serializing-an-object">
    Serializing an Object
    <a class="headerlink" href="#serializing-an-object" title="Permalink to this headline">¶</a>
</h2>
<p>For the sake of this example, assume the following class already
exists in your project:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Model</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
</span>{
    <span class="hljs-keyword">private</span> int <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>age</span>;
    <span class="hljs-keyword">private</span> string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    <span class="hljs-keyword">private</span> bool <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>sportsperson</span>;
    <span class="hljs-keyword">private</span> ?\DateTime <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>createdAt</span>;

    <span class="hljs-comment">// Getters</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAge</span><span class="hljs-params">()</span>: <span class="hljs-title">int</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCreatedAt</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>createdAt;
    }

    <span class="hljs-comment">// Issers</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSportsperson</span><span class="hljs-params">()</span>: <span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>sportsperson;
    }

    <span class="hljs-comment">// Setters</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setAge</span><span class="hljs-params">(int <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>age</span>)</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>age = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>age</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span><span class="hljs-params">(string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>)</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>name = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setSportsperson</span><span class="hljs-params">(bool <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>sportsperson</span>)</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>sportsperson = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>sportsperson</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setCreatedAt</span><span class="hljs-params">(\DateTime <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>createdAt</span> = null)</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>createdAt = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>createdAt</span>;
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Now, if you want to serialize this object into JSON, you only need to
use the Serializer service created before:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">Person</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span> = <span class="hljs-keyword">new</span> Person();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'foo'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setAge(<span class="hljs-number">99</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setSportsperson(<span class="hljs-keyword">false</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>jsonContent</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span>, <span class="hljs-string">'json'</span>);

<span class="hljs-comment">// $jsonContent contains {"name":"foo","age":99,"sportsperson":false,"createdAt":null}</span>

<span class="hljs-keyword">echo</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>jsonContent</span>; <span class="hljs-comment">// or return it in a Response</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The first parameter of the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Serializer.php#method_serialize" class="reference external" title="Symfony\Component\Serializer\Serializer::serialize()" rel="external noopener noreferrer" target="_blank">serialize()</a>
is the object to be serialized and the second is used to choose the proper encoder,
in this case <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Encoder/JsonEncoder.php" class="reference external" title="Symfony\Component\Serializer\Encoder\JsonEncoder" rel="external noopener noreferrer" target="_blank">JsonEncoder</a>.</p>
</div>
<div class="section">
<h2 id="deserializing-an-object">
    Deserializing an Object
    <a class="headerlink" href="#deserializing-an-object" title="Permalink to this headline">¶</a>
</h2>
<p>You'll now learn how to do the exact opposite. This time, the information
of the <code translate="no" class="notranslate">Person</code> class would be encoded in XML format:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">Person</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-string">&lt;&lt;&lt;EOF
&lt;person&gt;
    &lt;name&gt;foo&lt;/name&gt;
    &lt;age&gt;99&lt;/age&gt;
    &lt;sportsperson&gt;false&lt;/sportsperson&gt;
&lt;/person&gt;
EOF;</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>deserialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span>, Person<span class="hljs-operator">::</span>class, <span class="hljs-string">'xml'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>In this case, <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Serializer.php#method_deserialize" class="reference external" title="Symfony\Component\Serializer\Serializer::deserialize()" rel="external noopener noreferrer" target="_blank">deserialize()</a>
needs three parameters:</p>
<ol class="arabic">
    <li>The information to be decoded</li>
<li>The name of the class this information will be decoded to</li>
<li>The encoder used to convert that information into an array</li>
</ol>
<p>By default, additional attributes that are not mapped to the denormalized object
will be ignored by the Serializer component. If you prefer to throw an exception
when this happens, set the <code translate="no" class="notranslate">AbstractNormalizer::ALLOW_EXTRA_ATTRIBUTES</code> context option to
<code translate="no" class="notranslate">false</code> and provide an object that implements <code translate="no" class="notranslate">ClassMetadataFactoryInterface</code>
when constructing the normalizer:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">Person</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-string">&lt;&lt;&lt;EOF
&lt;person&gt;
    &lt;name&gt;foo&lt;/name&gt;
    &lt;age&gt;99&lt;/age&gt;
    &lt;city&gt;Paris&lt;/city&gt;
&lt;/person&gt;
EOF;</span>

<span class="hljs-comment">// $loader is any of the valid loaders explained later in this article</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span> = <span class="hljs-keyword">new</span> ClassMetadataFactory(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>loader</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>]);

<span class="hljs-comment">// this will throw a Symfony\Component\Serializer\Exception\ExtraAttributesException</span>
<span class="hljs-comment">// because "city" is not an attribute of the Person class</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>deserialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span>, Person<span class="hljs-operator">::</span>class, <span class="hljs-string">'xml'</span>, [
    AbstractNormalizer<span class="hljs-operator">::</span>ALLOW_EXTRA_ATTRIBUTES =&gt; <span class="hljs-keyword">false</span>,
]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h3 id="deserializing-in-an-existing-object">
    Deserializing in an Existing Object
    <a class="headerlink" href="#deserializing-in-an-existing-object" title="Permalink to this headline">¶</a>
</h3>
<p>The serializer can also be used to update an existing object:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// ...</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span> = <span class="hljs-keyword">new</span> Person();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'bar'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setAge(<span class="hljs-number">99</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setSportsperson(<span class="hljs-keyword">true</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-string">&lt;&lt;&lt;EOF
&lt;person&gt;
    &lt;name&gt;foo&lt;/name&gt;
    &lt;age&gt;69&lt;/age&gt;
&lt;/person&gt;
EOF;</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>deserialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span>, Person<span class="hljs-operator">::</span>class, <span class="hljs-string">'xml'</span>, [AbstractNormalizer<span class="hljs-operator">::</span>OBJECT_TO_POPULATE =&gt; <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span>]);
<span class="hljs-comment">// $person = App\Model\Person(name: 'foo', age: '69', sportsperson: true)</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>This is a common need when working with an ORM.</p>
<p>The <code translate="no" class="notranslate">AbstractNormalizer::OBJECT_TO_POPULATE</code> is only used for the top level object. If that object
is the root of a tree structure, all child elements that exist in the
normalized data will be re-created with new instances.</p>
<p>When the <code translate="no" class="notranslate">AbstractObjectNormalizer::DEEP_OBJECT_TO_POPULATE</code> option is set to
true, existing children of the root <code translate="no" class="notranslate">OBJECT_TO_POPULATE</code> are updated from the
normalized data, instead of the denormalizer re-creating them. Note that
<code translate="no" class="notranslate">DEEP_OBJECT_TO_POPULATE</code> only works for single child objects, but not for
arrays of objects. Those will still be replaced when present in the normalized
data.</p>
</div>
</div>
<div class="section">
<h2 id="context">
    Context
    <a class="headerlink" href="#context" title="Permalink to this headline">¶</a>
</h2>
<p>Many Serializer features can be configured <a href="../serializer.html#serializer_serializer-context" class="reference internal">using a context</a>.</p>
<span id="component-serializer-attributes-groups"></span>
</div>
<div class="section">
<h2 id="attributes-groups">
    Attributes Groups
    <a class="headerlink" href="#attributes-groups" title="Permalink to this headline">¶</a>
</h2>
<p>Sometimes, you want to serialize different sets of attributes from your
entities. Groups are a handy way to achieve this need.</p>
<p>Assume you have the following plain-old-PHP object:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyObj</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBar</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>bar;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setBar</span><span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span>)</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>bar = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span>;
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The definition of serialization can be specified using annotations, XML
or YAML. The <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Mapping/Factory/ClassMetadataFactory.php" class="reference external" title="Symfony\Component\Serializer\Mapping\Factory\ClassMetadataFactory" rel="external noopener noreferrer" target="_blank">ClassMetadataFactory</a>
that will be used by the normalizer must be aware of the format to use.</p>
<p>The following code shows how to initialize the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Mapping/Factory/ClassMetadataFactory.php" class="reference external" title="Symfony\Component\Serializer\Mapping\Factory\ClassMetadataFactory" rel="external noopener noreferrer" target="_blank">ClassMetadataFactory</a>
for each format:</p>
<ul>
    <li><p>Annotations in PHP files:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">AnnotationReader</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Factory</span>\<span class="hljs-title">ClassMetadataFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">AnnotationLoader</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span> = <span class="hljs-keyword">new</span> ClassMetadataFactory(<span class="hljs-keyword">new</span> AnnotationLoader(<span class="hljs-keyword">new</span> AnnotationReader()));</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div></li>
<li><p>YAML files:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Factory</span>\<span class="hljs-title">ClassMetadataFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">YamlFileLoader</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span> = <span class="hljs-keyword">new</span> ClassMetadataFactory(<span class="hljs-keyword">new</span> YamlFileLoader(<span class="hljs-string">'/path/to/your/definition.yaml'</span>));</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div></li>
<li><p>XML files:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Factory</span>\<span class="hljs-title">ClassMetadataFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">XmlFileLoader</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span> = <span class="hljs-keyword">new</span> ClassMetadataFactory(<span class="hljs-keyword">new</span> XmlFileLoader(<span class="hljs-string">'/path/to/your/definition.xml'</span>));</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div></li>
</ul>
<span id="component-serializer-attributes-groups-annotations"></span>
<p>Then, create your groups definition:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-6298301dbf7a9112e1133fe0d18e1372487b375b" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-a211e482ed80f9f7119996eb87ed1c964d57e10c" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-de086e2844dcbb8e91cc9f72af2f13f86acdad31" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-6298301dbf7a9112e1133fe0d18e1372487b375b" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">Groups</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyObj</span>
</span>{
    <span class="hljs-comment">#[Groups(['group1', 'group2'])]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span>;

    <span class="hljs-comment">#[Groups(['group4'])]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>anotherProperty</span>;

    <span class="hljs-comment">#[Groups(['group3'])]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBar</span><span class="hljs-params">()</span> // <span class="hljs-title">is</span>* <span class="hljs-title">methods</span> <span class="hljs-title">are</span> <span class="hljs-title">also</span> <span class="hljs-title">supported</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>bar;
    }

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-a211e482ed80f9f7119996eb87ed1c964d57e10c" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-string">Acme\MyObj:</span>
    <span class="hljs-attr">attributes:</span>
        <span class="hljs-attr">foo:</span>
            <span class="hljs-attr">groups:</span> <span class="hljs-string">['group1',</span> <span class="hljs-string">'group2'</span><span class="hljs-string">]</span>
        <span class="hljs-attr">anotherProperty:</span>
            <span class="hljs-attr">groups:</span> <span class="hljs-string">['group4']</span>
        <span class="hljs-attr">bar:</span>
            <span class="hljs-attr">groups:</span> <span class="hljs-string">['group3']</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-de086e2844dcbb8e91cc9f72af2f13f86acdad31" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">serializer</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping
        https://symfony.com/schema/dic/serializer-mapping/serializer-mapping-1.0.xsd"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Acme\MyObj"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attribute</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"foo"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">group</span>&gt;</span>group1<span class="hljs-tag">&lt;/<span class="hljs-name">group</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">group</span>&gt;</span>group2<span class="hljs-tag">&lt;/<span class="hljs-name">group</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">attribute</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">attribute</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"anotherProperty"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">group</span>&gt;</span>group4<span class="hljs-tag">&lt;/<span class="hljs-name">group</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">attribute</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">attribute</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"bar"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">group</span>&gt;</span>group3<span class="hljs-tag">&lt;/<span class="hljs-name">group</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">attribute</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">serializer</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>You are now able to serialize only attributes in the groups you want:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span> = <span class="hljs-keyword">new</span> MyObj();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>foo = <span class="hljs-string">'foo'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>anotherProperty = <span class="hljs-string">'anotherProperty'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>setBar(<span class="hljs-string">'bar'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span>, <span class="hljs-keyword">null</span>, [<span class="hljs-string">'groups'</span> =&gt; <span class="hljs-string">'group1'</span>]);
<span class="hljs-comment">// $data = ['foo' =&gt; 'foo'];</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj2</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>denormalize(
    [<span class="hljs-string">'foo'</span> =&gt; <span class="hljs-string">'foo'</span>, <span class="hljs-string">'anotherProperty'</span> =&gt; <span class="hljs-string">'anotherProperty'</span>, <span class="hljs-string">'bar'</span> =&gt; <span class="hljs-string">'bar'</span>],
    <span class="hljs-string">'MyObj'</span>,
    <span class="hljs-keyword">null</span>,
    [<span class="hljs-string">'groups'</span> =&gt; [<span class="hljs-string">'group1'</span>, <span class="hljs-string">'group3'</span>]]
);
<span class="hljs-comment">// $obj2 = MyObj(foo: 'foo', bar: 'bar')</span>

<span class="hljs-comment">// To get all groups, use the special value `*` in `groups`</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj3</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>denormalize(
    [<span class="hljs-string">'foo'</span> =&gt; <span class="hljs-string">'foo'</span>, <span class="hljs-string">'anotherProperty'</span> =&gt; <span class="hljs-string">'anotherProperty'</span>, <span class="hljs-string">'bar'</span> =&gt; <span class="hljs-string">'bar'</span>],
    <span class="hljs-string">'MyObj'</span>,
    <span class="hljs-keyword">null</span>,
    [<span class="hljs-string">'groups'</span> =&gt; [<span class="hljs-string">'*'</span>]]
);
<span class="hljs-comment">// $obj2 = MyObj(foo: 'foo', anotherProperty: 'anotherProperty', bar: 'bar')</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="ignoring-attributes-when-serializing"></span>
</div>
<div class="section">
<h2 id="selecting-specific-attributes">
    Selecting Specific Attributes
    <a class="headerlink" href="#selecting-specific-attributes" title="Permalink to this headline">¶</a>
</h2>
<p>It is also possible to serialize only a set of specific attributes:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">AbstractNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>familyName</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>givenName</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Company</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>address</span>;
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span> = <span class="hljs-keyword">new</span> Company();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span><span class="hljs-operator">-&gt;</span>name = <span class="hljs-string">'Les-Tilleuls.coop'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span><span class="hljs-operator">-&gt;</span>address = <span class="hljs-string">'Lille, France'</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>user</span> = <span class="hljs-keyword">new</span> User();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>user</span><span class="hljs-operator">-&gt;</span>familyName = <span class="hljs-string">'Dunglas'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>user</span><span class="hljs-operator">-&gt;</span>givenName = <span class="hljs-string">'Kévin'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>user</span><span class="hljs-operator">-&gt;</span>company = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-keyword">new</span> ObjectNormalizer()]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>user</span>, <span class="hljs-keyword">null</span>, [AbstractNormalizer<span class="hljs-operator">::</span>ATTRIBUTES =&gt; [<span class="hljs-string">'familyName'</span>, <span class="hljs-string">'company'</span> =&gt; [<span class="hljs-string">'name'</span>]]]);
<span class="hljs-comment">// $data = ['familyName' =&gt; 'Dunglas', 'company' =&gt; ['name' =&gt; 'Les-Tilleuls.coop']];</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Only attributes that are not ignored (see below) are available.
If some serialization groups are set, only attributes allowed by those groups can be used.</p>
<p>As for groups, attributes can be selected during both the serialization and deserialization process.</p>
<span id="serializer_ignoring-attributes"></span>
</div>
<div class="section">
<h2 id="ignoring-attributes">
    Ignoring Attributes
    <a class="headerlink" href="#ignoring-attributes" title="Permalink to this headline">¶</a>
</h2>
<p>All attributes are included by default when serializing objects. There are two
options to ignore some of those attributes.</p>
<div class="section">
<h3 id="option-1-using-ignore-annotation">
    Option 1: Using <code translate="no" class="notranslate">@Ignore</code> Annotation
    <a class="headerlink" href="#option-1-using-ignore-annotation" title="Permalink to this headline">¶</a>
</h3>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-5a165a06ccf5cbd497993d86259c52c5912b7ab9" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-e074b0040038ce26eb694a9d34178f7b37465440" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-11179d63b9a8ca82b7858efffac45bbb80f31fb7" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-5a165a06ccf5cbd497993d86259c52c5912b7ab9" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Model</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">Ignore</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span>;

    <span class="hljs-comment">#[Ignore]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span>;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-e074b0040038ce26eb694a9d34178f7b37465440" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-string">App\Model\MyClass:</span>
    <span class="hljs-attr">attributes:</span>
        <span class="hljs-attr">bar:</span>
            <span class="hljs-attr">ignore:</span> <span class="hljs-literal">true</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-11179d63b9a8ca82b7858efffac45bbb80f31fb7" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">serializer</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping
        https://symfony.com/schema/dic/serializer-mapping/serializer-mapping-1.0.xsd"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Model\MyClass"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attribute</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"bar"</span> <span class="hljs-attr">ignore</span>=<span class="hljs-string">"true"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">serializer</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>You can now ignore specific attributes during serialization:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">MyClass</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span> = <span class="hljs-keyword">new</span> MyClass();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>foo = <span class="hljs-string">'foo'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>bar = <span class="hljs-string">'bar'</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span>);
<span class="hljs-comment">// $data = ['foo' =&gt; 'foo'];</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="option-2-using-the-context">
    Option 2: Using the Context
    <a class="headerlink" href="#option-2-using-the-context" title="Permalink to this headline">¶</a>
</h3>
<p>Pass an array with the names of the attributes to ignore using the
<code translate="no" class="notranslate">AbstractNormalizer::IGNORED_ATTRIBUTES</code> key in the <code translate="no" class="notranslate">context</code> of the
serializer method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">Person</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">AbstractNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span> = <span class="hljs-keyword">new</span> Person();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'foo'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setAge(<span class="hljs-number">99</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span> = <span class="hljs-keyword">new</span> JsonEncoder();

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>], [<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span>]);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span>, <span class="hljs-string">'json'</span>, [AbstractNormalizer<span class="hljs-operator">::</span>IGNORED_ATTRIBUTES =&gt; [<span class="hljs-string">'age'</span>]]); <span class="hljs-comment">// Output: {"name":"foo"}</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="component-serializer-converting-property-names-when-serializing-and-deserializing"></span>
</div>
</div>
<div class="section">
<h2 id="converting-property-names-when-serializing-and-deserializing">
    Converting Property Names when Serializing and Deserializing
    <a class="headerlink" href="#converting-property-names-when-serializing-and-deserializing" title="Permalink to this headline">¶</a>
</h2>
<p>Sometimes serialized attributes must be named differently than properties
or getter/setter methods of PHP classes.</p>
<p>The Serializer component provides a handy way to translate or map PHP field
names to serialized names: The Name Converter System.</p>
<p>Given you have the following object:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Company</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>address</span>;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>And in the serialized form, all attributes must be prefixed by <code translate="no" class="notranslate">org_</code> like
the following:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php">{<span class="hljs-string">"org_name"</span>: <span class="hljs-string">"Acme Inc."</span>, <span class="hljs-string">"org_address"</span>: <span class="hljs-string">"123 Main Street, Big City"</span>}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>A custom name converter can handle such cases:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">NameConverter</span>\<span class="hljs-title">NameConverterInterface</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrgPrefixNameConverter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">NameConverterInterface</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalize</span><span class="hljs-params">(string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>propertyName</span>)</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'org_'</span>.<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>propertyName</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">denormalize</span><span class="hljs-params">(string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>propertyName</span>)</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-comment">// removes 'org_' prefix</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'org_'</span> === substr(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>propertyName</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>) ? substr(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>propertyName</span>, <span class="hljs-number">4</span>) : <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>propertyName</span>;
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The custom name converter can be used by passing it as second parameter of any
class extending <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/AbstractNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\AbstractNormalizer" rel="external noopener noreferrer" target="_blank">AbstractNormalizer</a>,
including <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/GetSetMethodNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\GetSetMethodNormalizer" rel="external noopener noreferrer" target="_blank">GetSetMethodNormalizer</a>
and <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/PropertyNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\PropertyNormalizer" rel="external noopener noreferrer" target="_blank">PropertyNormalizer</a>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>nameConverter</span> = <span class="hljs-keyword">new</span> OrgPrefixNameConverter();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-keyword">null</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>nameConverter</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>], [<span class="hljs-keyword">new</span> JsonEncoder()]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span> = <span class="hljs-keyword">new</span> Company();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span><span class="hljs-operator">-&gt;</span>name = <span class="hljs-string">'Acme Inc.'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span><span class="hljs-operator">-&gt;</span>address = <span class="hljs-string">'123 Main Street, Big City'</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>json</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>company</span>, <span class="hljs-string">'json'</span>);
<span class="hljs-comment">// {"org_name": "Acme Inc.", "org_address": "123 Main Street, Big City"}</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>companyCopy</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>deserialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>json</span>, Company<span class="hljs-operator">::</span>class, <span class="hljs-string">'json'</span>);
<span class="hljs-comment">// Same data as $company</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>You can also implement
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/NameConverter/AdvancedNameConverterInterface.php" class="reference external" title="Symfony\Component\Serializer\NameConverter\AdvancedNameConverterInterface" rel="external noopener noreferrer" target="_blank">AdvancedNameConverterInterface</a>
to access the current class name, format and context.</p>
</div>
<span id="using-camelized-method-names-for-underscored-attributes"></span>
<div class="section">
<h3 id="camelcase-to-snake-case">
    CamelCase to snake_case
    <a class="headerlink" href="#camelcase-to-snake-case" title="Permalink to this headline">¶</a>
</h3>
<p>In many formats, it's common to use underscores to separate words (also known
as snake_case). However, in Symfony applications is common to use CamelCase to
name properties (even though the <a href="https://www.php-fig.org/psr/psr-1/" class="reference external" rel="external noopener noreferrer" target="_blank">PSR-1 standard</a> doesn't recommend any
specific case for property names).</p>
<p>Symfony provides a built-in name converter designed to transform between
snake_case and CamelCased styles during serialization and deserialization
processes:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">NameConverter</span>\<span class="hljs-title">CamelCaseToSnakeCaseNameConverter</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">new</span> CamelCaseToSnakeCaseNameConverter());

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>firstName</span>,
    )</span> </span>{
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFirstName</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>firstName;
    }
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>kevin</span> = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">'Kévin'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>kevin</span>);
<span class="hljs-comment">// ['first_name' =&gt; 'Kévin'];</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>anne</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span><span class="hljs-operator">-&gt;</span>denormalize([<span class="hljs-string">'first_name'</span> =&gt; <span class="hljs-string">'Anne'</span>], <span class="hljs-string">'Person'</span>);
<span class="hljs-comment">// Person object with firstName: 'Anne'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="serializer_name-conversion"></span>
</div>
<div class="section">
<h3 id="configure-name-conversion-using-metadata">
    Configure name conversion using metadata
    <a class="headerlink" href="#configure-name-conversion-using-metadata" title="Permalink to this headline">¶</a>
</h3>
<p>When using this component inside a Symfony application and the class metadata
factory is enabled as explained in the <a href="serializer.html#component-serializer-attributes-groups" class="reference internal">Attributes Groups section</a>,
this is already set up and you only need to provide the configuration. Otherwise:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">NameConverter</span>\<span class="hljs-title">MetadataAwareNameConverter</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span> = <span class="hljs-keyword">new</span> ClassMetadataFactory(<span class="hljs-keyword">new</span> AnnotationLoader(<span class="hljs-keyword">new</span> AnnotationReader()));

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadataAwareNameConverter</span> = <span class="hljs-keyword">new</span> MetadataAwareNameConverter(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer(
    [<span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadataAwareNameConverter</span>)],
    [<span class="hljs-string">'json'</span> =&gt; <span class="hljs-keyword">new</span> JsonEncoder()]
);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Now configure your name conversion mapping. Consider an application that
defines a <code translate="no" class="notranslate">Person</code> entity with a <code translate="no" class="notranslate">firstName</code> property:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-23a1de0526cf6d67031682e8f170b48a4e9303f4" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-e0e4126ee123286afacd873047e8ba22cd8ff175" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-9a8decbc7c64c6f5e47f2cc7ebdb1d92e5f495b7" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-23a1de0526cf6d67031682e8f170b48a4e9303f4" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">SerializedName</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        #[SerializedName<span class="hljs-params">(<span class="hljs-string">'customer_name'</span>)</span>]
        private <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>firstName</span>,
    )</span> </span>{
    }

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-e0e4126ee123286afacd873047e8ba22cd8ff175" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-string">App\Entity\Person:</span>
    <span class="hljs-attr">attributes:</span>
        <span class="hljs-attr">firstName:</span>
            <span class="hljs-attr">serialized_name:</span> <span class="hljs-string">customer_name</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-9a8decbc7c64c6f5e47f2cc7ebdb1d92e5f495b7" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">serializer</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping
        https://symfony.com/schema/dic/serializer-mapping/serializer-mapping-1.0.xsd"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Entity\Person"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attribute</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"firstName"</span> <span class="hljs-attr">serialized-name</span>=<span class="hljs-string">"customer_name"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">serializer</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>This custom mapping is used to convert property names when serializing and
deserializing objects:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serialized</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">'Kévin'</span>), <span class="hljs-string">'json'</span>);
<span class="hljs-comment">// {"customer_name": "Kévin"}</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
<div class="section">
<h2 id="serializing-boolean-attributes">
    Serializing Boolean Attributes
    <a class="headerlink" href="#serializing-boolean-attributes" title="Permalink to this headline">¶</a>
</h2>
<p>If you are using isser methods (methods prefixed by <code translate="no" class="notranslate">is</code>, like
<code translate="no" class="notranslate">App\Model\Person::isSportsperson()</code>), the Serializer component will
automatically detect and use it to serialize related attributes.</p>
<p>The <code translate="no" class="notranslate">ObjectNormalizer</code> also takes care of methods starting with <code translate="no" class="notranslate">has</code>, <code translate="no" class="notranslate">get</code>,
and <code translate="no" class="notranslate">can</code>.</p>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.1</span>
    </p><p>The support of canners (methods prefixed by <code translate="no" class="notranslate">can</code>) was introduced in Symfony 6.1.</p>
</div>
</div>
<div class="section">
<h2 id="using-callbacks-to-serialize-properties-with-object-instances">
    Using Callbacks to Serialize Properties with Object Instances
    <a class="headerlink" href="#using-callbacks-to-serialize-properties-with-object-instances" title="Permalink to this headline">¶</a>
</h2>
<p>When serializing, you can set a callback to format a specific object property:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">Person</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">GetSetMethodNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span> = <span class="hljs-keyword">new</span> JsonEncoder();

<span class="hljs-comment">// all callback parameters are optional (you can omit the ones you don't use)</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>dateCallback</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>innerObject</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>outerObject</span>, string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>attributeName</span>, string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>format</span> = null, array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>context</span> = [])</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>innerObject</span> <span class="hljs-keyword">instanceof</span> \DateTime ? <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>innerObject</span><span class="hljs-operator">-&gt;</span>format(\DateTime<span class="hljs-operator">::</span>ISO8601) : <span class="hljs-string">''</span>;
};

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaultContext</span> = [
    AbstractNormalizer<span class="hljs-operator">::</span>CALLBACKS =&gt; [
        <span class="hljs-string">'createdAt'</span> =&gt; <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>dateCallback</span>,
    ],
];

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> GetSetMethodNormalizer(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaultContext</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>], [<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span> = <span class="hljs-keyword">new</span> Person();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'cordoval'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setAge(<span class="hljs-number">34</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span><span class="hljs-operator">-&gt;</span>setCreatedAt(<span class="hljs-keyword">new</span> \DateTime(<span class="hljs-string">'now'</span>));

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person</span>, <span class="hljs-string">'json'</span>);
<span class="hljs-comment">// Output: {"name":"cordoval", "age": 34, "createdAt": "2014-03-22T09:43:12-0500"}</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="component-serializer-normalizers"></span>
</div>
<div class="section">
<h2 id="normalizers">
    Normalizers
    <a class="headerlink" href="#normalizers" title="Permalink to this headline">¶</a>
</h2>
<p>Normalizers turn <strong>objects</strong> into <strong>arrays</strong> and vice versa. They implement
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/NormalizerInterface.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\NormalizerInterface" rel="external noopener noreferrer" target="_blank">NormalizerInterface</a> for
normalizing (object to array) and
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/DenormalizerInterface.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\DenormalizerInterface" rel="external noopener noreferrer" target="_blank">DenormalizerInterface</a> for
denormalizing (array to object).</p>
<p>Normalizers are enabled in the serializer passing them as its first argument:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizers</span> = [<span class="hljs-keyword">new</span> ObjectNormalizer()];
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizers</span>, []);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h3 id="built-in-normalizers">
    Built-in Normalizers
    <a class="headerlink" href="#built-in-normalizers" title="Permalink to this headline">¶</a>
</h3>
<p>The Serializer component provides several built-in normalizers:</p>
<dl>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ObjectNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ObjectNormalizer" rel="external noopener noreferrer" target="_blank">ObjectNormalizer</a></dt>
        
        <dd>
                            <p class="first">This normalizer leverages the <a href="property_access.html" class="reference internal">PropertyAccess Component</a>
to read and write in the object. It means that it can access to properties
directly and through getters, setters, hassers, issers, canners, adders and removers.
It supports calling the constructor during the denormalization process.</p>
                            <p>Objects are normalized to a map of property names and values (names are
generated by removing the <code translate="no" class="notranslate">get</code>, <code translate="no" class="notranslate">set</code>, <code translate="no" class="notranslate">has</code>, <code translate="no" class="notranslate">is</code>, <code translate="no" class="notranslate">can</code>, <code translate="no" class="notranslate">add</code> or <code translate="no" class="notranslate">remove</code>
prefix from the method name and transforming the first letter to lowercase; e.g.
<code translate="no" class="notranslate">getFirstName()</code> -&gt; <code translate="no" class="notranslate">firstName</code>).</p>
                            <p class="last">The <code translate="no" class="notranslate">ObjectNormalizer</code> is the most powerful normalizer. It is configured by
default in Symfony applications with the Serializer component enabled.</p>
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/GetSetMethodNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\GetSetMethodNormalizer" rel="external noopener noreferrer" target="_blank">GetSetMethodNormalizer</a></dt>
        
        <dd>
                            <p class="first">This normalizer reads the content of the class by calling the &quot;getters&quot;
(public methods starting with &quot;get&quot;). It will denormalize data by calling
the constructor and the &quot;setters&quot; (public methods starting with &quot;set&quot;).</p>
                            <p class="last">Objects are normalized to a map of property names and values (names are
generated by removing the <code translate="no" class="notranslate">get</code> prefix from the method name and transforming
the first letter to lowercase; e.g. <code translate="no" class="notranslate">getFirstName()</code> -&gt; <code translate="no" class="notranslate">firstName</code>).</p>
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/PropertyNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\PropertyNormalizer" rel="external noopener noreferrer" target="_blank">PropertyNormalizer</a></dt>
        
        <dd>
                            <p class="first">This normalizer directly reads and writes public properties as well as
<strong>private and protected</strong> properties (from both the class and all of its
parent classes) by using <a href="https://php.net/manual/en/book.reflection.php" class="reference external" rel="external noopener noreferrer" target="_blank">PHP reflection</a>. It supports calling the constructor
during the denormalization process.</p>
                            <p>Objects are normalized to a map of property names to property values.</p>
                            <p>If you prefer to only normalize certain properties (e.g. only public properties)
set the <code translate="no" class="notranslate">PropertyNormalizer::NORMALIZE_VISIBILITY</code> context option and
combine the following values: <code translate="no" class="notranslate">PropertyNormalizer::NORMALIZE_PUBLIC</code>,
<code translate="no" class="notranslate">PropertyNormalizer::NORMALIZE_PROTECTED</code> or <code translate="no" class="notranslate">PropertyNormalizer::NORMALIZE_PRIVATE</code>.</p>
                            <div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.2</span>
    </p><p>The <code translate="no" class="notranslate">PropertyNormalizer::NORMALIZE_VISIBILITY</code> context option and its
values were introduced in Symfony 6.2.</p>
</div>
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/JsonSerializableNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\JsonSerializableNormalizer" rel="external noopener noreferrer" target="_blank">JsonSerializableNormalizer</a></dt>
        
        <dd>
                            <p class="first">This normalizer works with classes that implement <a href="https://secure.php.net/manual/en/class.jsonserializable.php" class="reference external" title="JsonSerializable" rel="external noopener noreferrer" target="_blank">JsonSerializable</a>.</p>
                            <p>It will call the <a href="https://secure.php.net/manual/en/jsonserializable.jsonserialize.php" class="reference external" title="JsonSerializable" rel="external noopener noreferrer" target="_blank">JsonSerializable::jsonSerialize()</a> method and
then further normalize the result. This means that nested
<a href="https://secure.php.net/manual/en/class.jsonserializable.php" class="reference external" title="JsonSerializable" rel="external noopener noreferrer" target="_blank">JsonSerializable</a> classes will also be normalized.</p>
                            <p>This normalizer is particularly helpful when you want to gradually migrate
from an existing codebase using simple <a href="https://secure.php.net/manual/en/function.json-encode.php" class="reference external" title="json_encode" rel="external noopener noreferrer" target="_blank">json_encode</a> to the Symfony
Serializer by allowing you to mix which normalizers are used for which classes.</p>
                            <p class="last">Unlike with <a href="https://secure.php.net/manual/en/function.json-encode.php" class="reference external" title="json_encode" rel="external noopener noreferrer" target="_blank">json_encode</a> circular references can be handled.</p>
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/DateTimeNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\DateTimeNormalizer" rel="external noopener noreferrer" target="_blank">DateTimeNormalizer</a></dt>
        
        <dd>
                            This normalizer converts <a href="https://secure.php.net/manual/en/class.datetimeinterface.php" class="reference external" title="DateTimeInterface" rel="external noopener noreferrer" target="_blank">DateTimeInterface</a> objects (e.g.
<a href="https://secure.php.net/manual/en/class.datetime.php" class="reference external" title="DateTime" rel="external noopener noreferrer" target="_blank">DateTime</a> and <a href="https://secure.php.net/manual/en/class.datetimeimmutable.php" class="reference external" title="DateTimeImmutable" rel="external noopener noreferrer" target="_blank">DateTimeImmutable</a>) into strings.
By default, it uses the <a href="https://tools.ietf.org/html/rfc3339#section-5.8" class="reference external" rel="external noopener noreferrer" target="_blank">RFC3339</a> format.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/DateTimeZoneNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\DateTimeZoneNormalizer" rel="external noopener noreferrer" target="_blank">DateTimeZoneNormalizer</a></dt>
        
        <dd>
                            This normalizer converts <a href="https://secure.php.net/manual/en/class.datetimezone.php" class="reference external" title="DateTimeZone" rel="external noopener noreferrer" target="_blank">DateTimeZone</a> objects into strings that
represent the name of the timezone according to the <a href="https://www.php.net/manual/en/timezones.php" class="reference external" rel="external noopener noreferrer" target="_blank">list of PHP timezones</a>.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/DataUriNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\DataUriNormalizer" rel="external noopener noreferrer" target="_blank">DataUriNormalizer</a></dt>
        
        <dd>
                            This normalizer converts <a href="https://secure.php.net/manual/en/class.splfileinfo.php" class="reference external" title="SplFileInfo" rel="external noopener noreferrer" target="_blank">SplFileInfo</a> objects into a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" class="reference external" rel="external noopener noreferrer" target="_blank">data URI</a>
string (<code translate="no" class="notranslate">data:...</code>) such that files can be embedded into serialized data.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/DateIntervalNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\DateIntervalNormalizer" rel="external noopener noreferrer" target="_blank">DateIntervalNormalizer</a></dt>
        
        <dd>
                            This normalizer converts <a href="https://secure.php.net/manual/en/class.dateinterval.php" class="reference external" title="DateInterval" rel="external noopener noreferrer" target="_blank">DateInterval</a> objects into strings.
By default, it uses the <code translate="no" class="notranslate">P%yY%mM%dDT%hH%iM%sS</code> format.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/BackedEnumNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\BackedEnumNormalizer" rel="external noopener noreferrer" target="_blank">BackedEnumNormalizer</a></dt>
        
        <dd>
                            <p class="first">This normalizer converts a BackedEnum objects into strings or integers.</p>
                            <p>By default, an exception is thrown when data is not a valid backed enumeration. If you
want <code translate="no" class="notranslate">null</code> instead, you can set the <code translate="no" class="notranslate">BackedEnumNormalizer::ALLOW_INVALID_VALUES</code> option.</p>
                            <div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The <code translate="no" class="notranslate">BackedEnumNormalizer::ALLOW_INVALID_VALUES</code> context option was introduced in Symfony 6.3.</p>
</div>
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/FormErrorNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\FormErrorNormalizer" rel="external noopener noreferrer" target="_blank">FormErrorNormalizer</a></dt>
        
        <dd>
                            <p class="first">This normalizer works with classes that implement
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Form/FormInterface.php" class="reference external" title="Symfony\Component\Form\FormInterface" rel="external noopener noreferrer" target="_blank">FormInterface</a>.</p>
                            <p class="last">It will get errors from the form and normalize them into a normalized array.</p>
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ConstraintViolationListNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ConstraintViolationListNormalizer" rel="external noopener noreferrer" target="_blank">ConstraintViolationListNormalizer</a></dt>
        
        <dd>
                            This normalizer converts objects that implement
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Validator/ConstraintViolationListInterface.php" class="reference external" title="Symfony\Component\Validator\ConstraintViolationListInterface" rel="external noopener noreferrer" target="_blank">ConstraintViolationListInterface</a>
into a list of errors according to the <a href="https://tools.ietf.org/html/rfc7807" class="reference external" rel="external noopener noreferrer" target="_blank">RFC 7807</a> standard.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ProblemNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ProblemNormalizer" rel="external noopener noreferrer" target="_blank">ProblemNormalizer</a></dt>
        
        <dd>
                            Normalizes errors according to the API Problem spec <a href="https://tools.ietf.org/html/rfc7807" class="reference external" rel="external noopener noreferrer" target="_blank">RFC 7807</a>.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/CustomNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\CustomNormalizer" rel="external noopener noreferrer" target="_blank">CustomNormalizer</a></dt>
        
        <dd>
                            Normalizes a PHP object using an object that implements <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/NormalizableInterface.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\NormalizableInterface" rel="external noopener noreferrer" target="_blank">NormalizableInterface</a>.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/UidNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\UidNormalizer" rel="external noopener noreferrer" target="_blank">UidNormalizer</a></dt>
        
        <dd>
                            <p class="first">This normalizer converts objects that implement
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Uid/AbstractUid.php" class="reference external" title="Symfony\Component\Uid\AbstractUid" rel="external noopener noreferrer" target="_blank">AbstractUid</a> into strings.
The default normalization format for objects that implement <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Uid/Uuid.php" class="reference external" title="Symfony\Component\Uid\Uuid" rel="external noopener noreferrer" target="_blank">Uuid</a>
is the <a href="https://tools.ietf.org/html/rfc4122" class="reference external" rel="external noopener noreferrer" target="_blank">RFC 4122</a> format (example: <code translate="no" class="notranslate">d9e7a184-5d5b-11ea-a62a-3499710062d0</code>).
The default normalization format for objects that implement <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Uid/Ulid.php" class="reference external" title="Symfony\Component\Uid\Ulid" rel="external noopener noreferrer" target="_blank">Ulid</a>
is the Base 32 format (example: <code translate="no" class="notranslate">01E439TP9XJZ9RPFH3T1PYBCR8</code>).
You can change the string format by setting the serializer context option
<code translate="no" class="notranslate">UidNormalizer::NORMALIZATION_FORMAT_KEY</code> to <code translate="no" class="notranslate">UidNormalizer::NORMALIZATION_FORMAT_BASE_58</code>,
<code translate="no" class="notranslate">UidNormalizer::NORMALIZATION_FORMAT_BASE_32</code> or <code translate="no" class="notranslate">UidNormalizer::NORMALIZATION_FORMAT_RFC_4122</code>.</p>
                            <p class="last">Also it can denormalize <code translate="no" class="notranslate">uuid</code> or <code translate="no" class="notranslate">ulid</code> strings to <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Uid/Uuid.php" class="reference external" title="Symfony\Component\Uid\Uuid" rel="external noopener noreferrer" target="_blank">Uuid</a>
or <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Uid/Ulid.php" class="reference external" title="Symfony\Component\Uid\Ulid" rel="external noopener noreferrer" target="_blank">Ulid</a>. The format does not matter.</p>
                    </dd>
    </dl>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>You can also create your own Normalizer to use another structure. Read more at
<a href="../serializer/custom_normalizer.html" class="reference internal">How to Create your Custom Normalizer</a>.</p>
</div>
<p>Certain normalizers are enabled by default when using the Serializer component
in a Symfony application, additional ones can be enabled by tagging them with
<a href="../reference/dic_tags.html#reference-dic-tags-serializer-normalizer" class="reference internal">serializer.normalizer</a>.</p>
<p>Here is an example of how to enable the built-in
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/GetSetMethodNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\GetSetMethodNormalizer" rel="external noopener noreferrer" target="_blank">GetSetMethodNormalizer</a>, a
faster alternative to the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ObjectNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ObjectNormalizer" rel="external noopener noreferrer" target="_blank">ObjectNormalizer</a>:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-dca0d51e0d6042492f1125b8d59beeac29f89b36" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-d44a4f1e84121bb914a67f64a88e9e33b516b789" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-a379af7bd2c8ade2ca4ad5101650b51d4c255d6b" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-dca0d51e0d6042492f1125b8d59beeac29f89b36" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-comment"># ...</span>

    <span class="hljs-attr">get_set_method_normalizer:</span>
        <span class="hljs-attr">class:</span> <span class="hljs-string">Symfony\Component\Serializer\Normalizer\GetSetMethodNormalizer</span>
        <span class="hljs-attr">tags:</span> <span class="hljs-string">[serializer.normalizer]</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-d44a4f1e84121bb914a67f64a88e9e33b516b789" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"get_set_method_normalizer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"Symfony\Component\Serializer\Normalizer\GetSetMethodNormalizer"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tag</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"serializer.normalizer"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-a379af7bd2c8ade2ca4ad5101650b51d4c255d6b" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">Configurator</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">GetSetMethodNormalizer</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(ContainerConfigurator <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>containerConfigurator</span><span class="hljs-operator">-&gt;</span>services()
        <span class="hljs-comment">// ...</span>
        <span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'get_set_method_normalizer'</span>, GetSetMethodNormalizer<span class="hljs-operator">::</span>class)
            <span class="hljs-operator">-&gt;</span>tag(<span class="hljs-string">'serializer.normalizer'</span>)
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<span id="component-serializer-encoders"></span>
</div>
</div>
<div class="section">
<h2 id="encoders">
    Encoders
    <a class="headerlink" href="#encoders" title="Permalink to this headline">¶</a>
</h2>
<p>Encoders turn <strong>arrays</strong> into <strong>formats</strong> and vice versa. They implement
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Encoder/EncoderInterface.php" class="reference external" title="Symfony\Component\Serializer\Encoder\EncoderInterface" rel="external noopener noreferrer" target="_blank">EncoderInterface</a>
for encoding (array to format) and
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Encoder/DecoderInterface.php" class="reference external" title="Symfony\Component\Serializer\Encoder\DecoderInterface" rel="external noopener noreferrer" target="_blank">DecoderInterface</a> for decoding
(format to array).</p>
<p>You can add new encoders to a Serializer instance by using its second constructor argument:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">XmlEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoders</span> = [<span class="hljs-keyword">new</span> XmlEncoder(), <span class="hljs-keyword">new</span> JsonEncoder()];
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([], <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoders</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h3 id="built-in-encoders">
    Built-in Encoders
    <a class="headerlink" href="#built-in-encoders" title="Permalink to this headline">¶</a>
</h3>
<p>The Serializer component provides several built-in encoders:</p>
<dl>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Encoder/JsonEncoder.php" class="reference external" title="Symfony\Component\Serializer\Encoder\JsonEncoder" rel="external noopener noreferrer" target="_blank">JsonEncoder</a></dt>
        
        <dd>
                            This class encodes and decodes data in <a href="http://www.json.org/" class="reference external" rel="external noopener noreferrer" target="_blank">JSON</a>.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Encoder/XmlEncoder.php" class="reference external" title="Symfony\Component\Serializer\Encoder\XmlEncoder" rel="external noopener noreferrer" target="_blank">XmlEncoder</a></dt>
        
        <dd>
                            This class encodes and decodes data in <a href="https://www.w3.org/XML/" class="reference external" rel="external noopener noreferrer" target="_blank">XML</a>.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Encoder/YamlEncoder.php" class="reference external" title="Symfony\Component\Serializer\Encoder\YamlEncoder" rel="external noopener noreferrer" target="_blank">YamlEncoder</a></dt>
        
        <dd>
                            This encoder encodes and decodes data in <a href="https://yaml.org/" class="reference external" rel="external noopener noreferrer" target="_blank">YAML</a>. This encoder requires the
<a href="yaml.html" class="reference internal">Yaml Component</a>.
                    </dd>
                        <dt><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Encoder/CsvEncoder.php" class="reference external" title="Symfony\Component\Serializer\Encoder\CsvEncoder" rel="external noopener noreferrer" target="_blank">CsvEncoder</a></dt>
        
        <dd>
                            This encoder encodes and decodes data in <a href="https://tools.ietf.org/html/rfc4180" class="reference external" rel="external noopener noreferrer" target="_blank">CSV</a>.
                    </dd>
    </dl>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>You can also create your own Encoder to use another structure. Read more at
<a href="../serializer/custom_encoders.html" class="reference internal">How to Create your Custom Encoder</a>.</p>
</div>
<p>All these encoders are enabled by default when using the Serializer component
in a Symfony application.</p>
</div>
<div class="section">
<h3 id="the-jsonencoder">
    The <code translate="no" class="notranslate">JsonEncoder</code>
    <a class="headerlink" href="#the-jsonencoder" title="Permalink to this headline">¶</a>
</h3>
<p>The <code translate="no" class="notranslate">JsonEncoder</code> encodes to and decodes from JSON strings, based on the PHP
<a href="https://secure.php.net/manual/en/function.json-encode.php" class="reference external" title="json_encode" rel="external noopener noreferrer" target="_blank">json_encode</a> and <a href="https://secure.php.net/manual/en/function.json-decode.php" class="reference external" title="json_decode" rel="external noopener noreferrer" target="_blank">json_decode</a> functions. It can be
useful to modify how these functions operate in certain instances by providing
options such as <code translate="no" class="notranslate">JSON_PRESERVE_ZERO_FRACTION</code>. You can use the serialization
context to pass in these options using the key <code translate="no" class="notranslate">json_encode_options</code> or
<code translate="no" class="notranslate">json_decode_options</code> respectively:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>serializer<span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span>, <span class="hljs-string">'json'</span>, [<span class="hljs-string">'json_encode_options'</span> =&gt; \JSON_PRESERVE_ZERO_FRACTION]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h3 id="the-csvencoder">
    The <code translate="no" class="notranslate">CsvEncoder</code>
    <a class="headerlink" href="#the-csvencoder" title="Permalink to this headline">¶</a>
</h3>
<p>The <code translate="no" class="notranslate">CsvEncoder</code> encodes to and decodes from CSV.</p>
<div class="section">
<h4 id="the-csvencoder-context-options">
    The <code translate="no" class="notranslate">CsvEncoder</code> Context Options
    <a class="headerlink" href="#the-csvencoder-context-options" title="Permalink to this headline">¶</a>
</h4>
<p>The <code translate="no" class="notranslate">encode()</code> method defines a third optional parameter called <code translate="no" class="notranslate">context</code>
which defines the configuration options for the CsvEncoder an associative array:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>csvEncoder</span><span class="hljs-operator">-&gt;</span>encode(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>array</span>, <span class="hljs-string">'csv'</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>context</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>These are the options available:</p>
<div class="table-wrapper">
<table>
            <thead>
                            <tr>
                                            <th>Option</th>
                                            <th>Description</th>
                                            <th>Default</th>
                                    </tr>
                    </thead>
        <tbody>
                    <tr>
                                    <td><code translate="no" class="notranslate">csv_delimiter</code></td>
                                    <td>Sets the field delimiter separating values (one
character only)</td>
                                    <td><code translate="no" class="notranslate">,</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">csv_enclosure</code></td>
                                    <td>Sets the field enclosure (one character only)</td>
                                    <td><code translate="no" class="notranslate">&quot;</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">csv_end_of_line</code></td>
                                    <td>Sets the character(s) used to mark the end of each
line in the CSV file</td>
                                    <td><code translate="no" class="notranslate">\n</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">csv_escape_char</code></td>
                                    <td>Sets the escape character (at most one character)</td>
                                    <td>empty string</td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">csv_key_separator</code></td>
                                    <td>Sets the separator for array's keys during its
flattening</td>
                                    <td><code translate="no" class="notranslate">.</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">csv_headers</code></td>
                                    <td>Sets the order of the header and data columns
E.g.: if <code translate="no" class="notranslate">$data = [&#039;c&#039; =&gt; 3, &#039;a&#039; =&gt; 1, &#039;b&#039; =&gt; 2]</code>
and <code translate="no" class="notranslate">$options = [&#039;csv_headers&#039; =&gt; [&#039;a&#039;, &#039;b&#039;, &#039;c&#039;]]</code>
then <code translate="no" class="notranslate">serialize($data, &#039;csv&#039;, $options)</code> returns
<code translate="no" class="notranslate">a,b,c\n1,2,3</code></td>
                                    <td><code translate="no" class="notranslate">[]</code>, inferred from input data's keys</td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">csv_escape_formulas</code></td>
                                    <td>Escapes fields containing formulas by prepending them
with a <code translate="no" class="notranslate">\t</code> character</td>
                                    <td><code translate="no" class="notranslate">false</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">as_collection</code></td>
                                    <td>Always returns results as a collection, even if only
one line is decoded.</td>
                                    <td><code translate="no" class="notranslate">true</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">no_headers</code></td>
                                    <td>Disables header in the encoded CSV</td>
                                    <td><code translate="no" class="notranslate">false</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">output_utf8_bom</code></td>
                                    <td>Outputs special <a href="https://en.wikipedia.org/wiki/Byte_order_mark" class="reference external" rel="external noopener noreferrer" target="_blank">UTF-8 BOM</a> along with encoded data</td>
                                    <td><code translate="no" class="notranslate">false</code></td>
                            </tr>
            </tbody>
</table>
</div>
</div>
</div>
<div class="section">
<h3 id="the-xmlencoder">
    The <code translate="no" class="notranslate">XmlEncoder</code>
    <a class="headerlink" href="#the-xmlencoder" title="Permalink to this headline">¶</a>
</h3>
<p>This encoder transforms arrays into XML and vice versa.</p>
<p>For example, take an object normalized as following:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php">[<span class="hljs-string">'foo'</span> =&gt; [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-string">'bar'</span> =&gt; <span class="hljs-keyword">true</span>];</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The <code translate="no" class="notranslate">XmlEncoder</code> will encode this object like that:</p>
<div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">response</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">foo</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">foo</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">foo</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">foo</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bar</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bar</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">response</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The special <code translate="no" class="notranslate">#</code> key can be used to define the data of a node:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php">[<span class="hljs-string">'foo'</span> =&gt; [<span class="hljs-string">'@bar'</span> =&gt; <span class="hljs-string">'value'</span>, <span class="hljs-string">'#'</span> =&gt; <span class="hljs-string">'baz'</span>]];

<span class="hljs-comment">// is encoded as follows:</span>
<span class="hljs-comment">// <span class="hljs-meta">&lt;?</span>xml version="1.0"<span class="hljs-meta">?&gt;</span></span>
<span class="hljs-comment">// &lt;response&gt;</span>
<span class="hljs-comment">//     &lt;foo bar="value"&gt;</span>
<span class="hljs-comment">//        baz</span>
<span class="hljs-comment">//     &lt;/foo&gt;</span>
<span class="hljs-comment">// &lt;/response&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Furthermore, keys beginning with <code translate="no" class="notranslate">@</code> will be considered attributes, and
the key  <code translate="no" class="notranslate">#comment</code> can be used for encoding XML comments:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span> = <span class="hljs-keyword">new</span> XmlEncoder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span><span class="hljs-operator">-&gt;</span>encode([
    <span class="hljs-string">'foo'</span> =&gt; [<span class="hljs-string">'@bar'</span> =&gt; <span class="hljs-string">'value'</span>],
    <span class="hljs-string">'qux'</span> =&gt; [<span class="hljs-string">'#comment'</span> =&gt; <span class="hljs-string">'A comment'</span>],
], <span class="hljs-string">'xml'</span>);
<span class="hljs-comment">// will return:</span>
<span class="hljs-comment">// <span class="hljs-meta">&lt;?</span>xml version="1.0"<span class="hljs-meta">?&gt;</span></span>
<span class="hljs-comment">// &lt;response&gt;</span>
<span class="hljs-comment">//     &lt;foo bar="value"/&gt;</span>
<span class="hljs-comment">//     &lt;qux&gt;&lt;!-- A comment --!&gt;&lt;qux&gt;</span>
<span class="hljs-comment">// &lt;/response&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>You can pass the context key <code translate="no" class="notranslate">as_collection</code> in order to have the results
always as a collection.</p>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>XML comments are ignored by default when decoding contents, but this
behavior can be changed with the optional context key <code translate="no" class="notranslate">XmlEncoder::DECODER_IGNORED_NODE_TYPES</code>.</p>
<p>Data with <code translate="no" class="notranslate">#comment</code> keys are encoded to XML comments by default. This can be
changed by adding the <code translate="no" class="notranslate">\XML_COMMENT_NODE</code> option to the <code translate="no" class="notranslate">XmlEncoder::ENCODER_IGNORED_NODE_TYPES</code>
key of the <code translate="no" class="notranslate">$defaultContext</code> of the <code translate="no" class="notranslate">XmlEncoder</code> constructor or
directly to the <code translate="no" class="notranslate">$context</code> argument of the <code translate="no" class="notranslate">encode()</code> method:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>xmlEncoder</span><span class="hljs-operator">-&gt;</span>encode(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>array</span>, <span class="hljs-string">'xml'</span>, [XmlEncoder<span class="hljs-operator">::</span>ENCODER_IGNORED_NODE_TYPES =&gt; [\XML_COMMENT_NODE]]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h4 id="the-xmlencoder-context-options">
    The <code translate="no" class="notranslate">XmlEncoder</code> Context Options
    <a class="headerlink" href="#the-xmlencoder-context-options" title="Permalink to this headline">¶</a>
</h4>
<p>The <code translate="no" class="notranslate">encode()</code> method defines a third optional parameter called <code translate="no" class="notranslate">context</code>
which defines the configuration options for the XmlEncoder an associative array:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>xmlEncoder</span><span class="hljs-operator">-&gt;</span>encode(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>array</span>, <span class="hljs-string">'xml'</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>context</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>These are the options available:</p>
<div class="table-wrapper">
<table>
            <thead>
                            <tr>
                                            <th>Option</th>
                                            <th>Description</th>
                                            <th>Default</th>
                                    </tr>
                    </thead>
        <tbody>
                    <tr>
                                    <td><code translate="no" class="notranslate">xml_format_output</code></td>
                                    <td>If set to true, formats the generated XML with
line breaks and indentation</td>
                                    <td><code translate="no" class="notranslate">false</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">xml_version</code></td>
                                    <td>Sets the XML version attribute</td>
                                    <td><code translate="no" class="notranslate">1.0</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">xml_encoding</code></td>
                                    <td>Sets the XML encoding attribute</td>
                                    <td><code translate="no" class="notranslate">utf-8</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">xml_standalone</code></td>
                                    <td>Adds standalone attribute in the generated XML</td>
                                    <td><code translate="no" class="notranslate">true</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">xml_type_cast_attributes</code></td>
                                    <td>This provides the ability to forget the attribute
type casting</td>
                                    <td><code translate="no" class="notranslate">true</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">xml_root_node_name</code></td>
                                    <td>Sets the root node name</td>
                                    <td><code translate="no" class="notranslate">response</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">as_collection</code></td>
                                    <td>Always returns results as a collection, even if
only one line is decoded</td>
                                    <td><code translate="no" class="notranslate">false</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">decoder_ignored_node_types</code></td>
                                    <td>Array of node types (<a href="https://www.php.net/manual/en/dom.constants.php" class="reference external" rel="external noopener noreferrer" target="_blank">DOM XML_* constants</a>)
to be ignored while decoding</td>
                                    <td><code translate="no" class="notranslate">[\XML_PI_NODE, \XML_COMMENT_NODE]</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">encoder_ignored_node_types</code></td>
                                    <td>Array of node types (<a href="https://www.php.net/manual/en/dom.constants.php" class="reference external" rel="external noopener noreferrer" target="_blank">DOM XML_* constants</a>)
to be ignored while encoding</td>
                                    <td><code translate="no" class="notranslate">[]</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">load_options</code></td>
                                    <td>XML loading <a href="https://www.php.net/manual/en/libxml.constants.php" class="reference external" rel="external noopener noreferrer" target="_blank">options with libxml</a></td>
                                    <td><code translate="no" class="notranslate">\LIBXML_NONET | \LIBXML_NOBLANKS</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">save_options</code></td>
                                    <td>XML saving <a href="https://www.php.net/manual/en/libxml.constants.php" class="reference external" rel="external noopener noreferrer" target="_blank">options with libxml</a></td>
                                    <td><code translate="no" class="notranslate">0</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">remove_empty_tags</code></td>
                                    <td>If set to true, removes all empty tags in the
generated XML</td>
                                    <td><code translate="no" class="notranslate">false</code></td>
                            </tr>
            </tbody>
</table>
</div>
<p>Example with custom <code translate="no" class="notranslate">context</code>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">XmlEncoder</span>;

<span class="hljs-comment">// create encoder with specified options as new default settings</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>xmlEncoder</span> = <span class="hljs-keyword">new</span> XmlEncoder([<span class="hljs-string">'xml_format_output'</span> =&gt; <span class="hljs-keyword">true</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = [
    <span class="hljs-string">'id'</span> =&gt; <span class="hljs-string">'IDHNQIItNyQ'</span>,
    <span class="hljs-string">'date'</span> =&gt; <span class="hljs-string">'2019-10-24'</span>,
];

<span class="hljs-comment">// encode with default context</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>xmlEncoder</span><span class="hljs-operator">-&gt;</span>encode(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span>, <span class="hljs-string">'xml'</span>);
<span class="hljs-comment">// outputs:</span>
<span class="hljs-comment">// <span class="hljs-meta">&lt;?</span>xml version="1.0"<span class="hljs-meta">?&gt;</span></span>
<span class="hljs-comment">// &lt;response&gt;</span>
<span class="hljs-comment">//   &lt;id&gt;IDHNQIItNyQ&lt;/id&gt;</span>
<span class="hljs-comment">//   &lt;date&gt;2019-10-24&lt;/date&gt;</span>
<span class="hljs-comment">// &lt;/response&gt;</span>

<span class="hljs-comment">// encode with modified context</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>xmlEncoder</span><span class="hljs-operator">-&gt;</span>encode(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span>, <span class="hljs-string">'xml'</span>, [
    <span class="hljs-string">'xml_root_node_name'</span> =&gt; <span class="hljs-string">'track'</span>,
    <span class="hljs-string">'encoder_ignored_node_types'</span> =&gt; [
        \XML_PI_NODE, <span class="hljs-comment">// removes XML declaration (the leading xml tag)</span>
    ],
]);
<span class="hljs-comment">// outputs:</span>
<span class="hljs-comment">// &lt;track&gt;</span>
<span class="hljs-comment">//   &lt;id&gt;IDHNQIItNyQ&lt;/id&gt;</span>
<span class="hljs-comment">//   &lt;date&gt;2019-10-24&lt;/date&gt;</span>
<span class="hljs-comment">// &lt;/track&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
<div class="section">
<h3 id="the-yamlencoder">
    The <code translate="no" class="notranslate">YamlEncoder</code>
    <a class="headerlink" href="#the-yamlencoder" title="Permalink to this headline">¶</a>
</h3>
<p>This encoder requires the <a href="yaml.html" class="reference internal">Yaml Component</a> and
transforms from and to Yaml.</p>
<div class="section">
<h4 id="the-yamlencoder-context-options">
    The <code translate="no" class="notranslate">YamlEncoder</code> Context Options
    <a class="headerlink" href="#the-yamlencoder-context-options" title="Permalink to this headline">¶</a>
</h4>
<p>The <code translate="no" class="notranslate">encode()</code> method, like other encoder, uses <code translate="no" class="notranslate">context</code> to set
configuration options for the YamlEncoder an associative array:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>yamlEncoder</span><span class="hljs-operator">-&gt;</span>encode(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>array</span>, <span class="hljs-string">'yaml'</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>context</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>These are the options available:</p>
<div class="table-wrapper">
<table>
            <thead>
                            <tr>
                                            <th>Option</th>
                                            <th>Description</th>
                                            <th>Default</th>
                                    </tr>
                    </thead>
        <tbody>
                    <tr>
                                    <td><code translate="no" class="notranslate">yaml_inline</code></td>
                                    <td>The level where you switch to inline YAML</td>
                                    <td><code translate="no" class="notranslate">0</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">yaml_indent</code></td>
                                    <td>The level of indentation (used internally)</td>
                                    <td><code translate="no" class="notranslate">0</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">yaml_flags</code></td>
                                    <td>A bit field of <code translate="no" class="notranslate">Yaml::DUMP_*</code> / <code translate="no" class="notranslate">PARSE_*</code> constants
to customize the encoding / decoding YAML string</td>
                                    <td><code translate="no" class="notranslate">0</code></td>
                            </tr>
            </tbody>
</table>
</div>
<span id="component-serializer-context-builders"></span>
</div>
</div>
</div>
<div class="section">
<h2 id="context-builders">
    Context Builders
    <a class="headerlink" href="#context-builders" title="Permalink to this headline">¶</a>
</h2>
<p>Instead of passing plain PHP arrays to the <a href="../serializer.html#serializer_serializer-context" class="reference internal">serialization context</a>,
you can use &quot;context builders&quot; to define the context using a fluent interface:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Context</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">CsvEncoderContextBuilder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Context</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizerContextBuilder</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>initialContext</span> = [
    <span class="hljs-string">'custom_key'</span> =&gt; <span class="hljs-string">'custom_value'</span>,
];

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>contextBuilder</span> = (<span class="hljs-keyword">new</span> ObjectNormalizerContextBuilder())
    <span class="hljs-operator">-&gt;</span>withContext(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>initialContext</span>)
    <span class="hljs-operator">-&gt;</span>withGroups([<span class="hljs-string">'group1'</span>, <span class="hljs-string">'group2'</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>contextBuilder</span> = (<span class="hljs-keyword">new</span> CsvEncoderContextBuilder())
    <span class="hljs-operator">-&gt;</span>withContext(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>contextBuilder</span>)
    <span class="hljs-operator">-&gt;</span>withDelimiter(<span class="hljs-string">';'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>something</span>, <span class="hljs-string">'csv'</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>contextBuilder</span><span class="hljs-operator">-&gt;</span>toArray());</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.1</span>
    </p><p>Context builders were introduced in Symfony 6.1.</p>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>The Serializer component provides a context builder
for each <a href="serializer.html#component-serializer-normalizers" class="reference internal">normalizer</a>
and <a href="serializer.html#component-serializer-encoders" class="reference internal">encoder</a>.</p>
<p>You can also <a href="../serializer/custom_context_builders.html" class="reference internal">create custom context builders</a>
to deal with your context values.</p>
</div>
</div>
<div class="section">
<h2 id="skipping-null-values">
    Skipping <code translate="no" class="notranslate">null</code> Values
    <a class="headerlink" href="#skipping-null-values" title="Permalink to this headline">¶</a>
</h2>
<p>By default, the Serializer will preserve properties containing a <code translate="no" class="notranslate">null</code> value.
You can change this behavior by setting the <code translate="no" class="notranslate">AbstractObjectNormalizer::SKIP_NULL_VALUES</code> context option
to <code translate="no" class="notranslate">true</code>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>dummy</span> = <span class="hljs-keyword">new</span> <span class="hljs-class"><span class="hljs-keyword">class</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span> = <span class="hljs-string">'notNull'</span>;
};

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>result</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>dummy</span>, <span class="hljs-string">'json'</span>, [AbstractObjectNormalizer<span class="hljs-operator">::</span>SKIP_NULL_VALUES =&gt; <span class="hljs-keyword">true</span>]);
<span class="hljs-comment">// ['bar' =&gt; 'notNull']</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="skipping-uninitialized-properties">
    Skipping Uninitialized Properties
    <a class="headerlink" href="#skipping-uninitialized-properties" title="Permalink to this headline">¶</a>
</h2>
<p>In PHP, typed properties have an <code translate="no" class="notranslate">uninitialized</code> state which is different
from the default <code translate="no" class="notranslate">null</code> of untyped properties. When you try to access a typed
property before giving it an explicit value, you get an error.</p>
<p>To avoid the Serializer throwing an error when serializing or normalizing an
object with uninitialized properties, by default the object normalizer catches
these errors and ignores such properties.</p>
<p>You can disable this behavior by setting the <code translate="no" class="notranslate">AbstractObjectNormalizer::SKIP_UNINITIALIZED_VALUES</code>
context option to <code translate="no" class="notranslate">false</code>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dummy</span> </span>{
    <span class="hljs-keyword">public</span> string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span> = <span class="hljs-string">'initialized'</span>;
    <span class="hljs-keyword">public</span> string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span>; <span class="hljs-comment">// uninitialized</span>
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>result</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-keyword">new</span> Dummy(), <span class="hljs-string">'json'</span>, [AbstractObjectNormalizer<span class="hljs-operator">::</span>SKIP_UNINITIALIZED_VALUES =&gt; <span class="hljs-keyword">false</span>]);
<span class="hljs-comment">// throws Symfony\Component\PropertyAccess\Exception\UninitializedPropertyException as normalizer cannot read uninitialized properties</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>Calling <code translate="no" class="notranslate">PropertyNormalizer::normalize</code> or <code translate="no" class="notranslate">GetSetMethodNormalizer::normalize</code>
with <code translate="no" class="notranslate">AbstractObjectNormalizer::SKIP_UNINITIALIZED_VALUES</code> context option set
to <code translate="no" class="notranslate">false</code> will throw an <code translate="no" class="notranslate">\Error</code> instance if the given object has uninitialized
properties as the normalizer cannot read them (directly or via getter/isser methods).</p>
</div>
<span id="component-serializer-handling-circular-references"></span>
</div>
<div class="section">
<h2 id="collecting-type-errors-while-denormalizing">
    Collecting Type Errors While Denormalizing
    <a class="headerlink" href="#collecting-type-errors-while-denormalizing" title="Permalink to this headline">¶</a>
</h2>
<p>When denormalizing a payload to an object with typed properties, you'll get an
exception if the payload contains properties that don't have the same type as
the object.</p>
<p>In those situations, use the <code translate="no" class="notranslate">COLLECT_DENORMALIZATION_ERRORS</code> option to
collect all exceptions at once, and to get the object partially denormalized:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">try</span> {
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>dto</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>deserialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>request</span><span class="hljs-operator">-&gt;</span>getContent(), MyDto<span class="hljs-operator">::</span>class, <span class="hljs-string">'json'</span>, [
        DenormalizerInterface<span class="hljs-operator">::</span>COLLECT_DENORMALIZATION_ERRORS =&gt; <span class="hljs-keyword">true</span>,
    ]);
} <span class="hljs-keyword">catch</span> (PartialDenormalizationException <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>e</span>) {
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>violations</span> = <span class="hljs-keyword">new</span> ConstraintViolationList();
    <span class="hljs-comment">/** <span class="hljs-doctag">@var</span> NotNormalizableValueException $exception */</span>
    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>e</span><span class="hljs-operator">-&gt;</span>getErrors() <span class="hljs-keyword">as</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>exception</span>) {
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>message</span> = sprintf(<span class="hljs-string">'The type must be one of "%s" ("%s" given).'</span>, implode(<span class="hljs-string">', '</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>exception</span><span class="hljs-operator">-&gt;</span>getExpectedTypes()), <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>exception</span><span class="hljs-operator">-&gt;</span>getCurrentType());
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>parameters</span> = [];
        <span class="hljs-keyword">if</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>exception</span><span class="hljs-operator">-&gt;</span>canUseMessageForUser()) {
            <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>parameters</span>[<span class="hljs-string">'hint'</span>] = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>exception</span><span class="hljs-operator">-&gt;</span>getMessage();
        }
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>violations</span><span class="hljs-operator">-&gt;</span>add(<span class="hljs-keyword">new</span> ConstraintViolation(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>message</span>, <span class="hljs-string">''</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>parameters</span>, <span class="hljs-keyword">null</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>exception</span><span class="hljs-operator">-&gt;</span>getPath(), <span class="hljs-keyword">null</span>));
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>json(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>violations</span>, <span class="hljs-number">400</span>);
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="handling-circular-references">
    Handling Circular References
    <a class="headerlink" href="#handling-circular-references" title="Permalink to this headline">¶</a>
</h2>
<p>Circular references are common when dealing with entity relations:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Organization</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>members</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span><span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>name = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setMembers</span><span class="hljs-params">(array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>members</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>members = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>members</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMembers</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>members;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span><span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>name = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>name</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setOrganization</span><span class="hljs-params">(Organization <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>organization = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOrganization</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>organization;
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>To avoid infinite loops, <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/GetSetMethodNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\GetSetMethodNormalizer" rel="external noopener noreferrer" target="_blank">GetSetMethodNormalizer</a>
or <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ObjectNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ObjectNormalizer" rel="external noopener noreferrer" target="_blank">ObjectNormalizer</a>
throw a <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Exception/CircularReferenceException.php" class="reference external" title="Symfony\Component\Serializer\Exception\CircularReferenceException" rel="external noopener noreferrer" target="_blank">CircularReferenceException</a>
when such a case is encountered:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>member</span> = <span class="hljs-keyword">new</span> Member();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>member</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'Kévin'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span> = <span class="hljs-keyword">new</span> Organization();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'Les-Tilleuls.coop'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span><span class="hljs-operator">-&gt;</span>setMembers([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>member</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>member</span><span class="hljs-operator">-&gt;</span>setOrganization(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span>);

<span class="hljs-keyword">echo</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>organization</span>, <span class="hljs-string">'json'</span>); <span class="hljs-comment">// Throws a CircularReferenceException</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The key <code translate="no" class="notranslate">circular_reference_limit</code> in the default context sets the number of
times it will serialize the same object before considering it a circular
reference. The default value is <code translate="no" class="notranslate">1</code>.</p>
<p>Instead of throwing an exception, circular references can also be handled
by custom callables. This is especially useful when serializing entities
having unique identifiers:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span> = <span class="hljs-keyword">new</span> JsonEncoder();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaultContext</span> = [
    AbstractNormalizer<span class="hljs-operator">::</span>CIRCULAR_REFERENCE_HANDLER =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>object</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>format</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>context</span>)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>object</span><span class="hljs-operator">-&gt;</span>getName();
    },
];
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaultContext</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>], [<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>encoder</span>]);
var_dump(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>org</span>, <span class="hljs-string">'json'</span>));
<span class="hljs-comment">// {"name":"Les-Tilleuls.coop","members":[{"name":"K\u00e9vin", organization: "Les-Tilleuls.coop"}]}</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="serializer_handling-serialization-depth"></span>
</div>
<div class="section">
<h2 id="handling-serialization-depth">
    Handling Serialization Depth
    <a class="headerlink" href="#handling-serialization-depth" title="Permalink to this headline">¶</a>
</h2>
<p>The Serializer component is able to detect and limit the serialization depth.
It is especially useful when serializing large trees. Assume the following data
structure:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyObj</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span>;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> self
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>child</span>;
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span> = <span class="hljs-keyword">new</span> MyObj();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span><span class="hljs-operator">-&gt;</span>foo = <span class="hljs-string">'level1'</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span> = <span class="hljs-keyword">new</span> MyObj();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span><span class="hljs-operator">-&gt;</span>foo = <span class="hljs-string">'level2'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span><span class="hljs-operator">-&gt;</span>child = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level3</span> = <span class="hljs-keyword">new</span> MyObj();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level3</span><span class="hljs-operator">-&gt;</span>foo = <span class="hljs-string">'level3'</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span><span class="hljs-operator">-&gt;</span>child = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level3</span>;</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The serializer can be configured to set a maximum depth for a given property.
Here, we set it to 2 for the <code translate="no" class="notranslate">$child</code> property:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-a822f4b342d0efb0c97db227748191ef324e3aa5" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-a4a867315f61ca240189659fff2ed073e9960415" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-709d2d26feb8da3eecd5f9176f3664988edb7e89" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-a822f4b342d0efb0c97db227748191ef324e3aa5" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">MaxDepth</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyObj</span>
</span>{
    <span class="hljs-comment">#[MaxDepth(2)]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>child</span>;

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-a4a867315f61ca240189659fff2ed073e9960415" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-string">Acme\MyObj:</span>
    <span class="hljs-attr">attributes:</span>
        <span class="hljs-attr">child:</span>
            <span class="hljs-attr">max_depth:</span> <span class="hljs-number">2</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-709d2d26feb8da3eecd5f9176f3664988edb7e89" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">serializer</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping
        https://symfony.com/schema/dic/serializer-mapping/serializer-mapping-1.0.xsd"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Acme\MyObj"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attribute</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"child"</span> <span class="hljs-attr">max-depth</span>=<span class="hljs-string">"2"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">serializer</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>The metadata loader corresponding to the chosen format must be configured in
order to use this feature. It is done automatically when using the Serializer component
in a Symfony application. When using the standalone component, refer to
<a href="serializer.html#component-serializer-attributes-groups" class="reference internal">the groups documentation</a> to
learn how to do that.</p>
<p>The check is only done if the <code translate="no" class="notranslate">AbstractObjectNormalizer::ENABLE_MAX_DEPTH</code> key of the serializer context
is set to <code translate="no" class="notranslate">true</code>. In the following example, the third level is not serialized
because it is deeper than the configured maximum depth of 2:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>result</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span>, <span class="hljs-keyword">null</span>, [AbstractObjectNormalizer<span class="hljs-operator">::</span>ENABLE_MAX_DEPTH =&gt; <span class="hljs-keyword">true</span>]);
<span class="hljs-comment">/*
$result = [
    'foo' =&gt; 'level1',
    'child' =&gt; [
        'foo' =&gt; 'level2',
        'child' =&gt; [
            'child' =&gt; null,
        ],
    ],
];
*/</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Instead of throwing an exception, a custom callable can be executed when the
maximum depth is reached. This is especially useful when serializing entities
having unique identifiers:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">AnnotationReader</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">MaxDepth</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Factory</span>\<span class="hljs-title">ClassMetadataFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Loader</span>\<span class="hljs-title">AnnotationLoader</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">AbstractObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>id</span>;

    <span class="hljs-comment">#[MaxDepth(1)]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>child</span>;
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span> = <span class="hljs-keyword">new</span> Foo();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span><span class="hljs-operator">-&gt;</span>id = <span class="hljs-number">1</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span> = <span class="hljs-keyword">new</span> Foo();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span><span class="hljs-operator">-&gt;</span>id = <span class="hljs-number">2</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span><span class="hljs-operator">-&gt;</span>child = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level3</span> = <span class="hljs-keyword">new</span> Foo();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level3</span><span class="hljs-operator">-&gt;</span>id = <span class="hljs-number">3</span>;
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level2</span><span class="hljs-operator">-&gt;</span>child = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level3</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span> = <span class="hljs-keyword">new</span> ClassMetadataFactory(<span class="hljs-keyword">new</span> AnnotationLoader(<span class="hljs-keyword">new</span> AnnotationReader()));

<span class="hljs-comment">// all callback parameters are optional (you can omit the ones you don't use)</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>maxDepthHandler</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>innerObject</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>outerObject</span>, string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>attributeName</span>, string <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>format</span> = null, array <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>context</span> = [])</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">'/foos/'</span>.<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>innerObject</span><span class="hljs-operator">-&gt;</span>id;
};

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaultContext</span> = [
    AbstractObjectNormalizer<span class="hljs-operator">::</span>MAX_DEPTH_HANDLER =&gt; <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>maxDepthHandler</span>,
];
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>defaultContext</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>result</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>normalize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>level1</span>, <span class="hljs-keyword">null</span>, [AbstractObjectNormalizer<span class="hljs-operator">::</span>ENABLE_MAX_DEPTH =&gt; <span class="hljs-keyword">true</span>]);
<span class="hljs-comment">/*
$result = [
    'id' =&gt; 1,
    'child' =&gt; [
        'id' =&gt; 2,
        'child' =&gt; '/foos/3',
    ],
];
*/</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="handling-arrays">
    Handling Arrays
    <a class="headerlink" href="#handling-arrays" title="Permalink to this headline">¶</a>
</h2>
<p>The Serializer component is capable of handling arrays of objects as well.
Serializing arrays works just like serializing a single object:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">Person</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person1</span> = <span class="hljs-keyword">new</span> Person();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person1</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'foo'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person1</span><span class="hljs-operator">-&gt;</span>setAge(<span class="hljs-number">99</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person1</span><span class="hljs-operator">-&gt;</span>setSportsman(<span class="hljs-keyword">false</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person2</span> = <span class="hljs-keyword">new</span> Person();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person2</span><span class="hljs-operator">-&gt;</span>setName(<span class="hljs-string">'bar'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person2</span><span class="hljs-operator">-&gt;</span>setAge(<span class="hljs-number">33</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person2</span><span class="hljs-operator">-&gt;</span>setSportsman(<span class="hljs-keyword">true</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>persons</span> = [<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person1</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>person2</span>];
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>persons</span>, <span class="hljs-string">'json'</span>);

<span class="hljs-comment">// $data contains [{"name":"foo","age":99,"sportsman":false},{"name":"bar","age":33,"sportsman":true}]</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>If you want to deserialize such a structure, you need to add the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ArrayDenormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ArrayDenormalizer" rel="external noopener noreferrer" target="_blank">ArrayDenormalizer</a>
to the set of normalizers. By appending <code translate="no" class="notranslate">[]</code> to the type parameter of the
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Serializer.php#method_deserialize" class="reference external" title="Symfony\Component\Serializer\Serializer::deserialize()" rel="external noopener noreferrer" target="_blank">deserialize()</a> method,
you indicate that you're expecting an array instead of a single object:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ArrayDenormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">GetSetMethodNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer(
    [<span class="hljs-keyword">new</span> GetSetMethodNormalizer(), <span class="hljs-keyword">new</span> ArrayDenormalizer()],
    [<span class="hljs-keyword">new</span> JsonEncoder()]
);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = ...; <span class="hljs-comment">// The serialized data from the previous example</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>persons</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>deserialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span>, <span class="hljs-string">'Acme\Person[]'</span>, <span class="hljs-string">'json'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="handling-constructor-arguments">
    Handling Constructor Arguments
    <a class="headerlink" href="#handling-constructor-arguments" title="Permalink to this headline">¶</a>
</h2>
<p>If the class constructor defines arguments, as usually happens with
<a href="https://en.wikipedia.org/wiki/Value_object" class="reference external" rel="external noopener noreferrer" target="_blank">Value Objects</a>, the serializer won't be able to create the object if some
arguments are missing. In those cases, use the <code translate="no" class="notranslate">default_constructor_arguments</code>
context option:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">AbstractNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyObj</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span>,
        private <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span>,
    )</span> </span>{
    }
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>data</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>denormalize(
    [<span class="hljs-string">'foo'</span> =&gt; <span class="hljs-string">'Hello'</span>],
    <span class="hljs-string">'MyObj'</span>,
    <span class="hljs-keyword">null</span>,
    [AbstractNormalizer<span class="hljs-operator">::</span>DEFAULT_CONSTRUCTOR_ARGUMENTS =&gt; [
        <span class="hljs-string">'MyObj'</span> =&gt; [<span class="hljs-string">'foo'</span> =&gt; <span class="hljs-string">''</span>, <span class="hljs-string">'bar'</span> =&gt; <span class="hljs-string">''</span>],
    ]]
);
<span class="hljs-comment">// $data = new MyObj('Hello', '');</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="recursive-denormalization-and-type-safety">
    Recursive Denormalization and Type Safety
    <a class="headerlink" href="#recursive-denormalization-and-type-safety" title="Permalink to this headline">¶</a>
</h2>
<p>The Serializer component can use the <a href="property_info.html" class="reference internal">PropertyInfo Component</a> to denormalize
complex types (objects). The type of the class' property will be guessed using the provided
extractor and used to recursively denormalize the inner data.</p>
<p>When using this component in a Symfony application, all normalizers are automatically configured to use the registered extractors.
When using the component standalone, an implementation of <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/PropertyInfo/PropertyTypeExtractorInterface.php" class="reference external" title="Symfony\Component\PropertyInfo\PropertyTypeExtractorInterface" rel="external noopener noreferrer" target="_blank">PropertyTypeExtractorInterface</a>,
(usually an instance of <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/PropertyInfo/PropertyInfoExtractor.php" class="reference external" title="Symfony\Component\PropertyInfo\PropertyInfoExtractor" rel="external noopener noreferrer" target="_blank">PropertyInfoExtractor</a>) must be passed as the 4th
parameter of the <code translate="no" class="notranslate">ObjectNormalizer</code>:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">PropertyInfo</span>\<span class="hljs-title">Extractor</span>\<span class="hljs-title">ReflectionExtractor</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">DateTimeNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ObjectOuter</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inner</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>date</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInner</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>inner;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setInner</span><span class="hljs-params">(ObjectInner <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inner</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>inner = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>inner</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setDate</span><span class="hljs-params">(\DateTimeInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>date</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>date = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>date</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDate</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>date;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ObjectInner</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>foo</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>bar</span>;
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span> = <span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">new</span> ReflectionExtractor());
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer([<span class="hljs-keyword">new</span> DateTimeNormalizer(), <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>normalizer</span>]);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>denormalize(
    [<span class="hljs-string">'inner'</span> =&gt; [<span class="hljs-string">'foo'</span> =&gt; <span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span> =&gt; <span class="hljs-string">'bar'</span>], <span class="hljs-string">'date'</span> =&gt; <span class="hljs-string">'1988/01/21'</span>],
    <span class="hljs-string">'Acme\ObjectOuter'</span>
);

dump(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>getInner()<span class="hljs-operator">-&gt;</span>foo); <span class="hljs-comment">// 'foo'</span>
dump(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>getInner()<span class="hljs-operator">-&gt;</span>bar); <span class="hljs-comment">// 'bar'</span>
dump(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>obj</span><span class="hljs-operator">-&gt;</span>getDate()<span class="hljs-operator">-&gt;</span>format(<span class="hljs-string">'Y-m-d'</span>)); <span class="hljs-comment">// '1988-01-21'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>When a <code translate="no" class="notranslate">PropertyTypeExtractor</code> is available, the normalizer will also check that the data to denormalize
matches the type of the property (even for primitive types). For instance, if a <code translate="no" class="notranslate">string</code> is provided, but
the type of the property is <code translate="no" class="notranslate">int</code>, an <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Exception/UnexpectedValueException.php" class="reference external" title="Symfony\Component\Serializer\Exception\UnexpectedValueException" rel="external noopener noreferrer" target="_blank">UnexpectedValueException</a>
will be thrown. The type enforcement of the properties can be disabled by setting
the serializer context option <code translate="no" class="notranslate">ObjectNormalizer::DISABLE_TYPE_ENFORCEMENT</code>
to <code translate="no" class="notranslate">true</code>.</p>
<span id="serializer_interfaces-and-abstract-classes"></span>
</div>
<div class="section">
<h2 id="serializing-interfaces-and-abstract-classes">
    Serializing Interfaces and Abstract Classes
    <a class="headerlink" href="#serializing-interfaces-and-abstract-classes" title="Permalink to this headline">¶</a>
</h2>
<p>When dealing with objects that are fairly similar or share properties, you may
use interfaces or abstract classes. The Serializer component allows you to
serialize and deserialize these objects using a <em>&quot;discriminator class mapping&quot;</em>.</p>
<p>The discriminator is the field (in the serialized string) used to differentiate
between the possible objects. In practice, when using the Serializer component,
pass a <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Mapping/ClassDiscriminatorResolverInterface.php" class="reference external" title="Symfony\Component\Serializer\Mapping\ClassDiscriminatorResolverInterface" rel="external noopener noreferrer" target="_blank">ClassDiscriminatorResolverInterface</a>
implementation to the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Normalizer/ObjectNormalizer.php" class="reference external" title="Symfony\Component\Serializer\Normalizer\ObjectNormalizer" rel="external noopener noreferrer" target="_blank">ObjectNormalizer</a>.</p>
<p>The Serializer component provides an implementation of <code translate="no" class="notranslate">ClassDiscriminatorResolverInterface</code>
called <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Serializer/Mapping/ClassDiscriminatorFromClassMetadata.php" class="reference external" title="Symfony\Component\Serializer\Mapping\ClassDiscriminatorFromClassMetadata" rel="external noopener noreferrer" target="_blank">ClassDiscriminatorFromClassMetadata</a>
which uses the class metadata factory and a mapping configuration to serialize
and deserialize objects of the correct class.</p>
<p>When using this component inside a Symfony application and the class metadata factory is enabled
as explained in the <a href="serializer.html#component-serializer-attributes-groups" class="reference internal">Attributes Groups section</a>,
this is already set up and you only need to provide the configuration. Otherwise:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Encoder</span>\<span class="hljs-title">JsonEncoder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassDiscriminatorFromClassMetadata</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassDiscriminatorMapping</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Normalizer</span>\<span class="hljs-title">ObjectNormalizer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Serializer</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span> = <span class="hljs-keyword">new</span> ClassMetadataFactory(<span class="hljs-keyword">new</span> AnnotationLoader(<span class="hljs-keyword">new</span> AnnotationReader()));

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>discriminator</span> = <span class="hljs-keyword">new</span> ClassDiscriminatorFromClassMetadata(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span> = <span class="hljs-keyword">new</span> Serializer(
    [<span class="hljs-keyword">new</span> ObjectNormalizer(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>classMetadataFactory</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>discriminator</span>)],
    [<span class="hljs-string">'json'</span> =&gt; <span class="hljs-keyword">new</span> JsonEncoder()]
);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Now configure your discriminator class mapping. Consider an application that
defines an abstract <code translate="no" class="notranslate">CodeRepository</code> class extended by <code translate="no" class="notranslate">GitHubCodeRepository</code>
and <code translate="no" class="notranslate">BitBucketCodeRepository</code> classes:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-853efa37598febd092eebe3ac0af0281f1d4ad54" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-4e2904d353b965f224caad8638051c361e96b13a" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-a9bb193fb7e9fde5349a115ef401fab903ad02bd" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-853efa37598febd092eebe3ac0af0281f1d4ad54" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">BitBucketCodeRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">GitHubCodeRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Serializer</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">DiscriminatorMap</span>;

<span class="hljs-comment">#[DiscriminatorMap(typeProperty: 'type', mapping: [</span>
    <span class="hljs-string">'github'</span> =&gt; GitHubCodeRepository<span class="hljs-operator">::</span>class,
    <span class="hljs-string">'bitbucket'</span> =&gt; BitBucketCodeRepository<span class="hljs-operator">::</span>class,
])]
<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CodeRepository</span>
</span>{
    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4e2904d353b965f224caad8638051c361e96b13a" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-string">App\CodeRepository:</span>
    <span class="hljs-attr">discriminator_map:</span>
        <span class="hljs-attr">type_property:</span> <span class="hljs-string">type</span>
        <span class="hljs-attr">mapping:</span>
            <span class="hljs-attr">github:</span> <span class="hljs-string">'App\GitHubCodeRepository'</span>
            <span class="hljs-attr">bitbucket:</span> <span class="hljs-string">'App\BitBucketCodeRepository'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-a9bb193fb7e9fde5349a115ef401fab903ad02bd" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">serializer</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/serializer-mapping
        https://symfony.com/schema/dic/serializer-mapping/serializer-mapping-1.0.xsd"</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\CodeRepository"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">discriminator-map</span> <span class="hljs-attr">type-property</span>=<span class="hljs-string">"type"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"github"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"App\GitHubCodeRepository"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"bitbucket"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"App\BitBucketCodeRepository"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">discriminator-map</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">serializer</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>Once configured, the serializer uses the mapping to pick the correct class:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serialized</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>serialize(<span class="hljs-keyword">new</span> GitHubCodeRepository(), <span class="hljs-string">'json'</span>);
<span class="hljs-comment">// {"type": "github"}</span>

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>repository</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serializer</span><span class="hljs-operator">-&gt;</span>deserialize(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>serialized</span>, CodeRepository<span class="hljs-operator">::</span>class, <span class="hljs-string">'json'</span>);
<span class="hljs-comment">// instanceof GitHubCodeRepository</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h2 id="learn-more">
    Learn more
    <a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a>
</h2>
<div class="toctree-wrapper toc-size-md"><ul class="toctree toctree-level-1 toctree-length-1"><li><a href="../serializer.html">How to Use the Serializer</a></li></ul></div>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>Normalizers for the Symfony Serializer Component supporting popular web API formats
(JSON-LD, GraphQL, OpenAPI, HAL, <a href="JSON:API" class="reference internal">JSON:API</a>) are available as part of the <a href="https://api-platform.com" class="reference external" rel="external noopener noreferrer" target="_blank">API Platform</a> project.</p>
</div>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>A popular alternative to the Symfony Serializer component is the third-party
library, <a href="https://github.com/schmittjoh/serializer" class="reference external" rel="external noopener noreferrer" target="_blank">JMS serializer</a> (versions before <code translate="no" class="notranslate">v1.12.0</code> were released under
the Apache license, so incompatible with GPLv2 projects).</p>
</div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>