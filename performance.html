        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="performance">
    Performance
    <a class="headerlink" href="#performance" title="Permalink to this headline">¶</a>
</h1>
<p>Symfony is fast, right out of the box. However, you can make it faster if you
optimize your servers and your applications as explained in the following
performance checklists.</p>
<div class="section">
<h2 id="performance-checklists">
    Performance Checklists
    <a class="headerlink" href="#performance-checklists" title="Permalink to this headline">¶</a>
</h2>
<p>Use these checklists to verify that your application and server are configured
for maximum performance:</p>
<ul>
    <li><p><strong>Symfony Application Checklist</strong>:</p>
<ol class="arabic">
    <li><a href="performance.html#performance-install-apcu-polyfill" class="reference internal">Install APCu Polyfill if your server uses APC</a></li>
<li><a href="performance.html#performance-enabled-locales" class="reference internal">Restrict the number of locales enabled in the application</a></li>
</ol></li>
<li><p><strong>Production Server Checklist</strong>:</p>
<ol class="arabic">
    <li><a href="performance.html#performance-service-container-single-file" class="reference internal">Dump the service container into a single file</a></li>
<li><a href="performance.html#performance-use-opcache" class="reference internal">Use the OPcache byte code cache</a></li>
<li><a href="performance.html#performance-configure-opcache" class="reference internal">Configure OPcache for maximum performance</a></li>
<li><a href="performance.html#performance-dont-check-timestamps" class="reference internal">Don't check PHP files timestamps</a></li>
<li><a href="performance.html#performance-configure-realpath-cache" class="reference internal">Configure the PHP realpath Cache</a></li>
<li><a href="performance.html#performance-optimize-composer-autoloader" class="reference internal">Optimize Composer Autoloader</a></li>
</ol></li>
</ul>
<span id="performance-install-apcu-polyfill"></span>
<div class="section">
<h3 id="install-apcu-polyfill-if-your-server-uses-apc">
    Install APCu Polyfill if your Server Uses APC
    <a class="headerlink" href="#install-apcu-polyfill-if-your-server-uses-apc" title="Permalink to this headline">¶</a>
</h3>
<p>If your production server still uses the legacy APC PHP extension instead of
OPcache, install the <a href="https://github.com/symfony/polyfill-apcu" class="reference external" rel="external noopener noreferrer" target="_blank">APCu Polyfill component</a> in your application to enable
compatibility with <a href="https://www.php.net/manual/en/ref.apcu.php" class="reference external" rel="external noopener noreferrer" target="_blank">APCu PHP functions</a> and unlock support for advanced Symfony
features, such as the APCu Cache adapter.</p>
<span id="performance-enabled-locales"></span>
</div>
<div class="section">
<h3 id="restrict-the-number-of-locales-enabled-in-the-application">
    Restrict the Number of Locales Enabled in the Application
    <a class="headerlink" href="#restrict-the-number-of-locales-enabled-in-the-application" title="Permalink to this headline">¶</a>
</h3>
<p>Use the <a href="reference/configuration/framework.html#reference-enabled-locales" class="reference internal">framework.enabled_locales</a>
option to only generate the translation files actually used in your application.</p>
<span id="performance-service-container-single-file"></span>
</div>
<div class="section">
<h3 id="dump-the-service-container-into-a-single-file">
    Dump the Service Container into a Single File
    <a class="headerlink" href="#dump-the-service-container-into-a-single-file" title="Permalink to this headline">¶</a>
</h3>
<p>Symfony compiles the <a href="service_container.html" class="reference internal">service container</a> into multiple
small files by default. Set this parameter to <code translate="no" class="notranslate">true</code> to compile the entire
container into a single file, which could improve performance when using
&quot;class preloading&quot; in PHP 7.4 or newer versions:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-a55d58d0c7ea741f0afdb7e4e22f6de19a56ee5c" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-17747e37320a3e6b93e625e873f26ba84e4e506a" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-4a5838b6ebbe3945c7207a67a1b46ad14f806a65" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-a55d58d0c7ea741f0afdb7e4e22f6de19a56ee5c" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">parameters:</span>
    <span class="hljs-comment"># ...</span>
    <span class="hljs-attr">container.dumper.inline_factories:</span> <span class="hljs-literal">true</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-17747e37320a3e6b93e625e873f26ba84e4e506a" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">parameters</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">parameter</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"container.dumper.inline_factories"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">parameter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parameters</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4a5838b6ebbe3945c7207a67a1b46ad14f806a65" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>

<span class="hljs-comment">// ...</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>container</span><span class="hljs-operator">-&gt;</span>parameters()<span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'container.dumper.inline_factories'</span>, <span class="hljs-keyword">true</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<span id="performance-use-opcache"></span>
</div>
<div class="section">
<h3 id="use-the-opcache-byte-code-cache">
    Use the OPcache Byte Code Cache
    <a class="headerlink" href="#use-the-opcache-byte-code-cache" title="Permalink to this headline">¶</a>
</h3>
<p>OPcache stores the compiled PHP files to avoid having to recompile them for
every request. There are some <a href="https://en.wikipedia.org/wiki/List_of_PHP_accelerators" class="reference external" rel="external noopener noreferrer" target="_blank">byte code caches</a> available, but as of PHP
5.5, PHP comes with <a href="https://www.php.net/manual/en/book.opcache.php" class="reference external" rel="external noopener noreferrer" target="_blank">OPcache</a> built-in. For older versions, the most widely
used byte code cache is <a href="https://www.php.net/manual/en/book.apc.php" class="reference external" rel="external noopener noreferrer" target="_blank">APC</a>.</p>
<span id="performance-use-preloading"></span>
</div>
<div class="section">
<h3 id="use-the-opcache-class-preloading">
    Use the OPcache class preloading
    <a class="headerlink" href="#use-the-opcache-class-preloading" title="Permalink to this headline">¶</a>
</h3>
<p>Starting from PHP 7.4, OPcache can compile and load classes at start-up and
make them available to all requests until the server is restarted, improving
performance significantly.</p>
<p>During container compilation (e.g. when running the <code translate="no" class="notranslate">cache:clear</code> command),
Symfony generates a file with the list of classes to preload in the
<code translate="no" class="notranslate">var/cache/</code> directory. Rather than use this file directly, use the
<code translate="no" class="notranslate">config/preload.php</code> file that is created when
<a href="setup/flex.html" class="reference internal">using Symfony Flex in your project</a>:</p>
<div translate="no" class="highlight-ini notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs ini"><span class="hljs-comment">; php.ini</span>
<span class="hljs-attr">opcache.preload</span>=/path/to/project/config/preload.php

<span class="hljs-comment">; required for opcache.preload:</span>
<span class="hljs-attr">opcache.preload_user</span>=www-data</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>If this file is missing, run this command to update the Symfony Flex recipe:
<code translate="no" class="notranslate">composer recipes:update symfony/framework-bundle</code>.</p>
<p>Use the <a href="reference/dic_tags.html#dic-tags-container-preload" class="reference internal">container.preload</a> and
<a href="reference/dic_tags.html#dic-tags-container-nopreload" class="reference internal">container.no_preload</a> service tags to define
which classes should or should not be preloaded by PHP.</p>
<span id="performance-configure-opcache"></span>
</div>
<div class="section">
<h3 id="configure-opcache-for-maximum-performance">
    Configure OPcache for Maximum Performance
    <a class="headerlink" href="#configure-opcache-for-maximum-performance" title="Permalink to this headline">¶</a>
</h3>
<p>The default OPcache configuration is not suited for Symfony applications, so
it's recommended to change these settings as follows:</p>
<div translate="no" class="highlight-ini notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs ini"><span class="hljs-comment">; php.ini</span>
<span class="hljs-comment">; maximum memory that OPcache can use to store compiled PHP files</span>
<span class="hljs-attr">opcache.memory_consumption</span>=<span class="hljs-number">256</span>

<span class="hljs-comment">; maximum number of files that can be stored in the cache</span>
<span class="hljs-attr">opcache.max_accelerated_files</span>=<span class="hljs-number">20000</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<span id="performance-dont-check-timestamps"></span>
</div>
<div class="section">
<h3 id="don-t-check-php-files-timestamps">
    Don't Check PHP Files Timestamps
    <a class="headerlink" href="#don-t-check-php-files-timestamps" title="Permalink to this headline">¶</a>
</h3>
<p>In production servers, PHP files should never change, unless a new application
version is deployed. However, by default OPcache checks if cached files have
changed their contents since they were cached. This check introduces some
overhead that can be avoided as follows:</p>
<div translate="no" class="highlight-ini notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs ini"><span class="hljs-comment">; php.ini</span>
<span class="hljs-attr">opcache.validate_timestamps</span>=<span class="hljs-number">0</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>After each deployment, you must empty and regenerate the cache of OPcache. Otherwise
you won't see the updates made in the application. Given that in PHP, the CLI
and the web processes don't share the same OPcache, you cannot clear the web
server OPcache by executing some command in your terminal. These are some of the
possible solutions:</p>
<ol class="arabic">
    <li>Restart the web server;</li>
<li>Call the <code translate="no" class="notranslate">apc_clear_cache()</code> or <code translate="no" class="notranslate">opcache_reset()</code> functions via the
web server (i.e. by having these in a script that you execute over the web);</li>
<li>Use the <a href="https://github.com/gordalina/cachetool" class="reference external" rel="external noopener noreferrer" target="_blank">cachetool</a> utility to control APC and OPcache from the CLI.</li>
</ol>
<span id="performance-configure-realpath-cache"></span>
</div>
<div class="section">
<h3 id="configure-the-php-realpath-cache">
    Configure the PHP <code translate="no" class="notranslate">realpath</code> Cache
    <a class="headerlink" href="#configure-the-php-realpath-cache" title="Permalink to this headline">¶</a>
</h3>
<p>When a relative path is transformed into its real and absolute path, PHP
caches the result to improve performance. Applications that open many PHP files,
such as Symfony projects, should use at least these values:</p>
<div translate="no" class="highlight-ini notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs ini"><span class="hljs-comment">; php.ini</span>
<span class="hljs-comment">; maximum memory allocated to store the results</span>
<span class="hljs-attr">realpath_cache_size</span>=<span class="hljs-number">4096</span>K

<span class="hljs-comment">; save the results for 10 minutes (600 seconds)</span>
<span class="hljs-attr">realpath_cache_ttl</span>=<span class="hljs-number">600</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>PHP disables the <code translate="no" class="notranslate">realpath</code> cache when the <a href="https://www.php.net/manual/ini.core.php#ini.open-basedir" class="reference external" rel="external noopener noreferrer" target="_blank">open_basedir</a> config option
is enabled.</p>
</div>
<span id="performance-optimize-composer-autoloader"></span>
</div>
<div class="section">
<h3 id="optimize-composer-autoloader">
    Optimize Composer Autoloader
    <a class="headerlink" href="#optimize-composer-autoloader" title="Permalink to this headline">¶</a>
</h3>
<p>The class loader used while developing the application is optimized to find new
and changed classes. In production servers, PHP files should never change,
unless a new application version is deployed. That's why you can optimize
Composer's autoloader to scan the entire application once and build an
optimized &quot;class map&quot;, which is a big array of the locations of all the classes
and it's stored in <code translate="no" class="notranslate">vendor/composer/autoload_classmap.php</code>.</p>
<p>Execute this command to generate the new class map (and make it part of your
deployment process too):</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>composer dump-autoload --no-dev --classmap-authoritative</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<ul>
    <li><code translate="no" class="notranslate">--no-dev</code> excludes the classes that are only needed in the development
environment (i.e. <code translate="no" class="notranslate">require-dev</code> dependencies and <code translate="no" class="notranslate">autoload-dev</code> rules);</li>
<li><code translate="no" class="notranslate">--classmap-authoritative</code> creates a class map for PSR-0 and PSR-4 compatible classes
used in your application and prevents Composer from scanning the file system for
classes that are not found in the class map. (see: <a href="https://getcomposer.org/doc/articles/autoloader-optimization.md" class="reference external" rel="external noopener noreferrer" target="_blank">Composer's autoloader optimization</a>).</li>
</ul>
</div>
<div class="section">
<h3 id="disable-dumping-the-container-as-xml-in-debug-mode">
    Disable Dumping the Container as XML in Debug Mode
    <a class="headerlink" href="#disable-dumping-the-container-as-xml-in-debug-mode" title="Permalink to this headline">¶</a>
</h3>
<p>In <a href="configuration/front_controllers_and_kernel.html#debug-mode" class="reference internal">debug mode</a>, Symfony generates an XML file with all the
<a href="service_container.html" class="reference internal">service container</a> information (services, arguments, etc.)
This XML file is used by various debugging commands such as <code translate="no" class="notranslate">debug:container</code>
and <code translate="no" class="notranslate">debug:autowiring</code>.</p>
<p>When the container grows larger and larger, so does the size of the file and the
time to generate it. If the benefit of this XML file does not outweigh the decrease
in performance, you can stop generating the file as follows:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-5ab7d06d9a0735f780f1eaaf3b4d5239405ab686" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-7156fb4aafa58c477d00e8383f2581154fe0420b" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-573912e0484a338b1fe137442607642410043170" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-5ab7d06d9a0735f780f1eaaf3b4d5239405ab686" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">parameters:</span>
    <span class="hljs-comment"># ...</span>
    <span class="hljs-attr">debug.container.dump:</span> <span class="hljs-literal">false</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-7156fb4aafa58c477d00e8383f2581154fe0420b" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">parameters</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">parameter</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"debug.container.dump"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">parameter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parameters</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-573912e0484a338b1fe137442607642410043170" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/services.php</span>

<span class="hljs-comment">// ...</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>container</span><span class="hljs-operator">-&gt;</span>parameters()<span class="hljs-operator">-&gt;</span>set(<span class="hljs-string">'debug.container.dump'</span>, <span class="hljs-keyword">false</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<div class="admonition admonition-versionadded ">
    <p class="admonition-title">
                                    <span>6.3</span>
    </p><p>The <code translate="no" class="notranslate">debug.container.dump</code> option was introduced in Symfony 6.3.</p>
</div>
<span id="profiling-applications"></span>
</div>
</div>
<div class="section">
<h2 id="profiling-symfony-applications">
    Profiling Symfony Applications
    <a class="headerlink" href="#profiling-symfony-applications" title="Permalink to this headline">¶</a>
</h2>
<div class="section">
<h3 id="profiling-with-blackfire">
    Profiling with Blackfire
    <a class="headerlink" href="#profiling-with-blackfire" title="Permalink to this headline">¶</a>
</h3>
<p><a href="https://blackfire.io/docs/introduction?utm_source=symfony&utm_medium=symfonycom_docs&utm_campaign=performance" class="reference external" rel="external noopener noreferrer" target="_blank">Blackfire</a> is the best tool to profile and optimize performance of Symfony
applications during development, test and production. It's a commercial service,
but provides free features that you can use to find bottlenecks in your projects.</p>
</div>
<div class="section">
<h3 id="profiling-with-symfony-stopwatch">
    Profiling with Symfony Stopwatch
    <a class="headerlink" href="#profiling-with-symfony-stopwatch" title="Permalink to this headline">¶</a>
</h3>
<p>Symfony provides a basic performance profiler in the development
<a href="configuration.html#configuration-environments" class="reference internal">config environment</a>. Click on the &quot;time panel&quot;
of the <a href="page_creation.html#web-debug-toolbar" class="reference internal">web debug toolbar</a> to see how much time Symfony
spent on tasks such as making database queries and rendering templates.</p>
<p>You can measure the execution time and memory consumption of your own code and
display the result in the Symfony profiler thanks to the <a href="https://symfony.com/components/Stopwatch" class="reference external">Stopwatch component</a>.</p>
<p>When using <a href="service_container.html#services-autowire" class="reference internal">autowiring</a>, type-hint any controller or
service argument with the <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Stopwatch/Stopwatch.php" class="reference external" title="Symfony\Component\Stopwatch\Stopwatch" rel="external noopener noreferrer" target="_blank">Stopwatch</a> class
and Symfony will inject the <code translate="no" class="notranslate">debug.stopwatch</code> service:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Stopwatch</span>\<span class="hljs-title">Stopwatch</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataExporter</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        private Stopwatch <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>stopwatch</span>,
    )</span> </span>{
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">export</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// the argument is the name of the "profiling event"</span>
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>start(<span class="hljs-string">'export-data'</span>);

        <span class="hljs-comment">// ...do things to export data...</span>

        <span class="hljs-comment">// reset the stopwatch to delete all the data measured so far</span>
        <span class="hljs-comment">// $this-&gt;stopwatch-&gt;reset();</span>

        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>stop(<span class="hljs-string">'export-data'</span>);
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>If the request calls this service during its execution, you'll see a new
event called <code translate="no" class="notranslate">export-data</code> in the Symfony profiler.</p>
<p>The <code translate="no" class="notranslate">start()</code>, <code translate="no" class="notranslate">stop()</code> and <code translate="no" class="notranslate">getEvent()</code> methods return a
<a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Stopwatch/StopwatchEvent.php" class="reference external" title="Symfony\Component\Stopwatch\StopwatchEvent" rel="external noopener noreferrer" target="_blank">StopwatchEvent</a> object that provides
information about the current event, even while it's still running. This
object can be converted to a string for a quick summary:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// ...</span>
dump((string) <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>getEvent(<span class="hljs-string">'export-data'</span>)); <span class="hljs-comment">// dumps e.g. '4.50 MiB - 26 ms'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>You can also profile your template code with the <a href="reference/twig_reference.html#reference-twig-tag-stopwatch" class="reference internal">stopwatch Twig tag</a>:</p>
<div translate="no" class="highlight-twig notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs twig"><span class="hljs-template-tag">{% <span class="hljs-name">stopwatch</span> 'render-blog-posts' %}</span><span class="xml">
    </span><span class="hljs-template-tag">{% <span class="hljs-name"><span class="hljs-keyword">for</span></span> post in blog_posts %}</span><span class="xml">
        </span><span class="hljs-comment">{# ... #}</span><span class="xml">
    </span><span class="hljs-template-tag">{% <span class="hljs-name"><span class="hljs-keyword">endfor</span></span> %}</span><span class="xml">
</span><span class="hljs-template-tag">{% <span class="hljs-name">endstopwatch</span> %}</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="section">
<h4 id="profiling-categories">
    Profiling Categories
    <a class="headerlink" href="#profiling-categories" title="Permalink to this headline">¶</a>
</h4>
<p>Use the second optional argument of the <code translate="no" class="notranslate">start()</code> method to define the
category or tag of the event. This helps keep events organized by type:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>start(<span class="hljs-string">'export-data'</span>, <span class="hljs-string">'export'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h4 id="profiling-periods">
    Profiling Periods
    <a class="headerlink" href="#profiling-periods" title="Permalink to this headline">¶</a>
</h4>
<p>A <a href="https://en.wikipedia.org/wiki/Stopwatch" class="reference external" rel="external noopener noreferrer" target="_blank">real-world stopwatch</a> not only includes the start/stop button but also a
&quot;lap button&quot; to measure each partial lap. This is exactly what the <code translate="no" class="notranslate">lap()</code>
method does, which stops an event and then restarts it immediately:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>start(<span class="hljs-string">'process-data-records'</span>, <span class="hljs-string">'export'</span>);

<span class="hljs-keyword">foreach</span> (<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>records</span> <span class="hljs-keyword">as</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>record</span>) {
    <span class="hljs-comment">// ... some code goes here</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>lap(<span class="hljs-string">'process-data-records'</span>);
}

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>event</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>stop(<span class="hljs-string">'process-data-records'</span>);
<span class="hljs-comment">// $event-&gt;getDuration(), $event-&gt;getMemory(), etc.</span>

<span class="hljs-comment">// Lap information is stored as "periods" within the event:</span>
<span class="hljs-comment">// $event-&gt;getPeriods();</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="section">
<h4 id="profiling-sections">
    Profiling Sections
    <a class="headerlink" href="#profiling-sections" title="Permalink to this headline">¶</a>
</h4>
<p>Sections are a way to split the profile timeline into groups. Example:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>openSection();
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>start(<span class="hljs-string">'validating-file'</span>, <span class="hljs-string">'validation'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>stopSection(<span class="hljs-string">'parsing'</span>);

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>events</span> = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>getSectionEvents(<span class="hljs-string">'parsing'</span>);

<span class="hljs-comment">// later you can reopen a section passing its name to the openSection() method</span>
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>openSection(<span class="hljs-string">'parsing'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>start(<span class="hljs-string">'processing-file'</span>);
<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>stopSection(<span class="hljs-string">'parsing'</span>);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>All events that don't belong to any named section are added to the special section
called <code translate="no" class="notranslate">__root__</code>. This way you can get all stopwatch events, even if you don't
know their names, as follows:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">foreach</span>(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>stopwatch<span class="hljs-operator">-&gt;</span>getSectionEvents(<span class="hljs-string">'__root__'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>event</span>) {
    <span class="hljs-keyword">echo</span> (string) <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>event</span>;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
</div>
<div class="section">
<h2 id="learn-more">
    Learn more
    <a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a>
</h2>
<ul>
    <li><a href="http_cache/varnish.html" class="reference internal">How to Use Varnish to Speed up my Website</a></li>
</ul>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>