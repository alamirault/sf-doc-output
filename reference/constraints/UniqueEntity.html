        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="uniqueentity">
    UniqueEntity
    <a class="headerlink" href="#uniqueentity" title="Permalink to this headline">¶</a>
</h1>
<p>Validates that a particular field (or fields) in a Doctrine entity is (are)
unique. This is commonly used, for example, to prevent a new user to register
using an email address that already exists in the system.</p>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>If you want to validate that all the elements of the collection are unique
use the <a href="Unique.html" class="reference internal">Unique constraint</a>.</p>
</div>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>In order to use this constraint, you should have installed the
symfony/doctrine-bridge with Composer.</p>
</div>
<div class="table-wrapper">
<table>
        <tbody>
                    <tr>
                                    <td>Applies to</td>
                                    <td><a href="../../validation.html#validation-class-target" class="reference internal">class</a></td>
                            </tr>
                    <tr>
                                    <td>Class</td>
                                    <td><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Bridge/Doctrine/Validator/Constraints/UniqueEntity.php" class="reference external" title="Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity" rel="external noopener noreferrer" target="_blank">UniqueEntity</a></td>
                            </tr>
                    <tr>
                                    <td>Validator</td>
                                    <td><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Bridge/Doctrine/Validator/Constraints/UniqueEntityValidator.php" class="reference external" title="Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntityValidator" rel="external noopener noreferrer" target="_blank">UniqueEntityValidator</a></td>
                            </tr>
            </tbody>
</table>
</div>
<div class="section">
<h2 id="basic-usage">
    Basic Usage
    <a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a>
</h2>
<p>Suppose you have a <code translate="no" class="notranslate">User</code> entity that has an <code translate="no" class="notranslate">email</code> field. You can use the
<code translate="no" class="notranslate">UniqueEntity</code> constraint to guarantee that the <code translate="no" class="notranslate">email</code> field remains unique
between all of the rows in your user table:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-4">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-f0baa40a3cd25608fed675a3119fc4dd6027e643" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-27047491831e93383624bbe223a3dc43909d8b4d" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-5c300fdec6a17ad9f7d844cc33718f955edcd878" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-12bca22055acd96c2fced3a04084a5dc919d6a6a" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-f0baa40a3cd25608fed675a3119fc4dd6027e643" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-comment">// src/Entity/User.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Mapping</span> <span class="hljs-title">as</span> <span class="hljs-title">ORM</span>;

<span class="hljs-comment">// DON'T forget the following use statement!!!</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bridge</span>\<span class="hljs-title">Doctrine</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span>\<span class="hljs-title">UniqueEntity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;

<span class="hljs-comment">#[ORM\Entity]</span>
<span class="hljs-comment">#[UniqueEntity('email')]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">#[ORM\Column(name: 'email', type: 'string', length: 255, unique: true)]</span>
    <span class="hljs-comment">#[Assert\Email]</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>email</span>;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-27047491831e93383624bbe223a3dc43909d8b4d" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/validator/validation.yaml</span>
<span class="hljs-string">App\Entity\User:</span>
    <span class="hljs-attr">constraints:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity:</span> <span class="hljs-string">email</span>
    <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">email:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">Email:</span> <span class="hljs-string">~</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-5c300fdec6a17ad9f7d844cc33718f955edcd878" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">constraint-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Entity\User"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"fields"</span>&gt;</span>email<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">constraint</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Email"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">constraint-mapping</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-12bca22055acd96c2fced3a04084a5dc919d6a6a" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Entity/User.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-comment">// DON'T forget the following use statement!!!</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bridge</span>\<span class="hljs-title">Doctrine</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span>\<span class="hljs-title">UniqueEntity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadValidatorMetadata</span><span class="hljs-params">(ClassMetadata <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span><span class="hljs-operator">-&gt;</span>addConstraint(<span class="hljs-keyword">new</span> UniqueEntity([
            <span class="hljs-string">'fields'</span> =&gt; <span class="hljs-string">'email'</span>,
        ]));

        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span><span class="hljs-operator">-&gt;</span>addPropertyConstraint(<span class="hljs-string">'email'</span>, <span class="hljs-keyword">new</span> Assert\Email());
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>This constraint doesn't provide any protection against <a href="https://en.wikipedia.org/wiki/Race_condition" class="reference external" rel="external noopener noreferrer" target="_blank">race conditions</a>.
They may occur when another entity is persisted by an external process after
this validation has passed and before this entity is actually persisted in
the database.</p>
</div>
<div class="admonition admonition-caution ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Caution</span>
    </p><p>This constraint cannot deal with duplicates found in a collection of items
that haven't been persisted as entities yet. You'll need to create your own
validator to handle that case.</p>
</div>
</div>
<div class="section">
<h2 id="options">
    Options
    <a class="headerlink" href="#options" title="Permalink to this headline">¶</a>
</h2>
<div class="section">
<h3 id="em">
    em
    <a class="headerlink" href="#em" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>The name of the entity manager to use for making the query to determine
the uniqueness. If it's left blank, the correct entity manager will be
determined for this class. For that reason, this option should probably
not need to be used.</p>
</div>
<div class="section">
<h3 id="entityclass">
    <code translate="no" class="notranslate">entityClass</code>
    <a class="headerlink" href="#entityclass" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>By default, the query performed to ensure the uniqueness uses the repository of
the current class instance. However, in some cases, such as when using Doctrine
inheritance mapping, you need to execute the query in a different repository.
Use this option to define the fully-qualified class name (FQCN) of the Doctrine
entity associated with the repository you want to use.</p>
</div>
<div class="section">
<h3 id="errorpath">
    <code translate="no" class="notranslate">errorPath</code>
    <a class="headerlink" href="#errorpath" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: The name of the first field in <a href="UniqueEntity.html#fields" class="reference internal">fields</a></p>
<p>If the entity violates the constraint the error message is bound to the
first field in <a href="UniqueEntity.html#fields" class="reference internal">fields</a>. If there is more than one field, you may want
to map the error message to another field.</p>
<p>Consider this example:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-4">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-2bf7a4d5ba12c1aaf65130d9502df5712473f198" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-fc3e981b721642e987e6c14f9052c56df1956d79" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-5fb7620a8aa8099cba5cfadc1e7d3e0e574d572d" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-347ae80844531dcdb68b7f18aa5b48f03d7e8238" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-2bf7a4d5ba12c1aaf65130d9502df5712473f198" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-comment">// src/Entity/Service.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>\<span class="hljs-title">Host</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Mapping</span> <span class="hljs-title">as</span> <span class="hljs-title">ORM</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bridge</span>\<span class="hljs-title">Doctrine</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span>\<span class="hljs-title">UniqueEntity</span>;

<span class="hljs-comment">#[ORM\Entity]</span>
<span class="hljs-comment">#[UniqueEntity(</span>
    fields: [<span class="hljs-string">'host'</span>, <span class="hljs-string">'port'</span>],
    errorPath: <span class="hljs-string">'port'</span>,
    message: <span class="hljs-string">'This port is already in use on that host.'</span>,
)]
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Service</span>
</span>{
    <span class="hljs-comment">#[ORM\ManyToOne(targetEntity: Host::class)]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>host</span>;

    <span class="hljs-comment">#[ORM\Column(type: 'integer')]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>port</span>;
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-fc3e981b721642e987e6c14f9052c56df1956d79" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/validator/validation.yaml</span>
<span class="hljs-string">App\Entity\Service:</span>
    <span class="hljs-attr">constraints:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity:</span>
            <span class="hljs-attr">fields:</span> <span class="hljs-string">[host,</span> <span class="hljs-string">port]</span>
            <span class="hljs-attr">errorPath:</span> <span class="hljs-string">port</span>
            <span class="hljs-attr">message:</span> <span class="hljs-string">'This port is already in use on that host.'</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-5fb7620a8aa8099cba5cfadc1e7d3e0e574d572d" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">constraint-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Entity\Service"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"fields"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>host<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>port<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"errorPath"</span>&gt;</span>port<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"message"</span>&gt;</span>This port is already in use on that host.<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">constraint</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">constraint-mapping</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-347ae80844531dcdb68b7f18aa5b48f03d7e8238" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Entity/Service.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bridge</span>\<span class="hljs-title">Doctrine</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span>\<span class="hljs-title">UniqueEntity</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassMetadata</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Service</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>host</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>port</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadValidatorMetadata</span><span class="hljs-params">(ClassMetadata <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span><span class="hljs-operator">-&gt;</span>addConstraint(<span class="hljs-keyword">new</span> UniqueEntity([
            <span class="hljs-string">'fields'</span> =&gt; [<span class="hljs-string">'host'</span>, <span class="hljs-string">'port'</span>],
            <span class="hljs-string">'errorPath'</span> =&gt; <span class="hljs-string">'port'</span>,
            <span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'This port is already in use on that host.'</span>,
        ]));
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>Now, the message would be bound to the <code translate="no" class="notranslate">port</code> field with this configuration.</p>
</div>
<div class="section">
<h3 id="fields">
    <code translate="no" class="notranslate">fields</code>
    <a class="headerlink" href="#fields" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">array</code> | <code translate="no" class="notranslate">string</code> [<a href="../../validation.html#validation-default-option" class="reference internal">default option</a>]</p>
<p>This required option is the field (or list of fields) on which this entity
should be unique. For example, if you specified both the <code translate="no" class="notranslate">email</code> and <code translate="no" class="notranslate">name</code>
field in a single <code translate="no" class="notranslate">UniqueEntity</code> constraint, then it would enforce that
the combination value is unique (e.g. two users could have the same email,
as long as they don't have the same name also).</p>
<p>If you need to require two fields to be individually unique (e.g. a unique
<code translate="no" class="notranslate">email</code> <em>and</em> a unique <code translate="no" class="notranslate">username</code>), you use two <code translate="no" class="notranslate">UniqueEntity</code> entries,
each with a single field.</p>
</div>
<div class="section">
<h3 id="groups">
    <code translate="no" class="notranslate">groups</code>
    <a class="headerlink" href="#groups" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">array</code> | <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>It defines the validation group or groups of this constraint. Read more
about <a href="../../validation/groups.html" class="reference internal">validation groups</a>.</p>
</div>
<div class="section">
<h3 id="ignorenull">
    <code translate="no" class="notranslate">ignoreNull</code>
    <a class="headerlink" href="#ignorenull" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">boolean</code> <strong>default</strong>: <code translate="no" class="notranslate">true</code></p>
<p>If this option is set to <code translate="no" class="notranslate">true</code>, then the constraint will allow multiple
entities to have a <code translate="no" class="notranslate">null</code> value for a field without failing validation.
If set to <code translate="no" class="notranslate">false</code>, only one <code translate="no" class="notranslate">null</code> value is allowed - if a second entity
also has a <code translate="no" class="notranslate">null</code> value, validation would fail.</p>
</div>
<div class="section">
<h3 id="message">
    <code translate="no" class="notranslate">message</code>
    <a class="headerlink" href="#message" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">This value is already used.</code></p>
<p>The message that's displayed when this constraint fails. This message is by default
mapped to the first field causing the violation. When using multiple fields
in the constraint, the mapping can be specified via the <a href="UniqueEntity.html#errorpath" class="reference internal">errorPath</a> property.</p>
<p>Messages can include the <code translate="no" class="notranslate">{{ value }}</code> placeholder to display a string
representation of the invalid entity. If the entity doesn't define the
<code translate="no" class="notranslate">__toString()</code> method, the following generic value will be used: <em>&quot;Object of
class __CLASS__ identified by &lt;comma separated IDs&gt;&quot;</em></p>
<p>You can use the following parameters in this message:</p>
<div class="table-wrapper">
<table>
            <thead>
                            <tr>
                                            <th>Parameter</th>
                                            <th>Description</th>
                                    </tr>
                    </thead>
        <tbody>
                    <tr>
                                    <td><code translate="no" class="notranslate">{{ value }}</code></td>
                                    <td>The current (invalid) value</td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">{{ label }}</code></td>
                                    <td>Corresponding form field label</td>
                            </tr>
            </tbody>
</table>
</div>
</div>
<div class="section">
<h3 id="payload">
    <code translate="no" class="notranslate">payload</code>
    <a class="headerlink" href="#payload" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">mixed</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This option can be used to attach arbitrary domain-specific data to a constraint.
The configured payload is not used by the Validator component, but its processing
is completely up to you.</p>
<p>For example, you may want to use
<a href="../../validation/severity.html" class="reference internal">several error levels</a> to present failed
constraints differently in the front-end depending on the severity of the
error.</p>
</div>
<div class="section">
<h3 id="repositorymethod">
    <code translate="no" class="notranslate">repositoryMethod</code>
    <a class="headerlink" href="#repositorymethod" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">findBy</code></p>
<p>The name of the repository method used to determine the uniqueness. If it's left
blank, <code translate="no" class="notranslate">findBy()</code> will be used. The method receives as its argument a
<code translate="no" class="notranslate">fieldName =&gt; value</code> associative array (where <code translate="no" class="notranslate">fieldName</code> is each of the
fields configured in the <code translate="no" class="notranslate">fields</code> option). The method should return a
<a href="https://secure.php.net/manual/en/function.is-countable.php" class="reference external" title="is_countable" rel="external noopener noreferrer" target="_blank">countable PHP variable</a>.</p>
</div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>