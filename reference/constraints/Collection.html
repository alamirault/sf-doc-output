        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="collection">
    Collection
    <a class="headerlink" href="#collection" title="Permalink to this headline">¶</a>
</h1>
<p>This constraint is used when the underlying data is a collection (i.e. an
array or an object that implements <code translate="no" class="notranslate">Traversable</code> and <code translate="no" class="notranslate">ArrayAccess</code>),
but you'd like to validate different keys of that collection in different
ways. For example, you might validate the <code translate="no" class="notranslate">email</code> key using the <code translate="no" class="notranslate">Email</code>
constraint and the <code translate="no" class="notranslate">inventory</code> key of the collection with the <code translate="no" class="notranslate">Range</code>
constraint.</p>
<p>This constraint can also make sure that certain collection keys are present
and that extra keys are not present.</p>
<div class="admonition admonition-seealso ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                <span>See also</span>
    </p><p>If you want to validate that all the elements of the collection are unique
use the <a href="Unique.html" class="reference internal">Unique constraint</a>.</p>
</div>
<div class="table-wrapper">
<table>
        <tbody>
                    <tr>
                                    <td>Applies to</td>
                                    <td><a href="../../validation.html#validation-property-target" class="reference internal">property or method</a></td>
                            </tr>
                    <tr>
                                    <td>Class</td>
                                    <td><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Validator/Constraints/Collection.php" class="reference external" title="Symfony\Component\Validator\Constraints\Collection" rel="external noopener noreferrer" target="_blank">Collection</a></td>
                            </tr>
                    <tr>
                                    <td>Validator</td>
                                    <td><a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/Validator/Constraints/CollectionValidator.php" class="reference external" title="Symfony\Component\Validator\Constraints\CollectionValidator" rel="external noopener noreferrer" target="_blank">CollectionValidator</a></td>
                            </tr>
            </tbody>
</table>
</div>
<div class="section">
<h2 id="basic-usage">
    Basic Usage
    <a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a>
</h2>
<p>The <code translate="no" class="notranslate">Collection</code> constraint allows you to validate the different keys
of a collection individually. Take the following example:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Entity/Author.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>profileData</span> = [
        <span class="hljs-string">'personal_email'</span> =&gt; <span class="hljs-string">'...'</span>,
        <span class="hljs-string">'short_bio'</span> =&gt; <span class="hljs-string">'...'</span>,
    ];

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProfileData</span><span class="hljs-params">(<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>key</span>, <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>profileData[<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>key</span>] = <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>value</span>;
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>To validate that the <code translate="no" class="notranslate">personal_email</code> element of the <code translate="no" class="notranslate">profileData</code> array
property is a valid email address and that the <code translate="no" class="notranslate">short_bio</code> element is
not blank but is no longer than 100 characters in length, you would do the
following:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-4">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-0035468172ce546207c923aff90ae0534e740745" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-7ed2a065dde0b802a53d8e6dcebeaa4840703e2b" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-508934ca930925fd2f1114fdd56ae24e312c041d" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-4ede4ae63e1fd7106411a2f1acb0b097050d50df" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-0035468172ce546207c923aff90ae0534e740745" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-comment">// src/Entity/Author.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>
</span>{
    <span class="hljs-comment">#[Assert\Collection(</span>
        fields: [
            <span class="hljs-string">'personal_email'</span> =&gt; <span class="hljs-keyword">new</span> Assert\Email,
            <span class="hljs-string">'short_bio'</span> =&gt; [
                <span class="hljs-keyword">new</span> Assert\NotBlank,
                <span class="hljs-keyword">new</span> Assert\Length(
                    max: <span class="hljs-number">100</span>,
                    maxMessage: <span class="hljs-string">'Your short bio is too long!'</span>
                )
            ]
        ],
        allowMissingFields: <span class="hljs-keyword">true</span>,
    )]
    <span class="hljs-keyword">protected</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>profileData</span> = [
        <span class="hljs-string">'personal_email'</span> =&gt; <span class="hljs-string">'...'</span>,
        <span class="hljs-string">'short_bio'</span> =&gt; <span class="hljs-string">'...'</span>,
    ];
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-7ed2a065dde0b802a53d8e6dcebeaa4840703e2b" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/validator/validation.yaml</span>
<span class="hljs-string">App\Entity\Author:</span>
    <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">profileData:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">Collection:</span>
                <span class="hljs-attr">fields:</span>
                    <span class="hljs-attr">personal_email:</span>
                        <span class="hljs-bullet">-</span> <span class="hljs-attr">Email:</span> <span class="hljs-string">~</span>
                    <span class="hljs-attr">short_bio:</span>
                        <span class="hljs-bullet">-</span> <span class="hljs-attr">NotBlank:</span> <span class="hljs-string">~</span>
                        <span class="hljs-bullet">-</span> <span class="hljs-attr">Length:</span>
                            <span class="hljs-attr">max:</span>   <span class="hljs-number">100</span>
                            <span class="hljs-attr">maxMessage:</span> <span class="hljs-string">Your</span> <span class="hljs-string">short</span> <span class="hljs-string">bio</span> <span class="hljs-string">is</span> <span class="hljs-string">too</span> <span class="hljs-string">long!</span>
                <span class="hljs-attr">allowMissingFields:</span> <span class="hljs-literal">true</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-508934ca930925fd2f1114fdd56ae24e312c041d" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">constraint-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Entity\Author"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profileData"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Collection"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"fields"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"personal_email"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Email"</span>/&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"short_bio"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"NotBlank"</span>/&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Length"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"max"</span>&gt;</span>100<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxMessage"</span>&gt;</span>Your short bio is too long!<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">constraint</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"allowMissingFields"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">constraint</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">constraint-mapping</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4ede4ae63e1fd7106411a2f1acb0b097050d50df" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Entity/Author.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassMetadata</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadValidatorMetadata</span><span class="hljs-params">(ClassMetadata <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span><span class="hljs-operator">-&gt;</span>addPropertyConstraint(<span class="hljs-string">'profileData'</span>, <span class="hljs-keyword">new</span> Assert\Collection([
            <span class="hljs-string">'fields'</span> =&gt; [
                <span class="hljs-string">'personal_email'</span> =&gt; <span class="hljs-keyword">new</span> Assert\Email(),
                <span class="hljs-string">'short_bio'</span> =&gt; [
                    <span class="hljs-keyword">new</span> Assert\NotBlank(),
                    <span class="hljs-keyword">new</span> Assert\Length([
                        <span class="hljs-string">'max'</span> =&gt; <span class="hljs-number">100</span>,
                        <span class="hljs-string">'maxMessage'</span> =&gt; <span class="hljs-string">'Your short bio is too long!'</span>,
                    ]),
                ],
            ],
            <span class="hljs-string">'allowMissingFields'</span> =&gt; <span class="hljs-keyword">true</span>,
        ]));
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<div class="section">
<h3 id="presence-and-absence-of-fields">
    Presence and Absence of Fields
    <a class="headerlink" href="#presence-and-absence-of-fields" title="Permalink to this headline">¶</a>
</h3>
<p>By default, this constraint validates more than whether or not the
individual fields in the collection pass their assigned constraints. In
fact, if any keys of a collection are missing or if there are any unrecognized
keys in the collection, validation errors will be thrown.</p>
<p>If you would like to allow for keys to be absent from the collection or
if you would like &quot;extra&quot; keys to be allowed in the collection, you can
modify the <a href="Collection.html#allowmissingfields" class="reference internal">allowMissingFields</a> and <a href="Collection.html#allowextrafields" class="reference internal">allowExtraFields</a> options respectively.
In the above example, the <code translate="no" class="notranslate">allowMissingFields</code> option was set to true,
meaning that if either of the <code translate="no" class="notranslate">personal_email</code> or <code translate="no" class="notranslate">short_bio</code> elements
were missing from the <code translate="no" class="notranslate">$personalData</code> property, no validation error would
occur.</p>
</div>
<div class="section">
<h3 id="required-and-optional-field-constraints">
    Required and Optional Field Constraints
    <a class="headerlink" href="#required-and-optional-field-constraints" title="Permalink to this headline">¶</a>
</h3>
<p>Constraints for fields within a collection can be wrapped in the <code translate="no" class="notranslate">Required</code>
or <code translate="no" class="notranslate">Optional</code> constraint to control whether they should always be applied
(<code translate="no" class="notranslate">Required</code>) or only applied when the field is present (<code translate="no" class="notranslate">Optional</code>).</p>
<p>For instance, if you want to require that the <code translate="no" class="notranslate">personal_email</code> field of
the <code translate="no" class="notranslate">profileData</code> array is not blank and is a valid email but the
<code translate="no" class="notranslate">alternate_email</code> field is optional but must be a valid email if supplied,
you can do the following:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-4">
                    <button role="tab" type="button" data-language="php-attributes"
                aria-controls="configuration-block-tabpanel-31b2cce085ff3f69e2ee6d7dd3fd0f4f3cfc1d00" aria-selected="true"
                data-active="true" >
                <span>Attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-982d09c454bfc5df4a4a72513f51de55ffd1174f" aria-selected="false"
                 tabindex="-1">
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-d2051001211033cd88a441c5de3032d60f8462fc" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-139a53037510620e46e4c3ed73ce300fe950729f" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-31b2cce085ff3f69e2ee6d7dd3fd0f4f3cfc1d00" aria-label="Attributes" class="configuration-codeblock" data-language="php-attributes" style="">
            <div translate="no" class="highlight-php-attributes highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php-attributes php"><span class="hljs-comment">// src/Entity/Author.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>
</span>{
    <span class="hljs-comment">#[Assert\Collection(</span>
        fields: [
            <span class="hljs-string">'personal_email'</span> =&gt; <span class="hljs-keyword">new</span> Assert\Required([
                <span class="hljs-keyword">new</span> Assert\NotBlank,
                <span class="hljs-keyword">new</span> Assert\Email,
            ]),
            <span class="hljs-string">'alternate_email'</span> =&gt; <span class="hljs-keyword">new</span> Assert\Optional(
                <span class="hljs-keyword">new</span> Assert\Email
            ),
        ],
    )]
    <span class="hljs-keyword">protected</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>profileData</span> = [<span class="hljs-string">'personal_email'</span> =&gt; <span class="hljs-string">'email@example.com'</span>];
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-982d09c454bfc5df4a4a72513f51de55ffd1174f" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="display: none">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/validator/validation.yaml</span>
<span class="hljs-string">App\Entity\Author:</span>
    <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">profile_data:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">Collection:</span>
                <span class="hljs-attr">fields:</span>
                    <span class="hljs-attr">personal_email:</span>
                        <span class="hljs-bullet">-</span> <span class="hljs-attr">Required:</span>
                            <span class="hljs-bullet">-</span> <span class="hljs-attr">NotBlank:</span> <span class="hljs-string">~</span>
                            <span class="hljs-bullet">-</span> <span class="hljs-attr">Email:</span> <span class="hljs-string">~</span>
                    <span class="hljs-attr">alternate_email:</span>
                        <span class="hljs-bullet">-</span> <span class="hljs-attr">Optional:</span>
                            <span class="hljs-bullet">-</span> <span class="hljs-attr">Email:</span> <span class="hljs-string">~</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-d2051001211033cd88a441c5de3032d60f8462fc" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">constraint-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/constraint-mapping https://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Entity\Author"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_data"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Collection"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"fields"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"personal_email"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Required"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"NotBlank"</span>/&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Email"</span>/&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">constraint</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"alternate_email"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Optional"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">constraint</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Email"</span>/&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">constraint</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">constraint</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">constraint-mapping</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-139a53037510620e46e4c3ed73ce300fe950729f" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// src/Entity/Author.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassMetadata</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>profileData</span> = [<span class="hljs-string">'personal_email'</span>];

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadValidatorMetadata</span><span class="hljs-params">(ClassMetadata <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span>)</span>
    </span>{
        <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>metadata</span><span class="hljs-operator">-&gt;</span>addPropertyConstraint(<span class="hljs-string">'profileData'</span>, <span class="hljs-keyword">new</span> Assert\Collection([
            <span class="hljs-string">'fields'</span> =&gt; [
                <span class="hljs-string">'personal_email'</span>  =&gt; <span class="hljs-keyword">new</span> Assert\Required([
                    <span class="hljs-keyword">new</span> Assert\NotBlank(),
                    <span class="hljs-keyword">new</span> Assert\Email(),
                ]),
                <span class="hljs-string">'alternate_email'</span> =&gt; <span class="hljs-keyword">new</span> Assert\Optional(<span class="hljs-keyword">new</span> Assert\Email()),
            ],
        ]));
    }
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>Even without <code translate="no" class="notranslate">allowMissingFields</code> set to true, you can now omit the <code translate="no" class="notranslate">alternate_email</code>
property completely from the <code translate="no" class="notranslate">profileData</code> array, since it is <code translate="no" class="notranslate">Optional</code>.
However, if the <code translate="no" class="notranslate">personal_email</code> field does not exist in the array,
the <code translate="no" class="notranslate">NotBlank</code> constraint will still be applied (since it is wrapped in
<code translate="no" class="notranslate">Required</code>) and you will receive a constraint violation.</p>
<p>When you define groups in nested constraints they are automatically added to
the <code translate="no" class="notranslate">Collection</code> constraint itself so it can be traversed for all nested
groups. Take the following example:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;

<span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>constraint</span> = <span class="hljs-keyword">new</span> Assert\Collection([
    <span class="hljs-string">'fields'</span> =&gt; [
        <span class="hljs-string">'name'</span> =&gt; <span class="hljs-keyword">new</span> Assert\NotBlank([<span class="hljs-string">'groups'</span> =&gt; <span class="hljs-string">'basic'</span>]),
        <span class="hljs-string">'email'</span> =&gt; <span class="hljs-keyword">new</span> Assert\NotBlank([<span class="hljs-string">'groups'</span> =&gt; <span class="hljs-string">'contact'</span>]),
    ],
]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>This will result in the following configuration:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>constraint</span> = <span class="hljs-keyword">new</span> Assert\Collection([
    <span class="hljs-string">'fields'</span> =&gt; [
        <span class="hljs-string">'name'</span> =&gt; <span class="hljs-keyword">new</span> Assert\Required([
            <span class="hljs-string">'constraints'</span> =&gt; <span class="hljs-keyword">new</span> Assert\NotBlank([<span class="hljs-string">'groups'</span> =&gt; <span class="hljs-string">'basic'</span>]),
            <span class="hljs-string">'groups'</span> =&gt; [<span class="hljs-string">'basic'</span>, <span class="hljs-string">'strict'</span>],
        ]),
        <span class="hljs-string">'email'</span> =&gt; <span class="hljs-keyword">new</span> Assert\Required([
            <span class="hljs-string">"constraints"</span> =&gt; <span class="hljs-keyword">new</span> Assert\NotBlank([<span class="hljs-string">'groups'</span> =&gt; <span class="hljs-string">'contact'</span>]),
            <span class="hljs-string">'groups'</span> =&gt; [<span class="hljs-string">'basic'</span>, <span class="hljs-string">'strict'</span>],
        ]),
    ],
    <span class="hljs-string">'groups'</span> =&gt; [<span class="hljs-string">'basic'</span>, <span class="hljs-string">'strict'</span>],
]);</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The default <code translate="no" class="notranslate">allowMissingFields</code> option requires the fields in all groups.
So when validating in <code translate="no" class="notranslate">contact</code> group, <code translate="no" class="notranslate">$name</code> can be empty but the key is
still required. If this is not the intended behavior, use the <code translate="no" class="notranslate">Optional</code>
constraint explicitly instead of <code translate="no" class="notranslate">Required</code>.</p>
</div>
</div>
<div class="section">
<h2 id="options">
    Options
    <a class="headerlink" href="#options" title="Permalink to this headline">¶</a>
</h2>
<div class="section">
<h3 id="allowextrafields">
    <code translate="no" class="notranslate">allowExtraFields</code>
    <a class="headerlink" href="#allowextrafields" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">boolean</code> <strong>default</strong>: false</p>
<p>If this option is set to <code translate="no" class="notranslate">false</code> and the underlying collection contains
one or more elements that are not included in the <a href="Collection.html#fields" class="reference internal">fields</a> option, a validation
error will be returned. If set to <code translate="no" class="notranslate">true</code>, extra fields are OK.</p>
</div>
<div class="section">
<h3 id="allowmissingfields">
    <code translate="no" class="notranslate">allowMissingFields</code>
    <a class="headerlink" href="#allowmissingfields" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">boolean</code> <strong>default</strong>: false</p>
<p>If this option is set to <code translate="no" class="notranslate">false</code> and one or more fields from the <a href="Collection.html#fields" class="reference internal">fields</a>
option are not present in the underlying collection, a validation error
will be returned. If set to <code translate="no" class="notranslate">true</code>, it's OK if some fields in the <a href="Collection.html#fields" class="reference internal">fields</a>
option are not present in the underlying collection.</p>
</div>
<div class="section">
<h3 id="extrafieldsmessage">
    <code translate="no" class="notranslate">extraFieldsMessage</code>
    <a class="headerlink" href="#extrafieldsmessage" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">This field was not expected.</code></p>
<p>The message shown if <a href="Collection.html#allowextrafields" class="reference internal">allowExtraFields</a> is false and an extra field is
detected.</p>
<p>You can use the following parameters in this message:</p>
<div class="table-wrapper">
<table>
            <thead>
                            <tr>
                                            <th>Parameter</th>
                                            <th>Description</th>
                                    </tr>
                    </thead>
        <tbody>
                    <tr>
                                    <td><code translate="no" class="notranslate">{{ field }}</code></td>
                                    <td>The key of the extra field detected</td>
                            </tr>
            </tbody>
</table>
</div>
</div>
<div class="section">
<h3 id="fields">
    <code translate="no" class="notranslate">fields</code>
    <a class="headerlink" href="#fields" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">array</code> [<a href="../../validation.html#validation-default-option" class="reference internal">default option</a>]</p>
<p>This option is required and is an associative array defining all of the
keys in the collection and, for each key, exactly which validator(s) should
be executed against that element of the collection.</p>
</div>
<div class="section">
<h3 id="groups">
    <code translate="no" class="notranslate">groups</code>
    <a class="headerlink" href="#groups" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">array</code> | <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>It defines the validation group or groups of this constraint. Read more
about <a href="../../validation/groups.html" class="reference internal">validation groups</a>.</p>
</div>
<div class="section">
<h3 id="missingfieldsmessage">
    <code translate="no" class="notranslate">missingFieldsMessage</code>
    <a class="headerlink" href="#missingfieldsmessage" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">string</code> <strong>default</strong>: <code translate="no" class="notranslate">This field is missing.</code></p>
<p>The message shown if <a href="Collection.html#allowmissingfields" class="reference internal">allowMissingFields</a> is false and one or more fields
are missing from the underlying collection.</p>
<p>You can use the following parameters in this message:</p>
<div class="table-wrapper">
<table>
            <thead>
                            <tr>
                                            <th>Parameter</th>
                                            <th>Description</th>
                                    </tr>
                    </thead>
        <tbody>
                    <tr>
                                    <td><code translate="no" class="notranslate">{{ field }}</code></td>
                                    <td>The key of the missing field defined in <code translate="no" class="notranslate">fields</code></td>
                            </tr>
            </tbody>
</table>
</div>
</div>
<div class="section">
<h3 id="payload">
    <code translate="no" class="notranslate">payload</code>
    <a class="headerlink" href="#payload" title="Permalink to this headline">¶</a>
</h3>
<p><strong>type</strong>: <code translate="no" class="notranslate">mixed</code> <strong>default</strong>: <code translate="no" class="notranslate">null</code></p>
<p>This option can be used to attach arbitrary domain-specific data to a constraint.
The configured payload is not used by the Validator component, but its processing
is completely up to you.</p>
<p>For example, you may want to use
<a href="../../validation/severity.html" class="reference internal">several error levels</a> to present failed
constraints differently in the front-end depending on the severity of the
error.</p>
</div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>