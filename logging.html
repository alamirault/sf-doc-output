        
<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head><base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                                
    
    <link rel="stylesheet" href="assets/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/badge_only.css" type="text/css" />

</head>

<body class="wy-body-for-nav">
 <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">
                
                                                                                                    
                                                                                                                                                                        </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                                                                                                                                                                                                                                                                                            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                                                        

        <div class="wy-nav-content">                <div class="rst-content">
                                        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">                            <div itemprop="articleBody">
                                    <div class="section">
<h1 id="logging">
    Logging
    <a class="headerlink" href="#logging" title="Permalink to this headline">¶</a>
</h1>
<p>Symfony comes with a minimalist <a href="https://www.php-fig.org/psr/psr-3/" class="reference external" rel="external noopener noreferrer" target="_blank">PSR-3</a> logger: <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpKernel/Log/Logger.php" class="reference external" title="Symfony\Component\HttpKernel\Log\Logger" rel="external noopener noreferrer" target="_blank">Logger</a>.
In conformance with <a href="https://12factor.net/logs" class="reference external" rel="external noopener noreferrer" target="_blank">the twelve-factor app methodology</a>, it sends messages starting from the
<code translate="no" class="notranslate">WARNING</code> level to <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_error_(stderr)" class="reference external" rel="external noopener noreferrer" target="_blank">stderr</a>.</p>
<p>The minimal log level can be changed by setting the <code translate="no" class="notranslate">SHELL_VERBOSITY</code> environment variable:</p>
<div class="table-wrapper">
<table>
            <thead>
                            <tr>
                                            <th><code translate="no" class="notranslate">SHELL_VERBOSITY</code> value</th>
                                            <th>Minimum log level</th>
                                    </tr>
                    </thead>
        <tbody>
                    <tr>
                                    <td><code translate="no" class="notranslate">-1</code></td>
                                    <td><code translate="no" class="notranslate">ERROR</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">1</code></td>
                                    <td><code translate="no" class="notranslate">NOTICE</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">2</code></td>
                                    <td><code translate="no" class="notranslate">INFO</code></td>
                            </tr>
                    <tr>
                                    <td><code translate="no" class="notranslate">3</code></td>
                                    <td><code translate="no" class="notranslate">DEBUG</code></td>
                            </tr>
            </tbody>
</table>
</div>
<p>The minimum log level, the default output and the log format can also be changed by
passing the appropriate arguments to the constructor of <a href="https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/HttpKernel/Log/Logger.php" class="reference external" title="Symfony\Component\HttpKernel\Log\Logger" rel="external noopener noreferrer" target="_blank">Logger</a>.
To do so, <a href="service_container.html#service-psr4-loader" class="reference internal">override the "logger" service definition</a>.</p>
<div class="section">
<h2 id="logging-a-message">
    Logging a Message
    <a class="headerlink" href="#logging-a-message" title="Permalink to this headline">¶</a>
</h2>
<p>To log a message, inject the default logger in your controller or service:</p>
<div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">Psr</span>\<span class="hljs-title">Log</span>\<span class="hljs-title">LoggerInterface</span>;

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span><span class="hljs-params">(LoggerInterface <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span>)</span>
</span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span><span class="hljs-operator">-&gt;</span>info(<span class="hljs-string">'I just got the logger'</span>);
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span><span class="hljs-operator">-&gt;</span>error(<span class="hljs-string">'An error occurred'</span>);

    <span class="hljs-comment">// log messages can also contain placeholders, which are variable names</span>
    <span class="hljs-comment">// wrapped in braces whose values are passed as the second argument</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span><span class="hljs-operator">-&gt;</span>debug(<span class="hljs-string">'User {userId} has logged in'</span>, [
        <span class="hljs-string">'userId'</span> =&gt; <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>this</span><span class="hljs-operator">-&gt;</span>getUserId(),
    ]);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>logger</span><span class="hljs-operator">-&gt;</span>critical(<span class="hljs-string">'I left the oven on!'</span>, [
        <span class="hljs-comment">// include extra "context" info in your logs</span>
        <span class="hljs-string">'cause'</span> =&gt; <span class="hljs-string">'in_hurry'</span>,
    ]);

    <span class="hljs-comment">// ...</span>
}</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>Adding placeholders to log messages is recommended because:</p>
<ul>
    <li>It's easier to check log messages because many logging tools group log messages
that are the same except for some variable values inside them;</li>
<li>It's much easier to translate those log messages;</li>
<li>It's better for security, because escaping can then be done by the
implementation in a context-aware fashion.</li>
</ul>
<p>The <code translate="no" class="notranslate">logger</code> service has different methods for different logging levels/priorities.
See <a href="https://github.com/php-fig/log/blob/master/src/LoggerInterface.php" class="reference external" rel="external noopener noreferrer" target="_blank">LoggerInterface</a> for a list of all of the methods on the logger.</p>
</div>
<div class="section">
<h2 id="monolog">
    Monolog
    <a class="headerlink" href="#monolog" title="Permalink to this headline">¶</a>
</h2>
<p>Symfony integrates seamlessly with <a href="https://github.com/Seldaek/monolog" class="reference external" rel="external noopener noreferrer" target="_blank">Monolog</a>, the most popular PHP logging
library, to create and store log messages in a variety of different places
and trigger various actions.</p>
<p>For instance, using Monolog you can configure the logger to do different things based on the
<em>level</em> of a message (e.g. <a href="logging/monolog_email.html" class="reference internal">send an email when an error occurs</a>).</p>
<p>Run this command to install the Monolog based logger before using it:</p>
<div translate="no" class="highlight-terminal highlight-bash notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs terminal bash"><span class="hljs-prompt">$ </span>composer require symfony/monolog-bundle</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<p>The following sections assume that Monolog is installed.</p>
</div>
<div class="section">
<h2 id="where-logs-are-stored">
    Where Logs are Stored
    <a class="headerlink" href="#where-logs-are-stored" title="Permalink to this headline">¶</a>
</h2>
<p>By default, log entries are written to the <code translate="no" class="notranslate">var/log/dev.log</code> file when you're
in the <code translate="no" class="notranslate">dev</code> environment.</p>
<p>In the <code translate="no" class="notranslate">prod</code> environment, logs are written to <a href="https://www.php.net/manual/en/features.commandline.io-streams.php" class="reference external" rel="external noopener noreferrer" target="_blank">STDERR PHP stream</a>, which
works best in modern containerized applications deployed to servers without
disk write permissions.</p>
<p>If you prefer to store production logs in a file, set the <code translate="no" class="notranslate">path</code> of your
log handler(s) to the path of the file to use (e.g. <code translate="no" class="notranslate">var/log/prod.log</code>).</p>
</div>
<div class="section">
<h2 id="handlers-writing-logs-to-different-locations">
    Handlers: Writing Logs to different Locations
    <a class="headerlink" href="#handlers-writing-logs-to-different-locations" title="Permalink to this headline">¶</a>
</h2>
<p>The logger has a stack of <em>handlers</em>, and each can be used to write the log entries
to different locations (e.g. files, database, Slack, etc).</p>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>You can <em>also</em> configure logging &quot;channels&quot;, which are like categories. Each
channel can have its <em>own</em> handlers, which means you can store different log
messages in different places. See <a href="logging/channels_handlers.html" class="reference internal">How to Log Messages to different Files</a>.</p>
</div>
<p>Symfony pre-configures some basic handlers in the default <code translate="no" class="notranslate">monolog.yaml</code>
config files. Check these out for some real-world examples.</p>
<p>This example uses <em>two</em> handlers: <code translate="no" class="notranslate">stream</code> (to write to a file) and <code translate="no" class="notranslate">syslog</code>
to write logs using the <a href="https://secure.php.net/manual/en/function.syslog.php" class="reference external" title="syslog" rel="external noopener noreferrer" target="_blank">syslog</a> function:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-a532a4e53cc51bceebf6719ef278527547ca399e" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-4f2b9809ebd87ac0c62955c0cf2e70f34a4eac75" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-07fe904ca8609849e4dc805a6d2c905369ccbaf6" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-a532a4e53cc51bceebf6719ef278527547ca399e" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/prod/monolog.yaml</span>
<span class="hljs-attr">monolog:</span>
    <span class="hljs-attr">handlers:</span>
        <span class="hljs-comment"># this "file_log" key could be anything</span>
        <span class="hljs-attr">file_log:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">stream</span>
            <span class="hljs-comment"># log to var/log/(environment).log</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">"%kernel.logs_dir%/%kernel.environment%.log"</span>
            <span class="hljs-comment"># log *all* messages (debug is lowest level)</span>
            <span class="hljs-attr">level:</span> <span class="hljs-string">debug</span>

        <span class="hljs-attr">syslog_handler:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">syslog</span>
            <span class="hljs-comment"># log error-level messages and higher</span>
            <span class="hljs-attr">level:</span> <span class="hljs-string">error</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4f2b9809ebd87ac0c62955c0cf2e70f34a4eac75" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/prod/monolog.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:monolog</span>=<span class="hljs-string">"http://symfony.com/schema/dic/monolog"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/monolog
        https://symfony.com/schema/dic/monolog/monolog-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">monolog:config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- this "file_log" key could be anything --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">monolog:handler</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file_log"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"stream"</span>
            <span class="hljs-attr">path</span>=<span class="hljs-string">"%kernel.logs_dir%/%kernel.environment%.log"</span>
            <span class="hljs-attr">level</span>=<span class="hljs-string">"debug"</span>/&gt;</span><span class="hljs-comment">&lt;!-- log *all* messages (debug is lowest level) --&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">monolog:handler</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"syslog_handler"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"syslog"</span>
            <span class="hljs-attr">level</span>=<span class="hljs-string">"error"</span>/&gt;</span><span class="hljs-comment">&lt;!-- log error-level messages and higher --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">monolog:config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-07fe904ca8609849e4dc805a6d2c905369ccbaf6" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/prod/monolog.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">MonologConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(MonologConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span>)</span> </span>{
    <span class="hljs-comment">// this "file_log" key could be anything</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span><span class="hljs-operator">-&gt;</span>handler(<span class="hljs-string">'file_log'</span>)
        <span class="hljs-operator">-&gt;</span>type(<span class="hljs-string">'stream'</span>)
        <span class="hljs-comment">// log to var/logs/(environment).log</span>
        <span class="hljs-operator">-&gt;</span>path(<span class="hljs-string">'%kernel.logs_dir%/%kernel.environment%.log'</span>)
        <span class="hljs-comment">// log *all* messages (debug is lowest level)</span>
        <span class="hljs-operator">-&gt;</span>level(<span class="hljs-string">'debug'</span>);

    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span><span class="hljs-operator">-&gt;</span>handler(<span class="hljs-string">'syslog_handler'</span>)
        <span class="hljs-operator">-&gt;</span>type(<span class="hljs-string">'syslog'</span>)
        <span class="hljs-comment">// log error-level messages and higher</span>
        <span class="hljs-operator">-&gt;</span>level(<span class="hljs-string">'error'</span>);
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>This defines a <em>stack</em> of handlers and each handler is called in the order that it's
defined.</p>
<div class="admonition admonition-note ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                <span>Note</span>
    </p><p>If you want to override the <code translate="no" class="notranslate">monolog</code> configuration via another config
file, you will need to redefine the entire <code translate="no" class="notranslate">handlers</code> stack. The configuration
from the two files cannot be merged because the order matters and a merge does
not allow you to control the order.</p>
</div>
<span id="logging-handler-fingers_crossed"></span>
<div class="section">
<h3 id="handlers-that-modify-log-entries">
    Handlers that Modify Log Entries
    <a class="headerlink" href="#handlers-that-modify-log-entries" title="Permalink to this headline">¶</a>
</h3>
<p>Instead of writing log files somewhere, <em>some</em> handlers are used to filter or modify
log entries before sending them to <em>other</em> handlers. One powerful, built-in handler
called <code translate="no" class="notranslate">fingers_crossed</code> is used in the <code translate="no" class="notranslate">prod</code> environment by default. It stores
<em>all</em> log messages during a request but <em>only</em> passes them to a second handler if
one of the messages reaches an <code translate="no" class="notranslate">action_level</code>. Take this example:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-be87dbf8c9dafdd968f43484fb8fd22f4925323f" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-4af7044a6862429b247519be7744a03681942a67" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-4c98d2ca6dfdb62a8769ee1d60379d06550e48e8" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-be87dbf8c9dafdd968f43484fb8fd22f4925323f" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/prod/monolog.yaml</span>
<span class="hljs-attr">monolog:</span>
    <span class="hljs-attr">handlers:</span>
        <span class="hljs-attr">filter_for_errors:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">fingers_crossed</span>
            <span class="hljs-comment"># if *one* log is error or higher, pass *all* to file_log</span>
            <span class="hljs-attr">action_level:</span> <span class="hljs-string">error</span>
            <span class="hljs-attr">handler:</span> <span class="hljs-string">file_log</span>

        <span class="hljs-comment"># now passed *all* logs, but only if one log is error or higher</span>
        <span class="hljs-attr">file_log:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">stream</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">"%kernel.logs_dir%/%kernel.environment%.log"</span>

        <span class="hljs-comment"># still passed *all* logs, and still only logs error or higher</span>
        <span class="hljs-attr">syslog_handler:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">syslog</span>
            <span class="hljs-attr">level:</span> <span class="hljs-string">error</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4af7044a6862429b247519be7744a03681942a67" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/prod/monolog.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:monolog</span>=<span class="hljs-string">"http://symfony.com/schema/dic/monolog"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/monolog
        https://symfony.com/schema/dic/monolog/monolog-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">monolog:config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- if *one* log is error or higher, pass *all* to file_log --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">monolog:handler</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"filter_for_errors"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"fingers_crossed"</span>
            <span class="hljs-attr">action-level</span>=<span class="hljs-string">"error"</span>
            <span class="hljs-attr">handler</span>=<span class="hljs-string">"file_log"</span>
        /&gt;</span>

        <span class="hljs-comment">&lt;!-- now passed *all* logs, but only if one log is error or higher --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">monolog:handler</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file_log"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"stream"</span>
            <span class="hljs-attr">path</span>=<span class="hljs-string">"%kernel.logs_dir%/%kernel.environment%.log"</span>
            <span class="hljs-attr">level</span>=<span class="hljs-string">"debug"</span>
        /&gt;</span>

        <span class="hljs-comment">&lt;!-- still passed *all* logs, and still only logs error or higher --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">monolog:handler</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"syslog_handler"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"syslog"</span>
            <span class="hljs-attr">level</span>=<span class="hljs-string">"error"</span>
        /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">monolog:config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-4c98d2ca6dfdb62a8769ee1d60379d06550e48e8" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/prod/monolog.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">MonologConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(MonologConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span><span class="hljs-operator">-&gt;</span>handler(<span class="hljs-string">'filter_for_errors'</span>)
        <span class="hljs-operator">-&gt;</span>type(<span class="hljs-string">'fingers_crossed'</span>)
        <span class="hljs-comment">// if *one* log is error or higher, pass *all* to file_log</span>
        <span class="hljs-operator">-&gt;</span>actionLevel(<span class="hljs-string">'error'</span>)
        <span class="hljs-operator">-&gt;</span>handler(<span class="hljs-string">'file_log'</span>)
    ;

    <span class="hljs-comment">// now passed *all* logs, but only if one log is error or higher</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span><span class="hljs-operator">-&gt;</span>handler(<span class="hljs-string">'file_log'</span>)
        <span class="hljs-operator">-&gt;</span>type(<span class="hljs-string">'stream'</span>)
        <span class="hljs-operator">-&gt;</span>path(<span class="hljs-string">'%kernel.logs_dir%/%kernel.environment%.log'</span>)
        <span class="hljs-operator">-&gt;</span>level(<span class="hljs-string">'debug'</span>)
    ;

    <span class="hljs-comment">// still passed *all* logs, and still only logs error or higher</span>
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span><span class="hljs-operator">-&gt;</span>handler(<span class="hljs-string">'syslog_handler'</span>)
        <span class="hljs-operator">-&gt;</span>type(<span class="hljs-string">'syslog'</span>)
        <span class="hljs-operator">-&gt;</span>level(<span class="hljs-string">'error'</span>)
    ;
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
<p>Now, if even one log entry has an <code translate="no" class="notranslate">error</code> level or higher, then <em>all</em> log entries
for that request are saved to a file via the <code translate="no" class="notranslate">file_log</code> handler. That means that
your log file will contain <em>all</em> the details about the problematic request - making
debugging much easier!</p>
<div class="admonition admonition-tip ">
    <p class="admonition-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                <span>Tip</span>
    </p><p>The handler named &quot;file_log&quot; will not be included in the stack itself as
it is used as a nested handler of the <code translate="no" class="notranslate">fingers_crossed</code> handler.</p>
</div>
</div>
</div>
<div class="section">
<h2 id="all-built-in-handlers">
    All Built-in Handlers
    <a class="headerlink" href="#all-built-in-handlers" title="Permalink to this headline">¶</a>
</h2>
<p>Monolog comes with <em>many</em> built-in handlers for emailing logs, sending them to Loggly,
or notifying you in Slack. These are documented inside of MonologBundle itself. For
a full list, see <a href="https://github.com/symfony/monolog-bundle/blob/master/DependencyInjection/Configuration.php#L25" class="reference external" rel="external noopener noreferrer" target="_blank">Monolog Configuration</a>.</p>
</div>
<div class="section">
<h2 id="how-to-rotate-your-log-files">
    How to Rotate your Log Files
    <a class="headerlink" href="#how-to-rotate-your-log-files" title="Permalink to this headline">¶</a>
</h2>
<p>Over time, log files can grow to be <em>huge</em>, both while developing and on
production. One best-practice solution is to use a tool like the <a href="https://github.com/logrotate/logrotate" class="reference external" rel="external noopener noreferrer" target="_blank">logrotate</a>
Linux command to rotate log files before they become too large.</p>
<p>Another option is to have Monolog rotate the files for you by using the
<code translate="no" class="notranslate">rotating_file</code> handler. This handler creates a new log file every day
and can also remove old files automatically. To use it, set the <code translate="no" class="notranslate">type</code>
option of your handler to <code translate="no" class="notranslate">rotating_file</code>:</p>
<div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                aria-controls="configuration-block-tabpanel-c6f3f636af647343ded3ab343c23943d7c38161c" aria-selected="true"
                data-active="true" >
                <span>YAML</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                aria-controls="configuration-block-tabpanel-8d9ad009fa143c416c37d2c47ab296203f6194c9" aria-selected="false"
                 tabindex="-1">
                <span>XML</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                aria-controls="configuration-block-tabpanel-d95077c9187a3e5f8a6606405cb1dde0af5abfbf" aria-selected="false"
                 tabindex="-1">
                <span>PHP</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-c6f3f636af647343ded3ab343c23943d7c38161c" aria-label="YAML" class="configuration-codeblock" data-language="yaml" style="">
            <div translate="no" class="highlight-yaml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs yaml"><span class="hljs-comment"># config/packages/prod/monolog.yaml</span>
<span class="hljs-attr">monolog:</span>
    <span class="hljs-attr">handlers:</span>
        <span class="hljs-attr">main:</span>
            <span class="hljs-attr">type:</span>  <span class="hljs-string">rotating_file</span>
            <span class="hljs-attr">path:</span>  <span class="hljs-string">'%kernel.logs_dir%/%kernel.environment%.log'</span>
            <span class="hljs-attr">level:</span> <span class="hljs-string">debug</span>
            <span class="hljs-comment"># max number of log files to keep</span>
            <span class="hljs-comment"># defaults to zero, which means infinite files</span>
            <span class="hljs-attr">max_files:</span> <span class="hljs-number">10</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-8d9ad009fa143c416c37d2c47ab296203f6194c9" aria-label="XML" class="configuration-codeblock" data-language="xml" style="display: none">
            <div translate="no" class="highlight-xml notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs xml"><span class="hljs-comment">&lt;!-- config/packages/prod/monolog.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns:monolog</span>=<span class="hljs-string">"http://symfony.com/schema/dic/monolog"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/monolog
        https://symfony.com/schema/dic/monolog/monolog-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">monolog:config</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- "max-files": max number of log files to keep
             defaults to zero, which means infinite files --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">monolog:handler</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"main"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"rotating_file"</span>
            <span class="hljs-attr">path</span>=<span class="hljs-string">"%kernel.logs_dir%/%kernel.environment%.log"</span>
            <span class="hljs-attr">level</span>=<span class="hljs-string">"debug"</span>
            <span class="hljs-attr">max-files</span>=<span class="hljs-string">"10"</span>
        /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">monolog:config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-d95077c9187a3e5f8a6606405cb1dde0af5abfbf" aria-label="PHP" class="configuration-codeblock" data-language="php" style="display: none">
            <div translate="no" class="highlight-php notranslate">
    <table class="highlighttable">
        <tbody>
            <tr>
                <td class="linenos">
                    <div class="linenodiv">
                        <pre>1
2
3
4
5
6
7
8
9
10
11
12</pre>
                    </div>
                </td>
                <td class="code">
                    <div class="highlight">
                        <pre class="hljs php"><span class="hljs-comment">// config/packages/prod/monolog.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">MonologConfig</span>;

<span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(MonologConfig <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span>)</span> </span>{
    <span class="hljs-variable"><span class="hljs-variable-other-marker">$</span>monolog</span><span class="hljs-operator">-&gt;</span>handler(<span class="hljs-string">'main'</span>)
        <span class="hljs-operator">-&gt;</span>type(<span class="hljs-string">'rotating_file'</span>)
        <span class="hljs-operator">-&gt;</span>path(<span class="hljs-string">'%kernel.logs_dir%/%kernel.environment%.log'</span>)
        <span class="hljs-operator">-&gt;</span>level(<span class="hljs-string">'debug'</span>)
        <span class="hljs-comment">// max number of log files to keep</span>
        <span class="hljs-comment">// defaults to zero, which means infinite files</span>
        <span class="hljs-operator">-&gt;</span>maxFiles(<span class="hljs-number">10</span>);
};</pre>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
        </div>
    </div>
</div>
<div class="section">
<h2 id="using-a-logger-inside-a-service">
    Using a Logger inside a Service
    <a class="headerlink" href="#using-a-logger-inside-a-service" title="Permalink to this headline">¶</a>
</h2>
<p>If your application uses <a href="service_container.html#services-autoconfigure" class="reference internal">service autoconfiguration</a>,
any service whose class implements <code translate="no" class="notranslate">Psr\Log\LoggerAwareInterface</code> will
receive a call to its method <code translate="no" class="notranslate">setLogger()</code> with the default logger service
passed as a service.</p>
<p>If you want to use in your own services a pre-configured logger which uses a
specific channel (<code translate="no" class="notranslate">app</code> by default), you can either <a href="logging/channels_handlers.html#monolog-autowire-channels" class="reference internal">autowire monolog channels</a>
or use the <code translate="no" class="notranslate">monolog.logger</code> tag  with the <code translate="no" class="notranslate">channel</code> property as explained in the
<a href="reference/dic_tags.html#dic_tags-monolog" class="reference internal">Dependency Injection reference</a>.</p>
</div>
<div class="section">
<h2 id="adding-extra-data-to-each-log-e-g-a-unique-request-token">
    Adding extra Data to each Log (e.g. a unique request token)
    <a class="headerlink" href="#adding-extra-data-to-each-log-e-g-a-unique-request-token" title="Permalink to this headline">¶</a>
</h2>
<p>Monolog also supports <em>processors</em>: functions that can dynamically add extra
information to your log entries.</p>
<p>See <a href="logging/processors.html" class="reference internal">How to Add extra Data to Log Messages via a Processor</a> for details.</p>
</div>
<div class="section">
<h2 id="handling-logs-in-long-running-processes">
    Handling Logs in Long Running Processes
    <a class="headerlink" href="#handling-logs-in-long-running-processes" title="Permalink to this headline">¶</a>
</h2>
<p>During long running processes, logs can be accumulated into Monolog and cause some
buffer overflow, memory increase or even non logical logs. Monolog in-memory data
can be cleared using the <code translate="no" class="notranslate">reset()</code> method on a <code translate="no" class="notranslate">Monolog\Logger</code> instance.
This should typically be called between every job or task that a long running process
is working through.</p>
</div>
<div class="section">
<h2 id="learn-more">
    Learn more
    <a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a>
</h2>
<div class="toctree-wrapper toc-size-md"><ul class="toctree toctree-level-1 toctree-length-7"><li><a href="logging/monolog_email.html">How to Configure Monolog to Email Errors</a></li><li><a href="logging/channels_handlers.html">How to Log Messages to different Files</a></li><li><a href="logging/formatter.html">How to Define a Custom Logging Formatter</a></li><li><a href="logging/processors.html">How to Add extra Data to Log Messages via a Processor</a></li><li><a href="logging/handlers.html">Handlers</a></li><li><a href="logging/monolog_exclude_http_codes.html">How to Configure Monolog to Exclude Specific HTTP Codes from the Log</a></li><li><a href="logging/monolog_console.html">How to Configure Monolog to Display Console Messages</a></li></ul></div>
</div>
</div>

                            </div>                    </div>
                                    </div>        </div>

    </section>

</div>


<script type="text/javascript" src="assets/js/theme.js"></script>
<script type="text/javascript" src="assets/js/badge_only.js"></script>

 
</body>
</html>